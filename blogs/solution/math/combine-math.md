---
title: ç»„åˆæ•°å­¦
---
###  
<hr>

## æ’åˆ—ç»„åˆ

### æ´›è°·P1066_2^kè¿›åˆ¶æ•°

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P1066"><img src="https://i.loli.net/2021/11/09/L12VyJBogcEPT86.png"></a>

#### ğŸ’¡
æˆ‘ä»¬å…ˆæ‰“ä¸€ä¸ª  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> è¿›åˆ¶å’Œ  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> è¿›åˆ¶çš„å¯¹åº”è¡¨çœ‹çœ‹  

::: details è¡¨æ ¼
<table>
<tr><th>k</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;10" title="\inline 10" />  è¿›åˆ¶</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> è¿›åˆ¶</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> è¿›åˆ¶</th></tr>
<tr><td rowspan="101">1</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>10</td><td>10</td></tr>
<tr><td>3</td><td>11</td><td>11</td></tr>
<tr><td>4</td><td>100</td><td>100</td></tr>
<tr><td>5</td><td>101</td><td>101</td></tr>
<tr><td>6</td><td>110</td><td>110</td></tr>
<tr><td>7</td><td>111</td><td>111</td></tr>
<tr><td>8</td><td>1000</td><td>1000</td></tr>
<tr><td>9</td><td>1001</td><td>1001</td></tr>
<tr><td>10</td><td>1010</td><td>1010</td></tr>
<tr><td>11</td><td>1011</td><td>1011</td></tr>
<tr><td>12</td><td>1100</td><td>1100</td></tr>
<tr><td>13</td><td>1101</td><td>1101</td></tr>
<tr><td>14</td><td>1110</td><td>1110</td></tr>
<tr><td>15</td><td>1111</td><td>1111</td></tr>
<tr><td>16</td><td>10000</td><td>10000</td></tr>
<tr><td>17</td><td>10001</td><td>10001</td></tr>
<tr><td>18</td><td>10010</td><td>10010</td></tr>
<tr><td>19</td><td>10011</td><td>10011</td></tr>
<tr><td>20</td><td>10100</td><td>10100</td></tr>
<tr><td>21</td><td>10101</td><td>10101</td></tr>
<tr><td>22</td><td>10110</td><td>10110</td></tr>
<tr><td>23</td><td>10111</td><td>10111</td></tr>
<tr><td>24</td><td>11000</td><td>11000</td></tr>
<tr><td>25</td><td>11001</td><td>11001</td></tr>
<tr><td>26</td><td>11010</td><td>11010</td></tr>
<tr><td>27</td><td>11011</td><td>11011</td></tr>
<tr><td>28</td><td>11100</td><td>11100</td></tr>
<tr><td>29</td><td>11101</td><td>11101</td></tr>
<tr><td>30</td><td>11110</td><td>11110</td></tr>
<tr><td>31</td><td>11111</td><td>11111</td></tr>
<tr><td>32</td><td>100000</td><td>100000</td></tr>
<tr><td>33</td><td>100001</td><td>100001</td></tr>
<tr><td>34</td><td>100010</td><td>100010</td></tr>
<tr><td>35</td><td>100011</td><td>100011</td></tr>
<tr><td>36</td><td>100100</td><td>100100</td></tr>
<tr><td>37</td><td>100101</td><td>100101</td></tr>
<tr><td>38</td><td>100110</td><td>100110</td></tr>
<tr><td>39</td><td>100111</td><td>100111</td></tr>
<tr><td>40</td><td>101000</td><td>101000</td></tr>
<tr><td>41</td><td>101001</td><td>101001</td></tr>
<tr><td>42</td><td>101010</td><td>101010</td></tr>
<tr><td>43</td><td>101011</td><td>101011</td></tr>
<tr><td>44</td><td>101100</td><td>101100</td></tr>
<tr><td>45</td><td>101101</td><td>101101</td></tr>
<tr><td>46</td><td>101110</td><td>101110</td></tr>
<tr><td>47</td><td>101111</td><td>101111</td></tr>
<tr><td>48</td><td>110000</td><td>110000</td></tr>
<tr><td>49</td><td>110001</td><td>110001</td></tr>
<tr><td>50</td><td>110010</td><td>110010</td></tr>
<tr><td>51</td><td>110011</td><td>110011</td></tr>
<tr><td>52</td><td>110100</td><td>110100</td></tr>
<tr><td>53</td><td>110101</td><td>110101</td></tr>
<tr><td>54</td><td>110110</td><td>110110</td></tr>
<tr><td>55</td><td>110111</td><td>110111</td></tr>
<tr><td>56</td><td>111000</td><td>111000</td></tr>
<tr><td>57</td><td>111001</td><td>111001</td></tr>
<tr><td>58</td><td>111010</td><td>111010</td></tr>
<tr><td>59</td><td>111011</td><td>111011</td></tr>
<tr><td>60</td><td>111100</td><td>111100</td></tr>
<tr><td>61</td><td>111101</td><td>111101</td></tr>
<tr><td>62</td><td>111110</td><td>111110</td></tr>
<tr><td>63</td><td>111111</td><td>111111</td></tr>
<tr><td>64</td><td>1000000</td><td>1000000</td></tr>
<tr><td>65</td><td>1000001</td><td>1000001</td></tr>
<tr><td>66</td><td>1000010</td><td>1000010</td></tr>
<tr><td>67</td><td>1000011</td><td>1000011</td></tr>
<tr><td>68</td><td>1000100</td><td>1000100</td></tr>
<tr><td>69</td><td>1000101</td><td>1000101</td></tr>
<tr><td>70</td><td>1000110</td><td>1000110</td></tr>
<tr><td>71</td><td>1000111</td><td>1000111</td></tr>
<tr><td>72</td><td>1001000</td><td>1001000</td></tr>
<tr><td>73</td><td>1001001</td><td>1001001</td></tr>
<tr><td>74</td><td>1001010</td><td>1001010</td></tr>
<tr><td>75</td><td>1001011</td><td>1001011</td></tr>
<tr><td>76</td><td>1001100</td><td>1001100</td></tr>
<tr><td>77</td><td>1001101</td><td>1001101</td></tr>
<tr><td>78</td><td>1001110</td><td>1001110</td></tr>
<tr><td>79</td><td>1001111</td><td>1001111</td></tr>
<tr><td>80</td><td>1010000</td><td>1010000</td></tr>
<tr><td>81</td><td>1010001</td><td>1010001</td></tr>
<tr><td>82</td><td>1010010</td><td>1010010</td></tr>
<tr><td>83</td><td>1010011</td><td>1010011</td></tr>
<tr><td>84</td><td>1010100</td><td>1010100</td></tr>
<tr><td>85</td><td>1010101</td><td>1010101</td></tr>
<tr><td>86</td><td>1010110</td><td>1010110</td></tr>
<tr><td>87</td><td>1010111</td><td>1010111</td></tr>
<tr><td>88</td><td>1011000</td><td>1011000</td></tr>
<tr><td>89</td><td>1011001</td><td>1011001</td></tr>
<tr><td>90</td><td>1011010</td><td>1011010</td></tr>
<tr><td>91</td><td>1011011</td><td>1011011</td></tr>
<tr><td>92</td><td>1011100</td><td>1011100</td></tr>
<tr><td>93</td><td>1011101</td><td>1011101</td></tr>
<tr><td>94</td><td>1011110</td><td>1011110</td></tr>
<tr><td>95</td><td>1011111</td><td>1011111</td></tr>
<tr><td>96</td><td>1100000</td><td>1100000</td></tr>
<tr><td>97</td><td>1100001</td><td>1100001</td></tr>
<tr><td>98</td><td>1100010</td><td>1100010</td></tr>
<tr><td>99</td><td>1100011</td><td>1100011</td></tr>
<tr><td>100</td><td>1100100</td><td>1100100</td></tr>
<tr><td rowspan="101">2</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>2</td><td>10</td></tr>
<tr><td>3</td><td>3</td><td>11</td></tr>
<tr><td>4</td><td>10</td><td>100</td></tr>
<tr><td>5</td><td>11</td><td>101</td></tr>
<tr><td>6</td><td>12</td><td>110</td></tr>
<tr><td>7</td><td>13</td><td>111</td></tr>
<tr><td>8</td><td>20</td><td>1000</td></tr>
<tr><td>9</td><td>21</td><td>1001</td></tr>
<tr><td>10</td><td>22</td><td>1010</td></tr>
<tr><td>11</td><td>23</td><td>1011</td></tr>
<tr><td>12</td><td>30</td><td>1100</td></tr>
<tr><td>13</td><td>31</td><td>1101</td></tr>
<tr><td>14</td><td>32</td><td>1110</td></tr>
<tr><td>15</td><td>33</td><td>1111</td></tr>
<tr><td>16</td><td>100</td><td>10000</td></tr>
<tr><td>17</td><td>101</td><td>10001</td></tr>
<tr><td>18</td><td>102</td><td>10010</td></tr>
<tr><td>19</td><td>103</td><td>10011</td></tr>
<tr><td>20</td><td>110</td><td>10100</td></tr>
<tr><td>21</td><td>111</td><td>10101</td></tr>
<tr><td>22</td><td>112</td><td>10110</td></tr>
<tr><td>23</td><td>113</td><td>10111</td></tr>
<tr><td>24</td><td>120</td><td>11000</td></tr>
<tr><td>25</td><td>121</td><td>11001</td></tr>
<tr><td>26</td><td>122</td><td>11010</td></tr>
<tr><td>27</td><td>123</td><td>11011</td></tr>
<tr><td>28</td><td>130</td><td>11100</td></tr>
<tr><td>29</td><td>131</td><td>11101</td></tr>
<tr><td>30</td><td>132</td><td>11110</td></tr>
<tr><td>31</td><td>133</td><td>11111</td></tr>
<tr><td>32</td><td>200</td><td>100000</td></tr>
<tr><td>33</td><td>201</td><td>100001</td></tr>
<tr><td>34</td><td>202</td><td>100010</td></tr>
<tr><td>35</td><td>203</td><td>100011</td></tr>
<tr><td>36</td><td>210</td><td>100100</td></tr>
<tr><td>37</td><td>211</td><td>100101</td></tr>
<tr><td>38</td><td>212</td><td>100110</td></tr>
<tr><td>39</td><td>213</td><td>100111</td></tr>
<tr><td>40</td><td>220</td><td>101000</td></tr>
<tr><td>41</td><td>221</td><td>101001</td></tr>
<tr><td>42</td><td>222</td><td>101010</td></tr>
<tr><td>43</td><td>223</td><td>101011</td></tr>
<tr><td>44</td><td>230</td><td>101100</td></tr>
<tr><td>45</td><td>231</td><td>101101</td></tr>
<tr><td>46</td><td>232</td><td>101110</td></tr>
<tr><td>47</td><td>233</td><td>101111</td></tr>
<tr><td>48</td><td>300</td><td>110000</td></tr>
<tr><td>49</td><td>301</td><td>110001</td></tr>
<tr><td>50</td><td>302</td><td>110010</td></tr>
<tr><td>51</td><td>303</td><td>110011</td></tr>
<tr><td>52</td><td>310</td><td>110100</td></tr>
<tr><td>53</td><td>311</td><td>110101</td></tr>
<tr><td>54</td><td>312</td><td>110110</td></tr>
<tr><td>55</td><td>313</td><td>110111</td></tr>
<tr><td>56</td><td>320</td><td>111000</td></tr>
<tr><td>57</td><td>321</td><td>111001</td></tr>
<tr><td>58</td><td>322</td><td>111010</td></tr>
<tr><td>59</td><td>323</td><td>111011</td></tr>
<tr><td>60</td><td>330</td><td>111100</td></tr>
<tr><td>61</td><td>331</td><td>111101</td></tr>
<tr><td>62</td><td>332</td><td>111110</td></tr>
<tr><td>63</td><td>333</td><td>111111</td></tr>
<tr><td>64</td><td>1000</td><td>1000000</td></tr>
<tr><td>65</td><td>1001</td><td>1000001</td></tr>
<tr><td>66</td><td>1002</td><td>1000010</td></tr>
<tr><td>67</td><td>1003</td><td>1000011</td></tr>
<tr><td>68</td><td>1010</td><td>1000100</td></tr>
<tr><td>69</td><td>1011</td><td>1000101</td></tr>
<tr><td>70</td><td>1012</td><td>1000110</td></tr>
<tr><td>71</td><td>1013</td><td>1000111</td></tr>
<tr><td>72</td><td>1020</td><td>1001000</td></tr>
<tr><td>73</td><td>1021</td><td>1001001</td></tr>
<tr><td>74</td><td>1022</td><td>1001010</td></tr>
<tr><td>75</td><td>1023</td><td>1001011</td></tr>
<tr><td>76</td><td>1030</td><td>1001100</td></tr>
<tr><td>77</td><td>1031</td><td>1001101</td></tr>
<tr><td>78</td><td>1032</td><td>1001110</td></tr>
<tr><td>79</td><td>1033</td><td>1001111</td></tr>
<tr><td>80</td><td>1100</td><td>1010000</td></tr>
<tr><td>81</td><td>1101</td><td>1010001</td></tr>
<tr><td>82</td><td>1102</td><td>1010010</td></tr>
<tr><td>83</td><td>1103</td><td>1010011</td></tr>
<tr><td>84</td><td>1110</td><td>1010100</td></tr>
<tr><td>85</td><td>1111</td><td>1010101</td></tr>
<tr><td>86</td><td>1112</td><td>1010110</td></tr>
<tr><td>87</td><td>1113</td><td>1010111</td></tr>
<tr><td>88</td><td>1120</td><td>1011000</td></tr>
<tr><td>89</td><td>1121</td><td>1011001</td></tr>
<tr><td>90</td><td>1122</td><td>1011010</td></tr>
<tr><td>91</td><td>1123</td><td>1011011</td></tr>
<tr><td>92</td><td>1130</td><td>1011100</td></tr>
<tr><td>93</td><td>1131</td><td>1011101</td></tr>
<tr><td>94</td><td>1132</td><td>1011110</td></tr>
<tr><td>95</td><td>1133</td><td>1011111</td></tr>
<tr><td>96</td><td>1200</td><td>1100000</td></tr>
<tr><td>97</td><td>1201</td><td>1100001</td></tr>
<tr><td>98</td><td>1202</td><td>1100010</td></tr>
<tr><td>99</td><td>1203</td><td>1100011</td></tr>
<tr><td>100</td><td>1210</td><td>1100100</td></tr>
<tr><td rowspan="101">3</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>2</td><td>10</td></tr>
<tr><td>3</td><td>3</td><td>11</td></tr>
<tr><td>4</td><td>4</td><td>100</td></tr>
<tr><td>5</td><td>5</td><td>101</td></tr>
<tr><td>6</td><td>6</td><td>110</td></tr>
<tr><td>7</td><td>7</td><td>111</td></tr>
<tr><td>8</td><td>10</td><td>1000</td></tr>
<tr><td>9</td><td>11</td><td>1001</td></tr>
<tr><td>10</td><td>12</td><td>1010</td></tr>
<tr><td>11</td><td>13</td><td>1011</td></tr>
<tr><td>12</td><td>14</td><td>1100</td></tr>
<tr><td>13</td><td>15</td><td>1101</td></tr>
<tr><td>14</td><td>16</td><td>1110</td></tr>
<tr><td>15</td><td>17</td><td>1111</td></tr>
<tr><td>16</td><td>20</td><td>10000</td></tr>
<tr><td>17</td><td>21</td><td>10001</td></tr>
<tr><td>18</td><td>22</td><td>10010</td></tr>
<tr><td>19</td><td>23</td><td>10011</td></tr>
<tr><td>20</td><td>24</td><td>10100</td></tr>
<tr><td>21</td><td>25</td><td>10101</td></tr>
<tr><td>22</td><td>26</td><td>10110</td></tr>
<tr><td>23</td><td>27</td><td>10111</td></tr>
<tr><td>24</td><td>30</td><td>11000</td></tr>
<tr><td>25</td><td>31</td><td>11001</td></tr>
<tr><td>26</td><td>32</td><td>11010</td></tr>
<tr><td>27</td><td>33</td><td>11011</td></tr>
<tr><td>28</td><td>34</td><td>11100</td></tr>
<tr><td>29</td><td>35</td><td>11101</td></tr>
<tr><td>30</td><td>36</td><td>11110</td></tr>
<tr><td>31</td><td>37</td><td>11111</td></tr>
<tr><td>32</td><td>40</td><td>100000</td></tr>
<tr><td>33</td><td>41</td><td>100001</td></tr>
<tr><td>34</td><td>42</td><td>100010</td></tr>
<tr><td>35</td><td>43</td><td>100011</td></tr>
<tr><td>36</td><td>44</td><td>100100</td></tr>
<tr><td>37</td><td>45</td><td>100101</td></tr>
<tr><td>38</td><td>46</td><td>100110</td></tr>
<tr><td>39</td><td>47</td><td>100111</td></tr>
<tr><td>40</td><td>50</td><td>101000</td></tr>
<tr><td>41</td><td>51</td><td>101001</td></tr>
<tr><td>42</td><td>52</td><td>101010</td></tr>
<tr><td>43</td><td>53</td><td>101011</td></tr>
<tr><td>44</td><td>54</td><td>101100</td></tr>
<tr><td>45</td><td>55</td><td>101101</td></tr>
<tr><td>46</td><td>56</td><td>101110</td></tr>
<tr><td>47</td><td>57</td><td>101111</td></tr>
<tr><td>48</td><td>60</td><td>110000</td></tr>
<tr><td>49</td><td>61</td><td>110001</td></tr>
<tr><td>50</td><td>62</td><td>110010</td></tr>
<tr><td>51</td><td>63</td><td>110011</td></tr>
<tr><td>52</td><td>64</td><td>110100</td></tr>
<tr><td>53</td><td>65</td><td>110101</td></tr>
<tr><td>54</td><td>66</td><td>110110</td></tr>
<tr><td>55</td><td>67</td><td>110111</td></tr>
<tr><td>56</td><td>70</td><td>111000</td></tr>
<tr><td>57</td><td>71</td><td>111001</td></tr>
<tr><td>58</td><td>72</td><td>111010</td></tr>
<tr><td>59</td><td>73</td><td>111011</td></tr>
<tr><td>60</td><td>74</td><td>111100</td></tr>
<tr><td>61</td><td>75</td><td>111101</td></tr>
<tr><td>62</td><td>76</td><td>111110</td></tr>
<tr><td>63</td><td>77</td><td>111111</td></tr>
<tr><td>64</td><td>100</td><td>1000000</td></tr>
<tr><td>65</td><td>101</td><td>1000001</td></tr>
<tr><td>66</td><td>102</td><td>1000010</td></tr>
<tr><td>67</td><td>103</td><td>1000011</td></tr>
<tr><td>68</td><td>104</td><td>1000100</td></tr>
<tr><td>69</td><td>105</td><td>1000101</td></tr>
<tr><td>70</td><td>106</td><td>1000110</td></tr>
<tr><td>71</td><td>107</td><td>1000111</td></tr>
<tr><td>72</td><td>110</td><td>1001000</td></tr>
<tr><td>73</td><td>111</td><td>1001001</td></tr>
<tr><td>74</td><td>112</td><td>1001010</td></tr>
<tr><td>75</td><td>113</td><td>1001011</td></tr>
<tr><td>76</td><td>114</td><td>1001100</td></tr>
<tr><td>77</td><td>115</td><td>1001101</td></tr>
<tr><td>78</td><td>116</td><td>1001110</td></tr>
<tr><td>79</td><td>117</td><td>1001111</td></tr>
<tr><td>80</td><td>120</td><td>1010000</td></tr>
<tr><td>81</td><td>121</td><td>1010001</td></tr>
<tr><td>82</td><td>122</td><td>1010010</td></tr>
<tr><td>83</td><td>123</td><td>1010011</td></tr>
<tr><td>84</td><td>124</td><td>1010100</td></tr>
<tr><td>85</td><td>125</td><td>1010101</td></tr>
<tr><td>86</td><td>126</td><td>1010110</td></tr>
<tr><td>87</td><td>127</td><td>1010111</td></tr>
<tr><td>88</td><td>130</td><td>1011000</td></tr>
<tr><td>89</td><td>131</td><td>1011001</td></tr>
<tr><td>90</td><td>132</td><td>1011010</td></tr>
<tr><td>91</td><td>133</td><td>1011011</td></tr>
<tr><td>92</td><td>134</td><td>1011100</td></tr>
<tr><td>93</td><td>135</td><td>1011101</td></tr>
<tr><td>94</td><td>136</td><td>1011110</td></tr>
<tr><td>95</td><td>137</td><td>1011111</td></tr>
<tr><td>96</td><td>140</td><td>1100000</td></tr>
<tr><td>97</td><td>141</td><td>1100001</td></tr>
<tr><td>98</td><td>142</td><td>1100010</td></tr>
<tr><td>99</td><td>143</td><td>1100011</td></tr>
<tr><td>100</td><td>144</td><td>1100100</td></tr>
</table>
:::
  
å¯ä»¥å‘ç°å‡ ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼š  
$1.$  $2^k$ è¿›åˆ¶å¯¹äº  $2$ è¿›åˆ¶çš„è¿›ä½æé™åœ¨ $2^k$ è¿›åˆ¶è¡¨ç¤ºçš„æœ€é«˜ä½ä¸Šå‘ˆè¿™æ ·çš„æ’åˆ—  
 <table>
 <tr><th>k=1</th><td>1,1,1,1,1,1,...</td></tr>
 <tr><th>k=2</th><td>1,3,1,3,1,3,...</td></tr>
 <tr><th>k=3</th><td>1,3,7,1,3,7,...</td></tr>
 </table>  
 é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä»ä¸­æ¨å‡º  
  <table>
 <tr><th>k=x</th><td> $2^0-1,2^1-1,2^2-1,...2^x-1,2^0-1,2^1-1,2^2-1,....,2^x-1....$</td></tr>
 </table>  
 
$2.$ $2^k$ è¿›åˆ¶ä¸‹ï¼Œåœ¨è¿™ä¸ªæ’åˆ—é‡Œé¢ï¼Œä¸€æ¬¡å¾ªç¯  $2^k$ è¿›åˆ¶ä¼šè¿›ä¸€ä½  
  
    
    
å¯¹äºé¢˜ç›®ï¼Œæˆ‘ä»¬èµ°å®Œè¿™ä¸ªæ’åˆ—ä¸­  <img src="https://latex.codecogs.com/svg.image?\inline&space;w" title="\inline w" /> ä¸ªæ•°å°±å¯ä»¥ç»“æŸäº†    
æˆ‘ä»¬æšä¸¾æœ€é«˜ä½çš„æ•°å­—  <img src="https://latex.codecogs.com/svg.image?\inline&space;[1,2^k-1]" title="\inline [1,2^k-1]" />  ï¼Œå¯çŸ¥åœ¨ä¸€æ¬¡å¾ªç¯ä¸­æˆ‘ä»¬  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> è¿›åˆ¶çš„ä½æ•°æ—¶ä¸å˜çš„  
ä¸”å¦‚æœ  <img src="https://latex.codecogs.com/svg.image?\inline&space;i+1" title="\inline i+1" /> æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> çš„å¹‚æ¬¡ï¼Œå³  <img src="https://latex.codecogs.com/svg.image?\inline&space;lowbit(i+1)=i+1" title="\inline lowbit(i+1)=i+1" />  é‚£ä¹ˆå°±è¯´æ˜æˆ‘ä»¬èµ°è¿‡äº†æ’åˆ—ä¸­çš„ä¸€ä¸ªæ•°ä¹Ÿå°±æ˜¯åœ¨  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> è¿›åˆ¶ä¸‹è¿›äº†ä¸€ä½    
è€Œæˆ‘ä»¬æƒ³è¦åœ¨æœ€é«˜ä½  <img src="https://latex.codecogs.com/svg.image?\inline&space;i" title="\inline i" />  æ•°å­—ä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;j" title="\inline j" /> æ—¶åé¢ä½ä½æœ‰å¤šå°‘ç§æ„é€ æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡  <img src="https://latex.codecogs.com/svg.image?\inline&space;dp[i][j]" title="\inline dp[i][j]" /> é¢„å¤„ç†ä¸€ä¸‹  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}dp[i][j]&=\sum\limits_{x=1}^{(1<<k)-1}dp[i-1][x]\\&=dp[i][j-1]+dp[i-1][j]\end{aligned}" title="\inline \begin{aligned}dp[i][j]&=\sum\limits_{x=1}^{(1<<k)-1}dp[i-1][x]\\&=dp[i][j-1]+dp[i-1][j]\end{aligned}" />  

ä½†æ˜¯æˆ‘ä»¬è¿™ä¸ªæ˜¯è®¡ç®—äº†  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> è¿›åˆ¶ä¸‹çš„æ‰€æœ‰å¯è¡Œä½æ•°ï¼Œæœ€åè¿˜è¦æŒ‰è¦æ±‚å‡æ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;1" title="\inline 1" /> ä½çš„  

è¿™é‡Œä¸Š  <img src="https://latex.codecogs.com/svg.image?\inline&space;Java" title="\inline Java" /> é«˜ç²¾ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```java
public class Main {

        static BigInteger zero = BigInteger.ZERO;
        static BigInteger one = BigInteger.ONE;
        static BigInteger two = BigInteger.valueOf(2);
        static BigInteger six = BigInteger.valueOf(6);
        static BigInteger ten = BigInteger.TEN;

        static int N = 1000;
        static BigInteger[][] dp = new BigInteger[N][N];
        static int k, w;

        public static void Get_Dp () {
                for ( int i = 0; i < N; i ++ ) for ( int j = 0; j < N; j ++ ) dp[i][j] = zero;
                for ( int i = 1; i < (1 << k); i ++ ) dp[1][i] = one;
                for ( int i = 2; i < (1 << k); i ++ ) {
                        for ( int j = 2; j < (1 << k); j ++ ) dp[i][1] = dp[i][1].add(dp[i - 1][j]);
                        for ( int j = 2; j < (1 << k); j ++ ) dp[i][j] = dp[i][j - 1].subtract(dp[i - 1][j]);
                }
        }
        public static int lowbit ( int x ) { return x & (-x); }
        public static void main (String[] args) {
                Scanner input = new Scanner(System.in);
                k = input.nextInt();
                w = input.nextInt(); int tmp = w;
                Get_Dp();

                int num = 1;
                BigInteger res = zero;
                boolean flag = false;
                while ( true ) {
                        for ( int i = 1; i < (1 << k); i ++ ) {         // æšä¸¾æœ€é«˜ä½
                                res = res.add(dp[num][i]);              // numä¸ªæ•°å­—ï¼Œæœ€é«˜ä½æ˜¯içš„æ„é€ æ–¹å¼
                                if ( lowbit(i + 1) == i + 1 ) w --;     // æ˜¯æ’åˆ—ä¸­çš„ä¸€ä¸ªæ•°ï¼Œè¿›äº†ä¸€ä½
                                if ( w == 0 ) { flag = true; break; }   // è¿›åˆ°å¤´äº†
                        }
                        if ( flag ) break;
                        num ++;
                }

                w = tmp;
                for ( int i = 1; i < (1 << k); i ++ ) { // å‡å»(2^k)é•¿åº¦ä¸º1çš„ä¸²
                        res = res.subtract(dp[1][i]);
                        if ( lowbit(i + 1) == i + 1 ) w --;
                        if ( w == 0 ) break;
                }
                System.out.println(res);
                input.close();
        }
}
```

<hr>

### æ´›è°·P2290_æ ‘çš„è®¡æ•°

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P2290"><img src="https://img-blog.csdnimg.cn/18b01b4fd60e4e1cac1ed7de753a8151.png"></a>

#### ğŸ’¡
ç›´æ¥æ ¹æ®<a href="">Pruferç¼–ç æ€§è´¨3æ¨è®º</a>è¿›è¡Œè¿™ä¸ªå¼å­çš„è®¡ç®—  
ä¸è¿‡éœ€è¦ç‰¹åˆ¤å¾ˆå¤šåœ°æ–¹  
1.å¦‚æœèŠ‚ç‚¹æ•°ä¸º1ï¼Œè¾“å…¥çš„ç‚¹åº¦æ•°åªèƒ½æ˜¯ä¸€ä¸ª0  
2.å¦‚æœèŠ‚ç‚¹æ•°ä¸ä¸º1ï¼Œæœ‰ä¸€ä¸ªèŠ‚ç‚¹åº¦æ•°æ˜¯0å°±ä¸è¡Œ  
3.å¦‚æœèŠ‚ç‚¹æ•°ä¸ä¸º1ï¼Œ<img src="https://latex.codecogs.com/svg.image?\sum\limits_{i=1}^nd_i&space;-&space;n&space;=&space;n-2" title="\sum\limits_{i=1}^nd_i - n = n-2" />æ‰è¡Œ  
  
è¿™äº›ç‰¹åˆ¤åˆ¤æ‰ä¹‹åå°±è¿›è¡Œè®¡ç®—å³å¯  
è¦å¼€é«˜ç²¾

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```java
public class Main {
        public static BigInteger one = BigInteger.ONE;
        public static BigInteger zero = BigInteger.ZERO;
        public static BigInteger two = BigInteger.valueOf(2);
        public static BigInteger ten = BigInteger.TEN;
        
        static int N = 200;
        static BigInteger[] f = new BigInteger[N];
        public static void get_F () {
                f[0] = one;
                for ( int i = 1; i < N; i ++ ) {
                        f[i] = f[i - 1].multiply(BigInteger.valueOf(i));
                }
        }
        static int n;
        static int[] d = new int[N];
        static int sumd = 0;

        public static void main ( String[] args ) {
                get_F();
                Scanner input = new Scanner(System.in);
                n = input.nextInt();
                for ( int i = 0; i < n; i ++ ) {
                        d[i] = input.nextInt();
                        sumd += d[i] - 1;
                }
                if ( n == 1 ) {
                        if ( d[0] == 0 ) System.out.println(1);
                        else             System.out.println(0);
                        return;
                }
                if ( sumd != n - 2 ) {
                        System.out.println(0);
                        return;
                }
                for ( int i = 0; i < n; i ++ )
                        if ( d[i] == 0 ) {
                                System.out.println(0);
                                return;
                        }

                BigInteger up = f[n - 2];
                BigInteger down = one;
                for ( int i = 0; i < n; i ++ ) down = down.multiply(f[d[i] - 1]);
                if ( down.compareTo(zero) != 0 ) System.out.println(up.divide(down));
                else                             System.out.println(0);

                input.close();
        }
}
```

<hr>

### æ´›è°·P2606_æ’åˆ—è®¡æ•°

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P2606"><img src="https://i.loli.net/2021/11/19/OYNjF4ecQx7MyCl.png"></a>

#### ğŸ’¡
çœ‹åˆ°è¿™ä¸ªçº¦æŸæ¡ä»¶  <img src="https://latex.codecogs.com/svg.image?\inline&space;[1\rightarrow2\And3],[2\rightarrow4\And5],..." title="\inline 1\rightarrow2\And3,2\rightarrow4\And5,..." />   
æˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºä¸€æ£µäºŒå‰æ ‘  
ä»  <img src="https://latex.codecogs.com/svg.image?\inline&space;1" title="\inline 1" />  å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;Sz_1" title="\inline Sz_1" /> ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€‰æ‹©  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{Sz_1-1}{Sz_2}" title="\inline \binom{Sz_1-1}{Sz_2}" /> æ”¾å…¥äºŒå·å­æ ‘ï¼Œå…¶ä½™æ”¾å…¥ä¸‰å·å­æ ‘  
é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{Sz_x-1}{Sz_{x\times&space;2}}" title="\inline " /> æ”¾å…¥å·¦å­æ ‘ï¼Œå…¶ä½™æ”¾å…¥å³å­æ ‘  
è¿™æ ·å°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;C(Sz_x-1,Sz{x\times&space;2\times&space;Dfs(x\times2)\times&space;Dfs(x\times2+1)" title="\inline C(S" />   
  
æ³¨æ„æ¨¡æ•°å¯èƒ½å¾ˆå°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨  <img src="https://latex.codecogs.com/svg.image?\inline&space;Lucas" title="\inline Lucas" /> å®šç†  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int N = 3e6 + 10;

int n, mod;

inline ll ksm ( ll a, ll b ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv ( ll x ) { return ksm(x, mod - 2); }
ll fac[N]; inline void get_Fac () { fac[0] = 1; for ( int i = 1; i < N; i ++ ) fac[i] = fac[i - 1] * i % mod; }
inline ll C ( ll n, ll m ) { 
        if ( n < m )   return 0;
        if ( n < mod ) return fac[n] * inv(fac[n - m]) % mod * inv(fac[m]) % mod; 
        return C ( n / mod, m / mod ) * C ( n % mod, m % mod ) % mod;
}

namespace Tree {
        ll sz[N];
        inline void get_Sz ( ll x ) {
                sz[x] = 1;
                if ( x * 2 <= n )     get_Sz ( x * 2 ),     sz[x] += sz[x * 2];
                if ( x * 2 + 1 <= n ) get_Sz ( x * 2 + 1 ), sz[x] += sz[x * 2 + 1];
        }
        inline ll dfs ( ll x ) {
                if ( x > n ) return 1; 
                return C ( sz[x] - 1, sz[2 * x] ) * dfs ( 2 * x ) % mod * dfs ( 2 * x + 1 ) % mod;
        }
} using namespace Tree;

int main () { 
        cin >> n >> mod;
        get_Fac (); get_Sz ( 1 );
        cout << dfs ( 1 ) << endl;
}
```

<hr>

### æ´›è°·P3048_CowIDsS

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P3048">![20220428161753](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220428161753.png)</a>

#### ğŸ’¡
ç”±äºæ•°ä»å°åˆ°å¤§ï¼Œé¦–å…ˆè€ƒè™‘è·³è¿‡ä¸€äº›é•¿åº¦çš„æ•°  
å¯¹äºé•¿åº¦ $x$ ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª $1$ æ‹¿å‡ºæ¥æ”¾åˆ°ç¬¬ä¸€ä¸ªä½ç½®ï¼Œåé¢çš„ $x-1$ ä¸ªä½ç½®æ”¾ç½® $k-1$ ä¸ª $1$ æœ‰ $C_{x-1}^{k-1}$ ä¸­åˆ†å¸ƒæ–¹å¼  
é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡è¿™æ ·ä¸€æ­¥æ­¥å¯¹ $N$ å‡å°æ¥å›ºå®šå‡ºç­”æ¡ˆçš„é•¿åº¦æ˜¯å¤šå°‘  
ç„¶åå‰©ä¸‹äº† $N$ ä¸ªæ’åï¼Œè€ƒè™‘æ¯ä¸€ä½å¦‚æœæ”¾äº† $1$ ä¼šæå‡å¤šå°‘æ’åï¼Œæˆ‘ä»¬åªè¦è®©æ’åæå‡åˆ°ç­‰äº $N$ å³å¯  
è‡³äºæ¯ä¸€ä½æ”¾ç½® $1$ æå‡çš„æ’åï¼Œä»¤ $n-i$ ä¸ºåé¢çš„ä½ç½®æ•°ï¼Œ$one$ ä¸ºå‰©ä¸‹è¿˜æ²¡æœ‰æ”¾ç½®çš„ $1$ çš„ä¸ªæ•°   
é‚£ä¹ˆæå‡çš„æ’åä¸º $C_{n-i}^{one}$   
å¦‚æœè¿™ä¸ªæ•°æ¯” $N$ å°çš„è¯å°±è®© $N$ å‡å»å®ƒå°±è¡Œäº†ï¼Œå¹¶ä¸”å‰©ä½™æœªæ”¾ç½®çš„ $1$ çš„ä¸ªæ•°å‡ä¸€  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline int C (int n, int m) {
        if (m < 0 || n < m) return 0;
        if (m == 0 || n == m) return 1;
        int res = 1;
        int idx = 1;
        for (int i = m + 1; i <= n; i ++) {
                res *= i;
                while (idx <= n - m && res % idx == 0) {
                        res /= idx;
                        ++ idx;
                }
        }
        return res;
}

int main () {
        int N, K; scanf("%d%d", &N, &K);
        N --;
        int n = K - 1, m = 0;
        int Cnm = C(n, m);
        while (N - Cnm >= 0) {
                N -= Cnm; 
                ++ n, ++ m;
                Cnm = C(n, m);
        }
        int one = n - m;

        putchar('1');
        for (int i = 1; i <= n; ++ i) {
                int cur = C(n - i, one);
                if (cur <= N) {
                        N -= cur;
                        putchar('1');
                        one --;
                } else {
                        putchar('0');
                }
        } 
}
```
<hr>


### æ´›è°·P3904_ä¸‰åªå°çŒª

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P3904">![20220427215637](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220427215637.png)</a>

#### ğŸ’¡
æ ¹æ®å›¾ç‰‡å°±èƒ½çœ‹å‡ºï¼Œ$n$ ä¸ªä¸åŒçš„å°çŒªæ”¾åˆ° $m$ ä¸ªç›¸åŒçš„æˆ¿é—´é‡Œé¢ï¼Œè¿™ä¸å°±æ˜¯çƒç›’æ¨¡å‹å—ï¼Ÿ  
çœ‹åˆ°æ•°æ®é‡å¤§åŠ› $\begin{Bmatrix}n\\m\end{Bmatrix}$   
ï¼ˆä¸è¿‡è¦å¼€é«˜ç²¾å°±æ˜¯äº†

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```java
public class Main{
        static int N = 2005;
        static BigInteger zero = BigInteger.ZERO;
        static BigInteger one = BigInteger.ONE;
        static BigInteger two = BigInteger.valueOf(2);
        static BigInteger six = BigInteger.valueOf(6);
        static BigInteger ten = BigInteger.TEN;
        static BigInteger five = BigInteger.valueOf(5);
        static BigInteger[][] s = new BigInteger[100][100];
        public static void main(String[] args) {
                Scanner input = new Scanner(System.in);
                int n = input.nextInt(), m = input.nextInt();
                for (int i = 0; i <= n; i ++) for (int j = 0; j <= m; j ++) s[i][j] = zero;
                for (int i = 1; i <= n; i ++) {
                        for (int j = 1; j <= i; j ++) {
                                if (j == i || j == 1) s[i][j] = one;
                                else s[i][j] = BigInteger.valueOf(j).multiply(s[i - 1][j]).add(s[i - 1][j - 1]);
                        }
                }
                System.out.println(s[n][m]);
                input.close();
        }
}
```
<hr>

### æ´›è°·P3937_Changing

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P3937">![20220428162711](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220428162711.png)</a>

#### ğŸ’¡
åˆ†æç¬¬ $a_{t,i}$ çš„è½¬ç§»å…³ç³»  
$\begin{aligned}
&1a_{t,i}\\
=&1a_{t-1,i}+1a_{t-1,i+1}\\
=&1a_{t-2,i}+2a_{t-2,i+1}+1a_{t-2,i+2}\\
=&1a_{t-3,i}+3a_{t-3,i+1}+3a_{t-3,i+2}+1a_{t-3,i+3}\\
...
\end{aligned}(mod\;2)$  
æ¢å¥è¯è¯´ $a_{t,k}=a_{t-1,k}+a_{t-1,k+1}$ è¿™ä¸ªå¼å­å°±å¾ˆå®¹æ˜“è®©äººè”æƒ³åˆ°æ¨è¾‰ä¸‰è§’  
é‚£ä¹ˆå¯ä»¥æ¨å‡ºæ¥å¼å­ $a_{t,k}=\sum\limits_{i=0}^tC_t^ia_{0,k+i}$  
ç­‰äºè¯´å¦‚æœ $C_t^i=1$ é‚£ä¹ˆ $a_{0,k+i}$ å°±ä¼šäº§ç”Ÿè´¡çŒ®  
æ¨¡ $2$ çš„æ¨è¾‰ä¸‰è§’è€ƒè™‘ [Sierpinskiä¸‰è§’å½¢æ¨å‡ºæ¥çš„æ¨è¾‰ä¸‰è§’ä¸è¿›åˆ¶å…³ç³»](https://tech.chivas-regal.top/blogs/algorithm/math/sierpinski-triangle.html#%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92-%E4%B8%8E-%E8%BF%9B%E5%88%B6)  
å¯ä»¥å‘å‘ç°å½“ $t\&i=i$ æ—¶ $a_{k+i}$ æ˜¯æœ‰è´¡çŒ®çš„ï¼ŒåŠ ä¸Šå³å¯  
æœ€åçœ‹ç­”æ¡ˆçš„å¥‡å¶æ€§ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
int n, t, k;
inline int add (int x, int y) {return (x + y) % n;}

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        cin >> n >> t >> k; k --;
        vector<int> a(n); for (int i = 0; i < n; i ++) cin >> a[i];

        int res = 0;
        for (int i = 0; i <= t; i ++) {
                if ((t | i) == t) res ^= a[add(k, i)];
        }
        cout << res << endl;
}
```
<hr>

### æ´›è°·P4562_æ¸¸æˆ

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P4562">![20220428164821](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220428164821.png)</a>

#### ğŸ’¡
åˆ†æä¸€æ³¢é¢˜æ„ï¼Œ<b>$t(p)$ å°±æ˜¯å¯¹äºæ’åˆ— $p$ ï¼Œæ²¡æœ‰å› å­çš„æ•°å‡ºç°çš„æœ€åä½ç½®</b>   
  
é‚£ä¹ˆæˆ‘ä»¬å°†æ‰€æœ‰æ•°åˆ†ä¸º  
$div_1$ï¼šæ— å› å­çš„æ•°çš„æ•°é‡  
$div_2$ï¼šæœ‰å› å­çš„æ•°çš„æ•°é‡  
è¿™ä¸ªå¯ä»¥é€šè¿‡åŸƒæ°ç­›æ±‚å¾—   
  
å¯¹äºç­”æ¡ˆï¼Œè€ƒè™‘è´¡çŒ®ï¼Œå³ä¸ºå¯¹äºæ¯ä¸€ä¸ªä½ç½® $i$ï¼Œæ±‚å®ƒèƒ½ä½œä¸º $t(p)$ çš„æ’åˆ—æ•°é‡ $num$   
é‚£ä¹ˆç­”æ¡ˆä¾¿æ˜¯ $\sum\limits_i(i\times num)$   
  
å¯¹äº $num$ çš„æ±‚æ³•:  
- æˆ‘ä»¬è®© $div_1$ å…¶ä¸­ä¸€ä¸ªå¡åœ¨ç¬¬ $i$ ä¸ªä½ç½®  
- å…¶ä½™çš„ $div_1-1$ ä¸ªæ•°åœ¨ $[1,i)$ é‡Œé¢ä»»æ„åˆ†å¸ƒ  
- è¿™é‡Œæˆ‘ä»¬åªæ˜¯è€ƒè™‘äº†ä½ç½®ã€‚è¿˜è¦è€ƒè™‘æ–¹æ¡ˆæ•° æ‰€ä»¥ $div_1,div_2$ ä¹Ÿéƒ½è¦å…¨æ’åˆ—ä¸€ä¸‹ 

é‚£ä¹ˆ $num=1\times \binom{i-1}{div_1-1}\times (div_1!)\times (div_2!)$  

ç”±äºå‰ $i$ ä¸ªä½ç½®è¦å­˜æ”¾å®Œ $div_1$ ä¸ªæ•°ï¼Œæ‰€ä»¥ $i\in[div_1,n]$  
æ‰€ä»¥ç­”æ¡ˆä¸º  
$$\sum\limits_{i=div_1}^n(1\times\binom{i-1}{div_1-1}\times (div_1!)\times (div_2!)\times i)$$

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e7 + 10;
const int mod = 1e9 + 7;

inline ll ksm (ll a, ll b) { ll res = 1; while (b) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }

ll f[N], ivf[N];
inline void Pre () {
        f[0] = 1;
        for (int i = 1; i < N; i ++) f[i] = f[i - 1] * i % mod;
        ivf[N - 1] = inv(f[N - 1]);
        for (int i = N - 2; i >= 0; i --) ivf[i] = ivf[i + 1] * (i + 1) % mod;
}
inline ll C (int n, int m) {
        return f[n] * ivf[m] % mod * ivf[n - m] % mod;
}

bool vis[N];

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        Pre();

        int l, r; cin >> l >> r;
        int n = r - l + 1;

        int div1 = 0, div2 = n;
        for (int i = l; i <= r; i ++) {
                if (!vis[i]) {
                        div1 ++;
                        div2 --;
                        for (int j = i + i; j <= r; j += i) vis[j] = true;
                }
        }

        ll res = 0;
        for (int i = div1; i <= n; i ++) {
                res += C(i - 1, div1 - 1) * f[div1] % mod * f[div2] % mod * i % mod;
                res %= mod;
        }
        cout << res << endl;
}
```
<hr>

### æ´›è°·P4912_æƒ…ä¾£ï¼Ÿç»™æˆ‘çƒ§äº†ï¼

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P4921">![20220706215418](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220706215418.png)</a>

#### ğŸ’¡
ä¸€ä¸ªæ ¸å¿ƒä¸ºæ±‚é”™ä½å…¨æ’åˆ—çš„é—®é¢˜  
é¦–å…ˆå»ç®—æœ‰ $k$ ä¸ªåŒ¹é…ä¸Šçš„æ–¹æ¡ˆæ•°  
é€‰æ‹© $k$ å¯¹æƒ…ä¾£ï¼Œé€‰æ‹© $k$ ä¸ªä½ç½®ï¼Œæƒ…ä¾£è¿›è¡Œå…¨æ’åˆ—å³ $k!$ ï¼Œæ¯å¯¹æƒ…ä¾£å·¦å³é¡ºåºå¯ä»¥äº’æ¢ $2^k$ ï¼Œå‰©ä¸‹ $(n-k)$ å¯¹æƒ…ä¾£è¿›è¡Œå¯ç”·ç”·ã€å¥³å¥³ã€ç”·å¥³ã€å¥³ç”·çš„é”™ä½å…¨æ’åˆ— $ep[n-k]$   
å³ï¼š$res[k]=C_n^kC_n^k(k!)2^kep[n-k]$  
  
æ¥ä¸‹æ¥æ˜¯è€ƒè™‘è¿™ä¸ª $ep[k]$ æ˜¯æ€ä¹ˆæ±‚çš„  
<b>ç¬¬ä¸€æ’é€‰æ‹©åŒæ€§ï¼š</b>  
$k$ ä¸ªäººæœ‰ $k(k-1)$ ç§é€‰æ‹©æ–¹å¼  
å¦‚æœtaä»¬çš„å¯¹è±¡è¿›è¡ŒåŒ¹é…ï¼Œåˆ™åœ¨å‰©ä¸‹çš„ $k-1$ æ’ä¸­é€‰æ‹©ä¸€æ’å¯ä»¥å·¦å³äº¤åï¼Œç„¶åå‰©ä½™çš„ $k-2$ å¯¹æƒ…ä¾£è¿›è¡Œé”™ä½åŒ¹é…ï¼Œå³ $2(k-1)ep[k-2]$  
å¦‚æœä»–ä»¬çš„å¯¹è±¡ä¸è¿›è¡ŒåŒ¹é…ï¼Œé‚£ä¹ˆæŠŠä»–ä»¬çš„å¯¹è±¡çœ‹åšä¸€å¯¹æƒ…ä¾£ï¼Œåˆ™å‰©ä¸‹æœ‰ $k-1$ å¯¹æƒ…ä¾£ï¼Œå³ $ep[k-1]$   
è¯¥ç§é€‰æ‹©æ–¹æ³•æœ‰ $2k(k-1)(ep[k-1]+2(k-1)ep[k-2])$  
<b>ç¬¬ä¸€æ’åå¼‚æ€§ï¼š</b>  
é€‰æ‹©æ–¹å¼ä¾ç„¶æ˜¯æœ‰ $k(k-1)$ ç§æ–¹å¼  
æ¨å¯¼è¿‡ç¨‹ä¸å˜ï¼Œåˆ™ä¹Ÿæ˜¯æœ‰ $2k(k-1)(ep[k-1]+2(k-1)ep[k-2])$   
<b>å¾—åˆ°ï¼š$ep[k]=4k(k-1)(ep[k-1]+2(k-1)ep[k-2])$ </b>  
å°†å…¶é¢„å¤„ç†å‡ºæ¥ä¹‹åç›´æ¥ç”¨ä¸Šé¢çš„ $res[k]$ å…¬å¼å³å¯     

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;
const int N = 1e3 + 10;
ll f[N], ivf[N];
ll ep[N];


inline ll ksm (ll a, ll b) { ll res = 1; while (b) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }
inline ll C (int n, int m) { return f[n] * ivf[n - m] % mod * ivf[m] % mod; }
inline ll A (int n, int m) { return f[n] * ivf[n - m] % mod; }
inline void Pre () {
        f[0] = 1;
        for (int i = 1; i < N; i ++) f[i] = f[i - 1] * i % mod;
        ivf[N - 1] = inv(f[N - 1]);
        for (int i = N - 2; i >= 0; i --) ivf[i] = ivf[i + 1] * (1ll * i + 1) % mod;

        ep[0] = 1; ep[1] = 0;
        for (int i = 2; i < N; i ++) ep[i] = 4ll * i % mod * (i - 1) % mod * ((ep[i - 1] + 2ll * (i - 1) % mod * ep[i - 2]) % mod) % mod;
}

inline void Solve () {
        int n; cin >> n;
        for (int i = 0; i <= n; i ++) {
                cout << C(n, i) * C(n, i) % mod * f[i] % mod * ksm(2, i) % mod * ep[n - i] % mod << endl;
        }
}

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        Pre();
        int cass; cin >> cass; while (cass --) {
                Solve ();
        }
}
```
<hr>


### æ´›è°·P4936_Agent1

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P4936"><img src="https://i.loli.net/2021/11/14/Q5Y7Z8RilKTuLyV.png"></a>

#### ğŸ’¡
ABä¸¤é˜Ÿï¼Œæ¯é˜Ÿå¿…å‡ºä¸€ä¸ªäºº  
æˆ‘ä»¬å¯ä»¥æšä¸¾æ¯é˜Ÿè°å¿…å‡ºï¼Œç„¶åä¸ºäº†ä¿è¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;max\{A\}<min\{B\}" title="\inline max\{A\}<min\{B\}" /> æˆ‘ä»¬è®©æ¯é˜Ÿå‡ºçš„ä¸¤ä¸ªäººä¸­é—´çš„æ•°å¿…ä¸å‡ºï¼Œä¸¤ä¾§çš„æ•°é€‰å‡º  
è¿™æ ·çš„è¯å°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;\sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(2^{i-1}\times&space;2^{n-j})" title="\inline \sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(2^{i-1}\times&space;2^{n-j})" />   
è¿™æ˜¯ä¸€ä¸ª  <img src="https://latex.codecogs.com/svg.image?\inline&space;O(n^2)" title="\inline O(n^2)" /> çš„æŸ¿å­ï¼Œæˆ‘ä»¬ä¼˜åŒ–ä¸€ä¸‹  
  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}&\sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(2^{i-1}\times&space;2^{n-j})\\=&\sum\limits_{i=1}^n\sum\limits_{j=0}^{n-i-1}(2^{i-1}\times&space;2^j)\\=&\sum\limits_{i=0}^{n-1}\sum\limits_{j=0}^{n-i-2}(2^i\times&space;2^j)\\=&\sum\limits_{i=0}^{n-1}2^i\sum\limits_{j=0}^{n-i-2}2^j\\=&\sum\limits_{i=0}^{n-1}(2^i\times(2^{n-i-1}-1))\\=&\sum\limits_{i=0}^{n-1}(2^{n-1}-2^i)\\=&n2^{n-1}-(2^n-1)\end{aligned}" title="\inline \begin{aligned}&\sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(2^{i-1}\times&space;2^{n-j})\\=&\sum\limits_{i=1}^n\sum\limits_{j=0}^{n-i-1}(2^{i-1}\times&space;2^j)\\=&\sum\limits_{i=0}^{n-1}\sum\limits_{j=0}^{n-i-2}(2^i\times&space;2^j)\\=&\sum\limits_{i=0}^{n-1}2^i\sum\limits_{j=0}^{n-i-2}2^j\\=&\sum\limits_{i=0}^{n-1}(2^i\times(2^{n-i-1}-1))\\=&\sum\limits_{i=0}^{n-1}(2^{n-1}-2^i)\\=&n2^{n-1}-(2^n-1)\end{aligned}" />   
   
å¥½äº†ï¼Œè¿™ä¹ˆä¸€ä¸ª  <img src="https://latex.codecogs.com/svg.image?\inline&space;O(logn)" title="\inline O(1)" /> çš„æŸ¿å­å°±å‡ºæ¥äº†  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
cout << (n * ksm(2, n - 1) % mod - (ksm(2, n) + mod - 1) % mod + mod) % mod << endl;
```

<hr>

### æ´›è°·P4981_çˆ¶å­

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P4981"><img src="https://img-blog.csdnimg.cn/7aaa69d40d29470988f7850e33407ecc.png"></a>

#### ğŸ’¡
æ•´ä¸ªå¯å®¤çš„å…³ç³»å›¾å¾ˆå®¹æ˜“çœ‹æˆä¸€æ£µæ ‘  
è€Œä¸”æ˜¯ä¸€æ£µnä¸ªäººè½®æµå½“æ ¹çš„æ ‘  
å¯¹äºæ¯ä¸€ä¸ªäººå½“ç¥–å…ˆï¼Œæ ¹æ®pruferç¼–ç æ€§è´¨æœ‰<img src="https://latex.codecogs.com/svg.image?n^{n-2}" title="n^{n-2}" />ç§æ ‘  
è€Œnä¸ªäººå½“ç¥–å…ˆå°±æ˜¯  
<img src="https://latex.codecogs.com/svg.image?n^{n-2}\times&space;n=n^{n-1}" title="n^{n-2}\times n=n^{n-1}" />

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 1e9 + 9;
inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}

int main () {
        int cass;
        for ( cin >> cass; cass; cass -- ) {
                int n; cin >> n;
                cout << ksm ( n, n - 1 ) << endl;
        }
        return 0;
}
```

<hr>

### æ´›è°·P5377_é¸½é¸½çš„åˆ†å‰²

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P5377">![20220316215315](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220316215315.png)</a>

#### ğŸ’¡
ç‚¹å’Œé¢é€šè¿‡å»ºæ¨¡ä¸ºç«‹ä½“å‡ ä½•æƒ³æ¬§æ‹‰å…¬å¼ï¼š  
$$F=E-V+2$$  
å…¶ä¸­ $F$ ä¸ºåˆ†å‰²å—æ•°ï¼Œ $E$ ä¸ºè¾¹æ•°ï¼Œ $V$ ä¸ºç‚¹æ•°  
$V=$ åŸæœ¬ç‚¹æ•° $+$ ä»»å–å››ä¸ªç‚¹è¿çº¿ç›¸äº¤ $=n+\binom{n}{2}$  
$E=$ å¼§ $+$ åŸæœ¬ç‚¹ä¹‹é—´ç›¸è¿ $+$ è¿çº¿äº¤ç‚¹åˆ†å‰²å‡ºä¸¤æ¡è¾¹ $=n+\binom{n}{2}+2\times\binom{n}{4}$  
æ³¨æ„åœ¨ç«‹ä½“å‡ ä½•ä¸Šå¤šäº†ä¸€ä¸ªé¢ä¸ºåœ†å¤–çš„é¢ï¼Œè¦å‡å»ä¸€  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
int main() {
    int n;

    while (scanf("%d", &n) != EOF) {
        int Cn4 = n * (n - 1) * (n - 2) * (n - 3) / 24;
        int Cn2 = n * (n - 1) / 2;
        int E = n + Cn2 + 2 * Cn4;
        int V = n + Cn4;
        printf("%d\n", E - V + 2 - 1);
    }
}
```
<hr>

### æ´›è°·P6162_å››è§’é“¾

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P6162">![20220428165151](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220428165151.png)</a>

#### ğŸ’¡  
æ¯ä¸€ä¸ªæ•° $x$ å¯ä»¥å¡«çš„æ•°å­—ä¸€å®šæ˜¯ $x$ å‡å»å‰é¢é€‰ä¸­çš„æ•°çš„ä¸ªæ•°  
  
æˆ‘ä»¬å…ˆæ¥å°è¯•ä¸€ä¸ª $O(n^2)$ çš„ç®—æ³•  
ä»¤ $dp[n][m]$ è¡¨ç¤ºå‰ $n$ ä¸ªä½ç½®é€‰äº† $m$ ä¸ªå¡«æ•°  
é‚£ä¹ˆå¯¹äº $n$ å¯ä»¥å¡«æ•°ï¼Œ$dp[n][m]+\quad (n-m+1)\times dp[n-1][m-1]$   
ä¹Ÿå¯ä»¥ä¸å¡«æ•°ï¼Œ$dp[n][m]+\quad dp[n-1][m]$  
ä¹Ÿå°±æ˜¯è¯´ $dp[n][m]=dp[n-1][m]+(n-m+1)\times dp[n-1][m-1]$  
å¯ä»¥æ„Ÿè§‰åˆ°è¿™ä¸ªä¸œè¥¿å°±æ˜¯ä¸€ä¸ªé¡¹å¸¦äº†ç³»æ•°çš„ç»„åˆæ•°é€’æ¨ï¼Œå¾ˆåƒç¬¬äºŒç±»æ–¯ç‰¹æ—æ•° $\begin{Bmatrix}n\\m\end{Bmatrix}=\begin{Bmatrix}n-1\\m-1\end{Bmatrix}+m\begin{Bmatrix}n-1\\m\end{Bmatrix}$   
åªä¸è¿‡ç³»æ•°å¸¦é”™äº†ä½ç½®ä¸”ä¸æ˜¯ç»“å°¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®© $n$ ä¸Šå‡ $1$ ï¼ŒåŒæ—¶ç³»æ•°è¦å˜æˆ $m$ ï¼Œé‚£ä¹ˆå°±è®© $m$ å˜æˆ $(n+1)-m$  ï¼Œä¹Ÿå°±æ˜¯è¯´ $dp[n][m]=\begin{Bmatrix}n+1\\n+1-m\end{Bmatrix}$  
å‘ç°è¿™æ ·è½¬ç§»è¿‡æ¥å°±æ˜¯ $\begin{Bmatrix}n+1\\n+1-m\end{Bmatrix}=\begin{Bmatrix}n\\n-m\end{Bmatrix}+(n-m+1)\times \begin{Bmatrix}n\\n+1-m\end{Bmatrix}$   
å’Œç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°çš„å…¬å¼ä¸€æ ·äº†  
é‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯ $O(n)$ åœ°æ±‚ä¸€ä¸‹ $\begin{Bmatrix}n+1\\n+1-m\end{Bmatrix}$ å³å¯  
  
$\begin{Bmatrix}n\\m\end{Bmatrix}=\sum\limits_{i=0}^m\frac{(-1)^{m-i}i^n}{i!(m-i)!}$


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;
const int N = 1e6 + 10;

inline ll ksm (ll a, ll b) { ll res = 1; while (b) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }

ll f[N], ivf[N];
inline void Pre () {
        f[0] = 1;
        for (int i = 1; i < N; i ++) f[i] = f[i - 1] * i % mod;
        ivf[N - 1] = inv(f[N - 1]);
        for (int i = N - 2; i >= 0; i --) ivf[i] = ivf[i + 1] * (i + 1) % mod;
}
inline ll S (int n, int m) {
        ll res = 0;
        for (int i = 0; i <= m; i ++) {
                (res += ((m - i) & 1 ? -1ll : 1ll) * ksm(i, n) % mod * ivf[i] % mod * ivf[m - i] % mod) %= mod;
                res = (res + mod) % mod;
        }
        return res;
}

int main () {      
        cin.tie(nullptr);
        Pre();
        int n, k; cin >> n >> k; n --;
        cout << S(n + 1, n + 1 - k);
}
```
<hr>

## ç‰›å®¢2022å›½åº†é›†è®­æ´¾å¯¹day3G_Subsequence1

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/41757/G">![20221003205321](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20221003205321.png)</a>

#### ğŸ’¡
å¦‚æœåœ¨ $s$ ä¸­è¦è·å¾—å’Œ $t$ åŒé•¿åº¦çš„ä¸²ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªåŒé•¿å­åºåˆ—çš„å­—å…¸åºååºè®¡æ•°é—®é¢˜äº†  
ä»¤ $s_s$ è¡¨ç¤º $s$ çš„å­åºåˆ—ï¼Œæˆ‘ä»¬è¦çœ‹åœ¨å“ªä¸€ä½è®© $s_s>t$ ï¼Œè¿™ä¹‹åçš„æ˜¯å¯ä»¥éšä¾¿é€‰çš„  
å¦‚æœ $s_i>t_j$ ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¡ä¸€ä¸ª $s$ åœ¨ $i$ å‰é¢èƒ½æ‰¾åˆ°å¤šå°‘ä¸ªä¸ $t[1,j-1]$ å¯ä»¥åŒ¹é…ä¸Šçš„å­åºåˆ—  
è¿™ä¸ªç”¨ä¸€ä¸ª $dp$ æ¥å®ç°ï¼Œ$dp[i][j]$ è¡¨ç¤º $s$ åœ¨å‰ $i$ ä½èƒ½åŒ¹é…ä¸Š $t[1,j]$ çš„å­åºåˆ—æ•°é‡  
$dp[i][]$ ç”¨ $dp[i-1][]$ æ¥è½¬ç§»ï¼Œæšä¸¾ $i-1$ åŒ¹é…äº†å¤šå°‘ä¸ªï¼Œé‚£ä¹ˆå¦‚æœ $s_i=t_j$ ï¼Œ$dp[i][j+1]$ åŠ ä¸Š $dp[i-1][j]$ ï¼Œç„¶åæ­£å¸¸ç»§æ‰¿å…³ç³»ä¸º $dp[i][j]+dp[i-1][j]$  
å¤„ç†å¥½è¿™ä¸ª $dp$ åï¼Œçœ‹å“ªä¸€ä½ $s_i>t_j$ ï¼Œæ‰¾åˆ°åç­”æ¡ˆç´¯åŠ  $\binom{n-i}{m-j}\times dp[i-1][j-1]$ å³å¯ï¼Œå³è¡¨ç¤ºå‰é¢éƒ½åŒ¹é…ä¸Šï¼Œåé¢éšä¾¿é€‰  

å½“ç„¶æœ€åä¹Ÿè¦åŠ ä¸Šé•¿åº¦è¶…è¿‡ $m$ çš„å­åºåˆ—æ•°é‡ï¼Œä¸º $\sum\limits_{i=m+1}n\binom{n-j}{i-1}$   
ç”±äºä¸èƒ½æœ‰å‰å¯¼ $0$ ï¼Œå°±å¯¹äºé•¿åº¦ $i$ æ—¶ï¼Œæšä¸¾ä¸€ä¸‹ $s_j$ æ˜¯å¦ä¸º $0$ ï¼Œå¦‚æœä¸º $0$ ï¼Œè¯´æ˜ä»¥å®ƒå¼€å¤´çš„éƒ½ä¸å¯ä»¥é€‰ï¼Œå‡å» $\binom{n-j}{i-1}$  


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 3010;
const int mod = 998244353;
int f[N], ivf[N];
inline int C (int n, int m) {
    if (m > n) return 0;
    return (ll)f[n] * ivf[m] % mod * ivf[n - m] % mod;
}
inline int ksm (int a, int b) {
    int res = 1;
    while (b) {
        if (b & 1) res = 1ll * res * a % mod;
        a = 1ll * a * a % mod;
        b >>= 1;
    }
    return res;
}
inline int inv (int x) { return ksm(x, mod - 2); }

int n, m;
string s, t;
int dp[N][N];

inline void Solve () {
    int res = 0;
    cin >> n >> m >> s >> t;
    s = "0" + s;
    t = "0" + t;

    dp[0][0] = 1;
    
    for (int i = 1; i <= n; i ++) {
        for (int j = 0; j <= m; j ++) {
            if (j + 1 <= m && s[i] == t[j + 1]) {
                (dp[i][j + 1] += dp[i - 1][j]) %= mod;
            }
            (dp[i][j] += dp[i - 1][j]) %= mod;
        }
        for (int j = 1; j <= m; j ++) {
            if (s[i] > t[j]) {
                res += (ll)C(n - i, m - j) * dp[i - 1][j - 1] % mod;
                res %= mod;
            }
        }  
    }

    for (int i = 0; i <= n; i ++) for (int j = 0; j <= m; j ++) dp[i][j] = 0;

    for (int i = m + 1; i <= n; i ++) {
        (res += C(n, i)) %= mod;
        for (int j = 1; j <= n; j ++) {
            if (s[j] == '0') {
                res = ((res - C(n - j, i - 1)) % mod + mod) % mod;
            }
        }
    }
    cout << res << endl;
}

int main () {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    f[0] = 1;
    for (int i = 1; i < N; i ++) f[i] = (ll)f[i - 1] * i % mod;
    ivf[N - 1] = inv(f[N - 1]);
    for (int i = N - 2; i >= 0; i --) ivf[i] = (ll)ivf[i + 1] * (i + 1) % mod;

    int cass; cin >> cass; while ( cass -- ) {
        Solve ();
    }
}
```
<hr>

### ç‰›å®¢2022å¯’å‡ç®—æ³•åŸºç¡€é›†è®­è¥4G_å­åºåˆ—æƒå€¼ä¹˜ç§¯

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/23479/G"><img src="https://img-blog.csdnimg.cn/636cc7a3d9dd4b898721425de121988e.png"></a>

#### ğŸ’¡
è€ƒè™‘æ¯ä¸ªæ•°ä½œä¸º $min$ å’Œ $max$ å‡ºç°çš„æ¬¡æ•°  
åˆ†æˆè¿™ä¹ˆä¸¤ç±»  
- è‡ªå·±è¿™ä¸ªæ•°åœ¨æ•´ä¸ªåºåˆ—ä¸­åªå‡ºç°ä¸€æ¬¡
- è‡ªå·±è¿™ä¸ªæ•°åœ¨æ•´ä¸ªåºåˆ—ä¸­å‡ºç°ä»»æ„æ¬¡
  
å¯¹äºç¬¬ä¸€ç±»ï¼š  
æˆ‘ä»¬æ‰¾å‡ºæ¯”è‡ªå·±å¤§çš„æ•°çš„ä¸ªæ•°è®¾ç½®ä¸º `gre`ï¼Œæ¯”è‡ªå·±å°çš„è®¾ç½®ä¸º `les`  
ç”±äºå¯ä»¥é€‰æˆ–è€…ä¸é€‰ï¼Œæ‰€ä»¥ $x$ ä¸ªæ•°å°±æœ‰ $2^x$ ç§æ–¹æ¡ˆ  
é‚£ä¹ˆè¿™ç±»æƒ…å†µåšå‡ºçš„è´¡çŒ®ä¸º $a^{2^{les}}\times a^{2^{gre}}$   
  
å¯¹äºç¬¬äºŒç±»ï¼š  
é¦–å…ˆæˆ‘ä»¬è‡ªå·±æœ‰ $b$ ä¸ªï¼Œç„¶åä¾æ—§æ˜¯æ¯”è‡ªå·±å¤§çš„æ•°çš„ä¸ªæ•°è®¾ç½®ä¸º `gre`ï¼Œæ¯”è‡ªå·±å°çš„è®¾ç½®ä¸º `les`  
è‡ªå·±è‡³å°‘è¦é€‰ä¸¤ä¸ªï¼Œåˆ«çš„é€‰æˆ–è€…ä¸é€‰  
é‚£ä¹ˆè´¡çŒ®ä¸º $a^{(2^b-1-b)\times 2^{les}}\times a^{(2^b-1-b)\times 2^{gre}}$   
  
::: danger
æœ‰ä¸€ä¸ªç»†èŠ‚æ˜¯å–æ¨¡çš„æ—¶å€™æŒ‡æ•°ä¸åº”æ˜¯å– $10^9+7$   
è€Œæ˜¯æ ¹æ®æ¬§æ‹‰é™å¹‚å– $\phi(10^9+7)=10^9+6$ 
:::
  
[æœ¬é¢˜çº¿æ®µæ ‘è§£æ³•è¯·çœ‹è¿™é‡Œ](https://tech.chivas-regal.top/blogs/solution/datastructure/segmenttree.html#%E7%89%9B%E5%AE%A22022%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A54g-%E5%AD%90%E5%BA%8F%E5%88%97%E6%9D%83%E5%80%BC%E4%B9%98%E7%A7%AF)

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
ll a[200005];
const ll mod = 1e9 + 7;
const ll powmod = 1e9 + 6;
inline ll ksm ( ll a, ll b, ll mod = 1e9 + 7 ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
map<ll, ll> num;

int main () {
        ios::sync_with_stdio(false);
        ll n; cin >> n;
        for ( ll i = 0; i < n; i ++ ) {
                cin >> a[i];
                num[a[i]] ++;
        }
        sort ( a, a + n ); a[n] = 0x3f3f3f3f;
        ll res = 1;
        for ( ll i = 0; i < n; i ++ ) {
                ll les = lower_bound(a, a + n + 1, a[i]) - a;
                ll gre = n - (upper_bound(a, a + n + 1, a[i]) - a);
                res = res * ksm(a[i], ksm(2, les, powmod)) % mod; 
                res = res * ksm(a[i], ksm(2, gre, powmod)) % mod;
        }
        for ( auto i : num ) {
                res = res * ksm(
                                i.first % mod, 
                                (((ksm(2, i.second, powmod) - 1 - i.second) % powmod + powmod) % powmod) * ksm(2, lower_bound(a, a + n + 1, i.first) - a, powmod)
                        ) % mod;
                res = res * ksm(
                                i.first % mod,
                                (((ksm(2, i.second, powmod) - 1 - i.second) % powmod + powmod) % powmod) * ksm(2, n - (upper_bound(a, a + n + 1, i.first) - a), powmod)
                        ) % mod;       
        }
        cout << res << endl;
}
```
<hr>

### ç‰›å®¢ç»ƒä¹ èµ›80B_å·ç§¯

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/problem/218216"><img src="https://img-blog.csdnimg.cn/20210409231427628.png"></a>

#### ğŸ’¡
æ—¢ç„¶è¦mexï¼Œé‚£ä¹ˆï¼š  
åœ¨i=0æ—¶ï¼Œa[1 ~ (n-1)]*b[1 ~ (n-1)]éƒ½å¯è¡Œ  
åœ¨i=1æ—¶ï¼Œa[0]*b[0 ~ (n-1)]ä¸b[0]*a[0 ~ (n-1)]éƒ½å¯è¡Œ  
åœ¨i=2æ—¶ï¼Œåªæœ‰a[1]*b[0]å’Œa[0]*b[1]å¯è¡Œ  
ä»i=3å¼€å§‹ï¼Œä»»ä½•æ•°éƒ½ä¸æ»¡è¶³ï¼Œæ‰€ä»¥éƒ½æ˜¯0  
è€Œå¯¹äºåŒºé—´å’Œæ—¶æˆ‘ä»¬åªéœ€è®°å½•å‰ç¼€å’Œå°±è¡Œäº†ï¼Œç›¸å‡æ—¶è¦åŠ ä¸Šä¸€ä¸ªmodé˜²æ­¢ç»“æœä¸ºè´Ÿ  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int maxn = 1e5 + 100;
const ll mod = 998244353;
ll a[maxn];
ll b[maxn];
ll sum_a[maxn] = {0};//açš„å‰ç¼€å’Œ
ll sum_b[maxn] = {0};//bçš„å‰ç¼€å’Œ
ll n;
int main()
{
    scanf("%lld", &n);
    for (int i = 1; i <= n; i++)
        scanf("%lld", &a[i]), sum_a[i] = (sum_a[i - 1] + a[i]) % mod;
    for (int i = 1; i <= n; i++)
        scanf("%lld", &b[i]), sum_b[i] = (sum_b[i - 1] + b[i]) % mod;
    for (int i = 1; i <= n; i++)//è¿™é‡Œè®¡æ•°éƒ½+1ï¼Œæ–¹ä¾¿ç»Ÿè®¡sum_a[0]ä¸sum_b[0]
    {
        if (i == 1)
            printf("%lld", (sum_a[n] + mod - sum_a[1]) * (sum_b[n] + mod - sum_b[1]) % mod);
        else if (i == 2)
            printf("%lld",  (a[1] * (sum_b[n] + mod - sum_b[0]+mod-b[2]) % mod + b[1] * (sum_a[n] + mod - sum_a[0]+mod-a[2]) % mod +mod- /*å»é‡*/a[1] * b[1] % mod)%mod);
        else if (i == 3)
            printf("%lld", (a[1] * b[2] % mod + a[2] * b[1] % mod) % mod);
        else
            printf("%lld", 0ll);
        if (i != n)
            printf(" ");
    }
    return 0;
}
```

<hr>

### ç‰›å®¢ç»ƒä¹ èµ›98D_SonString

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/11188/D">![20220501213543](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220501213543.png)</a>

#### ğŸ’¡
ç”±äºæ˜¯è¿ç»­æ•°åˆ—çš„ç“œåˆ†ï¼Œè€ƒè™‘ä¸€ä¸‹éš”æ¿æ³•  
é‚£ä¹ˆéœ€è¦è€ƒè™‘çš„å°±æ˜¯ä¸¤ä¸ªç›¸é‚»å¥‡æ•°çš„å¶æ•°ä¹‹é—´è¦å­˜åœ¨å¤šå°‘ä¸ªéš”æ¿ï¼ŒåŒæ—¶ç›¸å¯¹åº”çš„æ˜¯å®ƒå¯¹ç§°çš„ä¸¤ä¸ªå¥‡æ•°ä¹‹é—´çš„å¶æ•°çš„éš”æ¿æ•°è¦ä¸€æ ·  
æˆ‘ä»¬å­˜ä¸€ä¸‹å¥‡æ•°çš„ä½ç½®  
é€šè¿‡ä¸¤ä¸ªå¥‡æ•°çš„ä½ç½®å¯ä»¥å¿«é€Ÿå¾—åˆ°è¿™ä¸¤ä¸ªå¥‡æ•°ä¹‹é—´æœ‰å¤šå°‘ä¸ªå¶æ•°ï¼Œä¸å…¶å¯¹ç§°çš„å¥‡æ•°ä¿¡æ¯  
ç”±äºå­˜åœ¨ä¹˜æ³•åŸç†çš„è½¬ç§»å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»¤ $dp[i]$ è¡¨ç¤ºè½¬ç§»åˆ°ç¬¬ $i$ ä¸ªå¥‡æ•°æœ‰å¤šå°‘ç§æ–¹æ¡ˆæ•°  
ç¬¬ $i-1$ åˆ°ç¬¬ $i$ ä¸ªå¥‡æ•°ä¹‹é—´è®¾å­˜åœ¨ $f1$ ä¸ªå¶æ•°ï¼Œå¯¹ç§°æœ‰ $f2$ ä¸ªå¶æ•°  
é‚£ä¹ˆé™¤äº†ç¬¬ä¸€ä½æœ‰ $f1$ ç§æ’æ³•ä¹‹å¤–ï¼Œåˆ«çš„éƒ½æœ‰ $f1+1$ ç§æ’æ³•  
æ‰€ä»¥  
$dp[0]=\sum\limits_{j=0}^{min(f1,f2)}\binom{f1}{j}\binom{f2}{j}$   
$dp[i]=dp[i-1]\times\sum\limits_{j=0}^{min(f1,f2)+1}\binom{f1+1}{j}\binom{f2+1}{j}$  

æ³¨æ„å¦‚æœæœ‰å¶æ•°ä¸ªå¥‡æ•°çš„æƒ…å†µäº†è¯ï¼Œæˆ‘ä»¬ä¸­é—´ä¸¤ä¸ªå¥‡æ•°ä¹‹é—´çš„å¶æ•°ï¼ˆè®¾æœ‰ $num$ ä¸ªï¼‰æ˜¯æ²¡æœ‰ç®—è¿‡çš„ï¼Œè€Œè¿™äº›å¶æ•°å¯ä»¥éšä¾¿æ’æ¿ï¼Œä¹Ÿå°±æ˜¯ $dp[mid]\times2^{num}$  
è€Œä¸”å¥‡æ•°ä¸ªæ•°æ˜¯ $0$ ä¸ªä¹Ÿè¦ç‰¹æ®Šå¤„ç†ä¸€ä¸‹ï¼ŒåŒç† $2^{n-1}$  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;


inline ll ksm (ll a, ll b) { ll res = 1; while (b > 0) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }

int f[510], ivf[510];
inline ll C (int n, int m) {
        if (n < m) return 0;
        return 1ll * f[n] * ivf[n - m] % mod * ivf[m] % mod;
}

ll dp[510];
int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        string s; cin >> s;
        int n = s.size();

        f[0] = 1;
        for (int i = 1; i <= n; i ++) 
                f[i] = 1ll * f[i - 1] * i % mod;
        ivf[n] = inv(f[n]);
        for (int i = n - 1; i >= 0; i --) 
                ivf[i] = 1ll * ivf[i + 1] * (i + 1) % mod;
        
        vector<int> id1;
        for (int i = 1; i <= n; i ++) 
                if ((s[i - 1] - '0') % 2 == 1) 
                        id1.push_back(i);

        if (id1.size() == 0) {
                cout << ksm(2, n - 1) << endl;
                return 0;
        } 

        for (int i = 0; i < id1.size() / 2 + (id1.size() % 2); i ++) { // æšä¸¾ä¸€åŠ
                if (i == 0) {
                        int f1 = id1[i] - 1;
                        int f2 = n - id1.back();
                        for (int j = 0; j <= min(f1, f2); j ++) {
                                dp[i] += C(f1, j) * C(f2, j) % mod;
                                dp[i] %= mod;
                        }
                } else {        
                        int f1 = id1[i] - id1[i - 1] - 1;
                        int f2 = id1[id1.size() - i] - id1[id1.size() - i - 1] - 1;
                        for (int j = 0; j <= min(f1, f2) + 1; j ++) {
                                dp[i] += dp[i - 1] * C(f1 + 1, j) % mod * C(f2 + 1, j) % mod;   
                                dp[i] %= mod;
                        }
                }
        } 

        if (id1.size() % 2 == 0) {
                int num = id1[id1.size() / 2] - id1[id1.size() / 2 - 1];
                cout << dp[id1.size() / 2 - 1] * ksm(2, num) % mod;
        } else {
                cout << dp[id1.size() / 2] << endl;
        }
}
```
<hr>

### ç‰›å®¢ç»ƒä¹ èµ›99D_ç¤¼ç‰©

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/34330/D">![20220528004722](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220528004722.png)</a>

#### ğŸ’¡
å¦‚æœç»™å®šæ ¹æ˜¯è°ï¼Œé‚£ä¹ˆä¼šå¾ˆå¥½ç®—ï¼Œä¸€ä¸ªç‚¹è¢«å½“åš $LCA$ çš„æ¬¡æ•°ä¸º
- æ¯ä¸ªå­æ ‘æ‰€æœ‰ç‚¹ä¸å…¶ä»–å­æ ‘çš„æ‰€æœ‰ç‚¹äº’ç›¸é…å¯¹çš„æ–¹æ¡ˆæ•°ï¼š$\sum\limits_{v\in son_u}sz_v\times(sz[u]-1-sz[v])$
- æ¯ä¸ªå­æ ‘æ‰€æœ‰ç‚¹ä¸ $u$ äº’ç›¸é…å¯¹ï¼š$\sum\limits_{v\in son_u}sz[v]$  
  
ä½†é—®é¢˜æ˜¯ç°åœ¨æ²¡æœ‰ç»™æ ¹  
ä¸è¿‡æˆ‘ä»¬å¦‚æœå›ºå®šå‡ºæ¥äº†ä¸€ä¸ªæ ¹äº†ï¼Œå°†æ ¹ä» $u$ æ¨åˆ°å…¶ä¸­ä¸€ä¸ªå­èŠ‚ç‚¹ $v$ åç­”æ¡ˆçš„å˜åŒ–æ˜¯å¯ä»¥å¿«é€Ÿæ±‚å¾—çš„  
å³å°† $LCA$ ä¸º $u$ çš„æ¢ä¸º $LCA$ ä¸º $v$ çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±æ˜¯ $v$ çš„å­æ ‘æ‰€æœ‰ç‚¹ä¸é $v$ çš„å­æ ‘çš„æ‰€æœ‰ç‚¹ï¼Œ $sz[v]\times (n-sz[v])$ ï¼Œå°†ä»–ä»¬ä¹˜çš„æƒå€¼æ”¹ä¸º $v$ å³å¯  
è¿™ä¸ªå¯ä»¥é€šè¿‡æ¯æ¬¡ä¼ å…¥ä¸€ä¸ªä»¥çˆ¶èŠ‚ç‚¹ä¸ºæ ¹æ—¶çš„å‚æ•°ï¼Œå°†æ ¹ä»çˆ¶èŠ‚ç‚¹æ¢ä¸ºæœ¬æ¬¡éå†èŠ‚ç‚¹ï¼Œå¹¶ç»´æŠ¤æœ€å¤§å€¼   

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e6 + 10;
const int M = N * 2;
struct Edge {
        int nxt, to;
} edge[M];
int head[N], cnt;
inline void add_Edge (int from, int to) {
        edge[++cnt] = {head[from], to};
        head[from] = cnt;
}
int n;
int sz[N];
ll resv, resid;

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        cin >> n;
        for (int i = 0; i < n - 1; i ++) {
                int u, v; cin >> u >> v;
                add_Edge(u, v);
                add_Edge(v, u);
        }

        function<ll(int, int)> dfs = [&](int u, int fa) ->ll {
                ll cur = 0;
                sz[u] = 1;
                for (int i = head[u]; i; i = edge[i].nxt) {
                        int v = edge[i].to;
                        if (v == fa) continue;
                        cur += dfs(v, u);
                        sz[u] += sz[v];
                }
                int sum = 0;
                for (int i = head[u]; i; i = edge[i].nxt) {
                        int v = edge[i].to;
                        if (v == fa) continue;
                        cur += 1ll * sz[v] * (sum + 1) * u;
                        sum += sz[v];
                }
                return cur;
        };

        function<void(int, int, ll)> find_Root = [&](int u, int fa, ll cur) ->void {
                if (fa != -1) { // æ¢æ ¹
                        cur -= 1ll * sz[u] * (n - sz[u]) * fa;
                        cur += 1ll * sz[u] * (n - sz[u]) * u;
                        if (cur > resv) resid = u, resv = cur;
                } else resid = u, resv = cur;

                for (int i = head[u]; i; i = edge[i].nxt) {
                        int v = edge[i].to;
                        if (v == fa) continue;
                        find_Root(v, u, cur);
                }
        };

        find_Root(1, -1, dfs(1, -1));
        cout << resid << " " << resv * 2 + 1ll * n * (n + 1) / 2 << endl;
}
```
<hr>


### ç‰›å®¢æŒ‘æˆ˜èµ›58B_æ¸…æ–°é¢˜

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/11198/B">![20220403220303](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220403220303.png)</a>

#### ğŸ’¡
é¦–å…ˆè€ƒè™‘å·¦ $>$ å³çš„æ–¹æ¡ˆæ•°  
åŒä½æ•°äºŒè¿›åˆ¶å¤§å°å¯ä»¥çœ‹ä½œå­—å…¸åºï¼Œå³å¦‚æœå› ä¸ºç¬¬ $i$ ä½å¯¼è‡´å·¦å¤§äºå³ï¼Œåˆ™ï¼š<b>å‰ç›¸åŒï¼Œè¯¥ä½å¤§ï¼Œåéšæ„</b>   

é¦–å…ˆé¢„å¤„ç†å‡º $n$ ä¸ªæ•°é€‰å¶æ•°ä¸ªä¸º $chosev$ ï¼Œå¥‡æ•°ä¸ªä¸º $chosod$       

å‰ç›¸åŒï¼š  
å·¦ $1$ å³ $1$ ï¼šå·¦ $n$ ä¸ªæ•°è‡³å°‘æœ‰ä¸€ä¸ªè¦é€‰ $1$ å³ $2^n-1$ ï¼Œå³ä¾§ $n$ ä¸ªæ•°é€‰å¥‡æ•°ä¸ªå³ $chosod$   
å·¦ $0$ å³ä¾§ $0$ ï¼Œå·¦ä¾§ä¸é€‰ä¸º $1$ ï¼Œå³ä¾§é€‰å¶æ•°ä¸ªå³ $chosev$   
æ¯ä¸€ä½å‡æ˜¯å¦‚æ­¤ï¼Œæ‰€ä»¥ä»¤æ–¹æ¡ˆæ•° $^{i-1}$    
  
è¯¥ä½å¤§ï¼š  
å·¦ä¸º $1$ ï¼Œå³ $2^n-1$ å³ä¸º $0$ ï¼Œå³ $chosev$   

åéšæ„ï¼š  
å³æ¯ä¸€ä½æ˜¯ $2^n$ å…±æœ‰ $m-i$ ä½ä¸º $(2^{2\times n})^{m-i}$   
  
æœ€åè¦åŠ ä¸Šæ‰€æœ‰æ•°å‡ç›¸ç­‰çš„æƒ…å†µï¼Œå³å‰ç›¸åŒä¸­æ¯ä¸€ä½æ–¹æ¡ˆæ•° $^m$ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 1e9 + 7;
inline ll ksm ( ll a, ll b ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv ( ll x ) { return ksm(x, mod - 2); }
 
ll f[1000006];
inline void pre_F () {
        f[0] = 1;
        for ( int i = 1; i < 1000006; i ++ ) f[i] = f[i - 1] * i % mod;
}
inline ll C ( ll n, ll m ) {
        return f[n] * inv(f[m]) % mod * inv(f[n - m]) % mod;
}
 
int main () { pre_F();
        ll n, m; cin >> n >> m;
 
        ll chosod = 0, chosev = 0;
        for ( int i = 0; i <= n; i ++ ) {
                if ( i & 1 ) (chosod += C(n, i)) %= mod;
                else (chosev += C(n, i)) %= mod;
        }
 
        ll ksm2nsub1 = ((ksm(2, n) - 1) % mod + mod) % mod;
 
        ll res = ksm((ksm2nsub1 * chosod % mod + chosev) % mod, m);
        for ( int i = 1; i <= m; i ++ ) {       
                res += ksm((ksm2nsub1 * chosod % mod + chosev) % mod, i - 1) 
                       * ksm2nsub1 % mod * chosev % mod
                       * ksm(ksm(2, 2 * n), m - i) % mod;
                res %= mod;
        }
        cout << res << endl;
}
```
<hr>

### ç‰›å®¢å°ç™½æœˆèµ›50D_ç”Ÿæ—¥

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/11227/D">![20220528234719](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220528234719.png)</a>

#### ğŸ’¡
é¦–å…ˆè¦æ³¨æ„åˆ°çš„æ˜¯ï¼Œé€‰ç¬¬ $i$ å¤©è¿‡ç”Ÿæ—¥çš„äººåªå¯èƒ½æœ‰ $i,2i,2i+1$ è¿™ä¸‰ä¸ª  
é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸€å¤©ç»´æŠ¤ä¸€ä¸ªæƒå€¼é›†  
ç¬¬ $i$ å¤©çš„æƒå€¼å³ä¸ºå®ƒçš„æƒå€¼é›†çš„å¼‚æˆ–å’Œä¹˜ä¸Š $2$ çš„â€œåˆ«çš„ä¸ç¡®å®šçš„äººæ•°â€æ¬¡æ–¹
å¦‚æœè¯´é‡Œé¢æœ‰ä¸¤ä¸ªäººä¼šé€‰å®ƒï¼Œé‚£ä¹ˆå°±æ˜¯ $(a_i\oplus a_{2i})\times2^{n-2}$  
å¦‚æœæœ‰ä¸‰ä¸ªäººä¼šé€‰å®ƒï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†å¼€è®¡ç®—ä¸€ä¸‹æœ‰ä¸¤ä¸ªäººé€‰å’Œæœ‰ä¸‰ä¸ªäººé€‰çš„æƒ…å†µäº†  
å³ $((a_i\oplus a_{2i})+(a_i\oplus a_{2i+1})+(a_{2i}\oplus a_{2i+1}))\times 2^{n-2}$  
ä¸ $(a_i\oplus a_{2i}\oplus a_{2i+1})\times 2^{n-3}$     

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 1e9 + 7;
inline ll ksm (ll a, ll b) {
        ll res = 1;
        while (b) {
                if (b & 1) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}
vector<ll> g[100005];

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        int n; cin >> n;
        vector<int> a(n + 1); for (int i = 1; i <= n; i ++) cin >> a[i];

        for (int i = 1; i <= n; i ++) {
                g[i / 2].push_back(a[i]);
                g[i].push_back(a[i]);
        }

        ll res = 0;
        for (int i = 0; i <= n; i ++) {
                if (g[i].size() <= 1) continue;
                ll cur = 0;
                if (g[i].size() == 2) {
                        cur = (g[i][0] ^ g[i][1]) % mod * ksm(2, n - 2) % mod;
                } else {
                        cur += ((g[i][0] ^ g[i][1]) + (g[i][1] ^ g[i][2]) + (g[i][0] ^ g[i][2])) % mod * ksm(2, n - 3) % mod;
                        cur += (g[i][0] ^ g[i][1] ^ g[i][2]) % mod * ksm(2, n - 3) % mod;
                        cur %= mod;
                }
                res += cur;
                res %= mod;
        }
        cout << res << endl;

}
```
<hr>


### ABC202D_aabababaa

#### ğŸ”—
<a href="https://atcoder.jp/contests/abc202/tasks/abc202_d?lang=en"><img src="https://img-blog.csdnimg.cn/20210526235513656.png"></a>

#### ğŸ’¡
æ‹¿åˆ°è¿™é“é¢˜  
åˆšå¼€å§‹æˆ‘å…¶å®æ˜¯æƒ³è½¬åŒ–ä¸ºäºŒè¿›åˆ¶çœ‹å˜åŒ–çš„  
å› ä¸ºå¦‚æœæŠŠ'a'è§†ä½œ1ï¼Œ'b'è§†ä½œ0ï¼Œæ¯æ¬¡å‘åæ¨ä¸€ä¸ªå­—å…¸åºå…¶å®å°±æ˜¯å‡å»ä¸€ä¸ªæ•°  
ä½†æ˜¯æœ‰å¾ˆå¤šå¤„ç†åœ°æ–¹ä¸çŸ¥é“æ€ä¹ˆåŠ  
æ”¾å¼ƒäº†ï¼Œè™½ç„¶ä¸å¯¹ï¼Œä½†ä¸å¾—ä¸è¯´ç¡®å®æ˜¯ä¸€ç§å¥½çš„æ€ç»´æ‹“å±•æ–¹å‘  
  
æ­£è§£æ¥äº†ï¼š  
æ“ä½œæ•°è¿‡å¤§çš„æ—¶å€™æˆ‘ä»¬è€ƒè™‘è·³æ­¥  
åˆ†æå­—å…¸åºæ€§è´¨  
å‘ç°æ¯ä¸ªä½ç½®éƒ½æœ‰ä¸¤ç§å­˜æ”¾æ–¹å¼ï¼š  
è¦ä¹ˆå­˜aè¦ä¹ˆå­˜b  
è¿™å–å†³äºkçš„å‰©ä½™å€¼  
  
  
è¿™ä¸ªä½ç½®æ”¾aæ˜¯å¯¹kæ²¡æœ‰å½±å“çš„  
å› ä¸ºkæ˜¯å¯»æ‰¾ç¬¬å‡ ä¸ªå­—å…¸åºæœ€å°çš„  
  
è€Œæ”¾bçš„è¯æˆ‘ä»¬è¦çŸ¥é“æˆ‘ä»¬è·³äº†å‡ æ­¥ä¹Ÿå°±æ˜¯å‡äº†å¤šå°‘ä¸ªk  
ç¡®å®šæ–¹å¼æ˜¯å‡è®¾è¿™é‡Œæ”¾aï¼ˆæ¯”æ”¾bå°1ï¼‰æˆ‘ä»¬åé¢èƒ½æ„é€ å‡ºçš„å­—ç¬¦ä¸²æ•°é‡  
ä¸€æƒ³è¿™ä¸æ˜¯ç»„åˆæ•°å—ï¼Ÿ  
æˆ‘ä»¬æƒ³åœ¨å‰©ä¸‹çš„ï¼ˆa + b - 1ï¼‰ä¸ªä½ç½®éšæ„æ”¾ç½®ï¼ˆa - 1ï¼‰ä¸ª'a'  
æ‰€ä»¥è·³çš„æ­¥æ•°æ˜¯C(a + b - 1, a - 1)  
  
æµç¨‹ï¼š
åœ¨k>1æ—¶ï¼ˆå› ä¸ºæˆ‘ä»¬å­—å…¸åºä»å¤´å¼€å§‹æ‰¾çš„ï¼Œæ‰€ä»¥è¦å°‘ç”¨ä¸€ä¸ªkï¼‰ï¼š  
	å¦‚æœk > C(a + b - 1, a - 1)ï¼Œé‚£ä¹ˆè¿™ä¸€æ­¥æ˜¯å¯ä»¥æ”¾'b'æ¥è·³æ­¥çš„  
	å¦åˆ™ï¼Œä¸èƒ½è·³æ­¥ï¼Œè€è€å®å®æ”¾'a'å§  
åœ¨æœ€åï¼Œæˆ‘ä»¬æ„é€ å‡ºåé¢æ²¡æœ‰æ„é€ çš„æœ€å°å­—ç¬¦ä¸²ï¼šå…ˆæ”¾å®Œaï¼Œå†æ”¾å®Œb  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
ll c[65][35];

inline void get_C(){//æ¨è¾‰ä¸‰è§’æ„å»ºç»„åˆæ•°
        for(int i = 0; i < 65; i ++) c[i][0] = 1;
        for(int i = 0; i < 65; i ++){
                for(int j = 1; j <= i && j < 35; j ++){
                        c[i][j] = c[i - 1][j] + c[i - 1][j - 1];
                }
        }
}


inline void solve(){get_C();
        _ll(a); _ll(b); _ll(k);
        string res;
        while(k > 1){
                if(k > c[b + a - 1][a - 1]){ k -= c[b + a - 1][a - 1]; //å¯ä»¥è·³æ­¥
                        b --; //æ”¾äº†'b'ï¼Œbçš„æ•°é‡å°±å‡1
                        res += "b";
                }else{
                        a --;//æ”¾äº†'a'ï¼Œaçš„æ•°é‡å°±å‡1
                        res += "a";
                }
        }
        for(int i = 0; i < a; i ++) res += "a";
        for(int i = 0; i < b; i ++) res += "b";
        cout << res << endl;
}

CHIVAS{
        solve();
        _REGAL;
}
```

<hr>

### AcWing2418_å…‰ä¹‹å¤§é™†

#### ğŸ”—
<a href="https://www.acwing.com/problem/content/2420/"><img src="https://img-blog.csdnimg.cn/d53ef6a1ffcd49de9de5d27840b41ec1.png"></a>

#### ğŸ’¡
æˆ‘ä»¬å…ˆå°†é¢˜æ„æŠ½è±¡å‡ºæ¥  
ç›¸å½“äºç»™å®šnä¸ªç‚¹ï¼Œåˆ†æˆä»»æ„å—ï¼Œæ¯å—éƒ½æ˜¯ä¸ªç¯ï¼Œè®©è¿™äº›ç¯è¿é€š  
  
ç¯ä¸ç¯çš„ä¹‹é—´è¿é€šå¯ä»¥pruferç¼–ç çš„æ€§è´¨ ^(n-2)ç›´æ¥å¾—åˆ°  
é—®é¢˜å°±æ˜¯åˆ†æˆå—çš„é—®é¢˜  
å¯¹äºiä¸ªç‚¹ï¼Œæˆ‘ä»¬è¦è€ƒè™‘æ¯ä¸€ä¸ªç‚¹çš„å½’å±  
æˆ‘ä»¬åˆ†æˆjå—ï¼Œæˆ‘ä»¬è€ƒè™‘kä¸ªç‚¹çš„å½’å±  
é‚£ä¹ˆæˆ‘ä»¬è¦é€’æ¨i-1ä¸ªç‚¹ä¸­é€‰k-1ä¸ªç‚¹ï¼š dp[i][j] = (dp[i][j] + dp[i - k][j - 1] * c[i - 1][k - 1]  
å› ä¸ºæ¯ä¸€å—å¯ä»¥æ—‹è½¬ç¯ï¼Œæ‰€ä»¥è¦ä¹˜é˜¶ä¹˜  
  
æœ€åç»Ÿè®¡ä¸€ä¸‹åˆ†æˆ1ï½nå—çš„æ–¹æ¡ˆæ•°  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int N = 210;
ll g[N];
ll dp[N][N];
ll c[N][N];
ll n, mod;

inline void Pre () {
        for ( int i = 0; i < N; i ++ ) {
                for ( int j = 0; j <= i; j ++ ) {
                        if ( j == 0 ) c[i][j] = 1;
                        else          c[i][j] = (c[i - 1][j] + c[i - 1][j - 1]) % mod;
                } 
        }
        g[1] = 1, g[3] = 3;                                                                                                                     
        for ( int i = 4; i < N; i ++ ) g[i] = g[i - 1] * i % mod;
}

int main () {
        cin >> n >> mod; Pre();
        dp[0][0] = 1;
        for ( int i = 1; i <= n; i ++ ) { // æ€»å…±iä¸ªç‚¹
                for ( int j = 1; j <= i; j ++ ) { // åˆ†æˆjå—
                        for ( int k = 1; k <= i - j + 1; k ++ ) { // è¦æšä¸¾kä¸ªçœ‹çœ‹æ€ä¹ˆåˆ†é…
                                dp[i][j] = (dp[i][j] + dp[i - k][j - 1] * c[i - 1][k - 1] * g[k] % mod) % mod;
                        }
                }
        }
        ll res = g[n - 1], p = 1; // p: pruferå®šç†åé¢è¦ä¹˜çš„æ•°
        for ( int k = 2; k <= n; k ++ ) {
                res = ( res + dp[n][k] * p % mod ) % mod;
                p = p * n % mod;
        }
        cout << res << endl;
}
```

<hr>

### ARC117C_TricolorPyramid

#### ğŸ”—
<a href="https://atcoder.jp/contests/arc117/tasks/arc117_c?lang=en">![20220906152734](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220906152734.png)</a>

#### ğŸ’¡
å°±ä¸‰ç§é¢œè‰²æ¥å›å˜ï¼Œå°†å…¶è½¬æ¢æˆ $(0,1,2)(mod\;3)$  
ä¸€ä¸ªé¢œè‰²ä¸å…¶ä¸‹é¢ä¸¤ä¸ªæœ‰å…³ç³»ï¼Œå°†å…³ç³»å›¾ç”»å‡ºæ¥  
<table>
  <tr>
    <th>&nbsp;</th><th>0</th><th>1</th><th>2</th>
  </tr>
  <tr>
    <th>0</th><td>0</td><td>2</td><td>1</td>
  </tr>
  <tr>
    <th>1</th><td>2</td><td>1</td><td>0</td>
  </tr>
  <tr>
    <th>2</th><td>1</td><td>0</td><td>2</td>
  </tr>
</table>  

å‘ç°å’Œç›¸åŒçš„ä¸¤å¯¹ï¼Œå…¶å€¼ä¹Ÿç›¸åŒï¼Œå…¶å’Œçš„è´Ÿå€¼ä¸æœ€ç»ˆå€¼å·® $3$ ï¼Œä¹Ÿå¯ä»¥çœ‹åšæ˜¯ $target\equiv -(x+y)(mod\;3)$  
ä»¤æœ€åä¸€è¡Œä¸º $a,b,c,d,e$  
æ¨ä¸Šå»ä¸º  
$
a+4b+6c+4d+e\\
-a-3b-3c-d\quad -b-3c-3d-e\\
a+2b+c\quad b+2c+d\quad c+2d+e\\
-a-b\quad -b-c\quad -c-d\quad -d-e\\
a\quad b\quad c\quad d\quad e
$  
å¦‚æœä»¤å­—ç¬¦ $c$ çš„æƒå€¼ä¸º $w_c$ ï¼Œæƒå€¼ä¸º $v$ çš„å­—ç¬¦ä¸º $c_v$   
å¾—åˆ°ç¬¬ä¸€è¡Œä¸º $c[(-1)^{n-1}\sum\limits_{i=0}^{n-1}\binom{n-1}{i}w[s_i]]$  
  
ä¸è¿‡ç”±äºæ¨¡æ•°å¾ˆå°ï¼Œä¸èƒ½ç›´æ¥é˜¶ä¹˜æ±‚ç»„åˆæ•°ï¼Œä¸ç„¶å¾ˆå®¹æ˜“å‡ºç°æ— é€†å…ƒæ— æ³•é™¤çš„æƒ…å†µ  
ä½†ç”±äºæ¨¡æ•°å¾ˆå°ï¼Œå¯ä»¥ç”¨ $Lucas$ å¿«é€Ÿæ±‚è§£ï¼Œä¸”æ±‚å•ä¸ªç»„åˆæ•°çš„è¿‡ç¨‹ä¸­ä¸ç”¨å–æ¨¡  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline int Comb (int a, int b, int mod) {
    if (a < b) return 0;
    if (a == b) return 1;
    if (b > a - b) b = a - b;
    int res = 1;
    for (int i = 0; i < b; i ++) res = res * (a - i);
    for (int i = 0; i < b; i ++) res = res / (b - i);
    return res % mod;
}
inline int Lucas (int n, int m, int mod) {
    int res = 1;
    while (n && m && res) {
        res = 1ll * res * Comb(n % mod, m % mod, mod) % mod;
        n /= mod;
        m /= mod;
    }
    return res;
}


int n;
string s;

int main () {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    cin >> n >> s;

    int res = 0;
    for (int i = 0; i < n; i ++) {
        res += (s[i] == 'B' ? 0 : (s[i] == 'W' ? 1 : 2)) * Lucas(n - 1, i, 3) % 3;
        res %= 3;
    }
    if (n % 2 == 0) res = (-res + 3) % 3;
    cout << (res == 0 ? 'B' : (res == 1 ? 'W' : 'R')) << endl;
}
```
<hr>


### ARC134C_TheMajority

#### ğŸ”—
<a href="https://atcoder.jp/contests/arc134/tasks/arc134_c?lang=en"><img src="https://img-blog.csdnimg.cn/14f2ddf24f6949238483657ed344b023.png"></a>

#### ğŸ’¡  
å¯ä»¥è¿™æ ·æƒ³ï¼Œè¦æƒ³æ•°å­—æ˜¯ $1$ çš„çƒä¸ªæ•°ä¸¥æ ¼å¤§äºåˆ«çš„æ•°å­—çš„çƒä¸ªæ•°  
æˆ‘ä»¬å¯ä»¥å…ˆç»™æ¯ä¸€ä¸ªç›’å­éƒ½é“ºä¸Šæ•°å­—æ˜¯ $1$ çš„çƒï¼Œç„¶åæ¯å¾€ä¸€ä¸ªç›’å­é‡Œé¢æ”¾ä¸€ä¸ª $1$ å°±è·Ÿç€æ”¾ä¸€ä¸ªåˆ«çš„  
  
é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¿™äº›çƒåˆ†æˆä¸¤ç±»ç‰©å“  
æ•°å­—ä¸æ˜¯ $1$ çš„çƒå’Œæ•°å­—æ˜¯ $1$ çš„çƒä¸¤ä¸¤é…å¯¹å½¢æˆç‰©å“ $a$ ï¼Œæœ‰ $\alpha$ ä¸ª  
å‰©ä½™çš„æ•°å­—æ˜¯ $1$ çš„çƒæ¯ä¸ªéƒ½æ˜¯ç‰©å“ $b$ ï¼Œæœ‰ $\beta$ ä¸ª   
  
æˆ‘ä»¬è¦å…ˆç»™æ¯ä¸ªç›’å­éƒ½é“ºä¸Šç‰©å“ $b$ ï¼Œä¸èƒ½æœ‰ç©ºç›’å­  
å¯¹äº [çƒç›’æ¨¡å‹æƒ…å†µå››](https://tech.chivas-regal.top/blogs/algorithm/math/ballandbox.html#%E8%AF%81%E6%98%8E%E5%9B%9B)ï¼Œæ–¹æ¡ˆæ•°ä¸º $\begin{pmatrix}\alpha-1\\\beta-1\end{pmatrix}$  
ä¹‹åå¯¹äºç‰©å“ $b$ ï¼Œæ³¨æ„åŒæ•°å­—çš„çƒä¹‹é—´æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸åŒæ•°å­—çš„çƒæ˜¯ä¸åŒçš„ï¼Œæ”¾ç½®çš„æ—¶å€™ç›’å¯ç©º  
é‚£ä¹ˆæˆ‘ä»¬è¦å¯¹äºæ¯ä¸€ä¸ª $i$ å’Œ $1$ æ‹¼æ¥ç‰©å“çš„æ•°é‡ $a_i$ è®¡ç®—ä¸€æ¬¡ [çƒç›’æ¨¡å‹æƒ…å†µä¸‰](https://tech.chivas-regal.top/blogs/algorithm/math/ballandbox.html#%E8%AF%81%E6%98%8E%E4%B8%89)ï¼Œæ–¹æ¡ˆæ•°ä¸º $\prod\limits_{i=2}^n\begin{pmatrix}a_i+m-1\\m-1\end{pmatrix}$  
  
æ•…ç­”æ¡ˆä¸º  
$$\begin{pmatrix}\alpha-1\\\beta-1\end{pmatrix}\prod\limits_{i=2}^n\begin{pmatrix}a_i+m-1\\m-1\end{pmatrix}$$  


å¦å¤–ï¼Œå¯¹äº $m$ æ¯”è¾ƒå°ä½†æ˜¯ $n$ æ¯”è¾ƒå¤§çš„ç»„åˆæ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ†å­åˆ†æ¯çº¦åˆ†ä¹‹åçš„æ–¹å¼è¿›è¡Œè®¡ç®—  

```cpp
inline ll C ( ll n, ll m ) {
        ll res = 1;
        for ( ll i = 0; i < m; i ++ ) res = res * (n - i) % mod;
        return res * inv[m] % mod;
}
```

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e5 + 10;
const int K = 210;
const int mod = 998244353;

ll inv[N];

inline ll Ksm ( ll a, ll b ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll Inv ( ll x ) { return Ksm(x, mod - 2); }
inline void get_I () {
        inv[0] = Inv(1);
        for ( int i = 1; i < K; i ++ ) 
                inv[i] = inv[i - 1] * Inv(i) % mod;
}
inline ll C ( ll n, ll m ) {
        ll res = 1;
        for ( ll i = 0; i < m; i ++ ) res = res * (n - i) % mod;
        return res * inv[m] % mod;
}

ll n, k;
ll a[N];
ll one, els; // æ•°å­—1çš„ä¸ªæ•°ï¼Œåˆ«çš„æ•°å­—çš„ä¸ªæ•°
ll res;
int main () {
        get_I();
        ios::sync_with_stdio(false);

        cin >> n >> k;
        for ( int i = 1; i <= n; i ++ ) {
                cin >> a[i];
                if ( i == 1 ) one += a[i];
                else els += a[i];
        }
        if ( one - els < k ) {
                cout << 0 << endl;
                return 0;
        }

        res = C(one - els - 1, k - 1);
        for ( int i = 2; i <= n; i ++ ) res = res * C(a[i] + k - 1, k - 1) % mod;
        cout << res << endl;
}
```
<hr>

### ARC136B_TripleShift

#### ğŸ”—
<a href="https://atcoder.jp/contests/arc136/tasks/arc136_b?lang=en">![20220303014137](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220303014137.png)</a>

#### ğŸ’¡
è€ƒè™‘è¿›è¡Œä¸€æ¬¡æ“ä½œä¼šäº§ç”Ÿä»€ä¹ˆå½±å“  
ä¸‰ä¸ªä¸åŒçš„æ•°æ•°å¾€åè½¬ä¸€æ¬¡  
é€†åºå¯¹ $\pm2$  
ä¸‰ä¸ªæ•°å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„  
é€†åºå¯¹æ”¹å˜å¯ä»¥åŒ…æ½æ‰€æœ‰çš„  
  
é‚£ä¹ˆè€ƒè™‘ä¸¤ä¸ªæ•°ç»„çš„é€†åºå¯¹å¥‡å¶å³å¯  
åŒå¥‡å¶æ€§å¿…ç„¶å¯ä»¥  
ä¸åŒå¥‡å¶æ€§è‹¥å­˜åœ¨ç›¸åŒçš„æ•°ä¹Ÿå¯ä»¥  
å¦åˆ™ä¸è¡Œ  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
int n;
int a[5010], b[5010];
int numa[5010];
int mxnum = 0;
 
int main () {
        ios::sync_with_stdio(false);
 
        cin >> n;
        for ( int i = 1; i <= n; i ++ ) cin >> a[i], numa[a[i]] ++, mxnum = max(mxnum, numa[a[i]]);
        for ( int i = 1; i <= n; i ++ ) {
                cin >> b[i];
                if ( numa[b[i]] == 0 ) {
                        cout << "No" << endl;
                        return 0;
                }
                numa[b[i]] --;
        }
        int reva = 0;
        for ( int i = 1; i <= n; i ++ ) {
                for ( int j = 1; j < i; j ++ ) {
                        reva += a[j] > a[i];
                }
        }
        int revb = 0;
        for ( int i = 1; i <= n; i ++ ) {
                for ( int j = 1; j < i; j ++ ) {
                        revb += b[j] > b[i];
                }
        }
        if ( reva % 2 == revb % 2 || mxnum >= 2 ) {
                cout << "Yes" << endl;
        } else {
                cout << "No" << endl;
        }
}
```
<hr>

### ICPC2019å—äº¬B_ChessBoard

#### ğŸ”—
<a href="https://codeforces.com/gym/103466/problem/B">![20221008151222](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20221008151222.png)</a>

#### ğŸ’¡
ç¬¬äºŒå¼ å›¾çš„è¯´æœæ€§å¾ˆå¼ºï¼Œå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡ä¸èƒ½åœ¨å·²æœ‰çŸ©é˜µ $a*b(a\le 2,b\le 2)$ çš„å‰æä¸‹ï¼Œå¾€ä¸€ä¸ªæ–¹å‘å¼€ä¸¤æ­¥ï¼Œä¸ç„¶ä¼šå‡ºç°åŒè¡ŒåŒåˆ—è¦å¾€å›æ”¶å‡ºç°ç©ºè¾¹çš„æƒ…å†µï¼ˆåˆ†æç¬¬äºŒä¸ªå›¾ï¼‰    
å¼€ä¸€æ­¥çš„è¯å¯ä»¥é€‰å››ä¸ªè§’ï¼Œé€‰ä¸€ä¸ªæ–¹å‘å¼€ï¼Œæœ¬èº«æœ‰ $n-1+m-1$ ç§å¼€æ³•ï¼Œè°ƒ $n-1$ ä¸ªä½ç½®å¼€è¡Œï¼Œæ•…ç­”æ¡ˆä¸º $4\times \binom{n+m-2}{n-1}$  
ç‰¹åˆ¤ $m=1$ å’Œ $n=1$  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline void Solve () {
    int n, m; cin >> n >> m;
    if (n == 1) {
        cout << 1 + (m != 1) << endl;
    } else if (m == 1) {
        cout << 1 + (n != 1) << endl;
    } else {
        cout << 4ll * C(n + m - 2, n - 1) % mod << endl;
    }
}
```
<hr>


### CodeForces340C_TouristProblem

#### ğŸ”—
<a href="https://codeforces.com/contest/340/problem/C">![20220705163744](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705163744.png)</a>

#### ğŸ’¡
è¿™ä¸ªæ˜¯çœ‹æ¯ä¸€å¯¹çš„è´¡çŒ®  
é¦–å…ˆæ¯ä¸€ä¸ªæ•°å’Œ $0$ çš„å·®å‡ºç°çš„æ¬¡æ•°ä¸ºåé¢åˆ«çš„æ•°çš„å…¨æ’åˆ—ï¼Œå³ $(n-1)!$  
å…¶æ¬¡æ¯ä¸¤ä¸ªæ•°çš„å·®å‡ºç°çš„æ¬¡æ•°ä¾ç„¶æ˜¯ $(n-1)!$ï¼Œå¯ä»¥åªçœ‹åšå¤§å‡å°ï¼Œç„¶åå‡ºç°çš„æ¬¡æ•°ä¹˜ $2$   
åœ¨å¯¹ $[a]$ æ’åºå  
åˆ†å­ä¸º $(\sum\limits_{i=1}^na_i(n-1)!)+(2\sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(a_j-a_i)(n-1)!)$  
åˆ†æ¯ä¸º $n!$  
åˆæ­¥åŒ–ç®€åï¼š  
åˆ†å­ä¸º $(\sum\limits_{i=1}^na_i)+(2\sum\limits_{i=1}^n\sum\limits_{j=i+1}^n(a_j-a_i))$  
åˆ†æ¯ä¸º $n$   
åé¢é‚£ä¸ªä¸¤é‡å¾ªç¯å¯ä»¥ç›´æ¥ç”¨å‰ç¼€å’ŒåŒ–ç®€ï¼Œå³ $\sum\limits_{i=1}^n(a_i\times(i-1)-pre\_sum)$ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline ll gcd (ll a, ll b) {
        return b ? gcd(b, a % b) : a;
}
 
int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);
 
        int n; cin >> n;
        vector<ll> a(n); for (ll &i : a) cin >> i;
        sort(a.begin(), a.end());
 
        ll up = 0, down = n;
        ll pre_sum = 0;
        for (int i = 0; i < n; i ++) {
                up += (a[i] * i - pre_sum) * 2;
                up += a[i];
                pre_sum += a[i];
        }
        ll d = gcd(up, down);
        up /= d;
        down /= d;
        cout << up << " " << down << endl;
}
```
<hr>

### CodeForces1609E_IntercityTravelling

#### ğŸ”—
<a href="https://codeforces.com/contest/1009/problem/E">![20220705220024](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705220024.png)</a>

#### ğŸ’¡  
å¯¹äºæ¯ä¸€æ®µä½œä¸ºæ¯ä¸€ä¸ªç–²åŠ³å€¼ï¼Œç”¨æ’åˆ—ç»„åˆæ±‚ä¸€ä¸ªè´¡çŒ®æ¬¡æ•°  
  
ç ”ç©¶ç¬¬äºŒä¸ªæ ·ä¾‹  
<b>ç¬¬ä¸€æ®µï¼š</b>  
ä½œä¸º $a_1$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^3$  
<b>ç¬¬äºŒæ®µï¼š</b>  
ä½œä¸º $a_1$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^2$  
ä½œä¸º $a_2$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^2$    
<b>ç¬¬ä¸‰æ®µï¼š</b>  
ä½œä¸º $a_1$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^1$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^1$  
ä½œä¸º $a_2$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^1$  
ä½œä¸º $a_3$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^1$  
<b>ç¬¬å››æ®µï¼š</b>  
ä½œä¸º $a_1$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^2$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$  
ä½œä¸º $a_2$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^1$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$  
ä½œä¸º $a_3$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºå äº†å‰é¢ä¸€ä¸ªæ–­ç‚¹åå‰é¢çš„å‰©ä½™æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$ ï¼Œä¹˜ä¸Šåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$  
ä½œä¸º $a_1$ ï¼š  
è´¡çŒ®æ¬¡æ•°ä¸ºåé¢çš„æ–­ç‚¹æ•°ä»»é€‰å³ $2^0$    
  
åˆ’åˆ†ä¸‹æ¥å³ï¼š  
$(2^3+3\times 2^2)a_1+\\(2^2+2\times 2^1)a_2+\\(2^1+1\times2^0)a_3+\\(2^0)a_4$  
æ¯ä¸€ä¸ª $a_i$ æœ€å‰é¢çš„æ˜¯ç¬¬ $i$ æ®µä½¿ç”¨å®ƒçš„è´¡çŒ®æ¬¡æ•°ï¼Œåé¢æœ‰ $n-i$ ä¸ªæ–­ç‚¹ï¼Œæ‰€ä»¥æ˜¯ $2^{n-i}æ¬¡$ ã€‚è€Œåé¢çš„åˆ™æ˜¯ç¬¬ $i$ æ®µä¹‹åçš„ $(n-i)$ ä¸ªæ®µä½¿ç”¨å®ƒï¼ŒæŒ‡æ•°æ˜¯äº’è¡¥çš„ï¼ˆå·¦åŠ å³å‡ï¼‰ï¼Œå³ $2^{n-i-1}æ¬¡$  
åˆ™ç­”æ¡ˆä¸º $\sum\limits_{i=1}^n2^{n-i}+(n-i)2^{n-i-1}$   

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;
inline ll ksm (ll a, ll b) { if (b < 0) return 0; ll res = 1; while (b) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }
 
int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);
 
        int n; cin >> n;
        vector<ll> a(n + 1); for (int i = 1; i <= n; i ++) cin >> a[i];
 
        ll res = 0;
        for (int i = 1; i <= n; i ++) {
                res += (ksm(2, n - i) + (n - i) * ksm(2, n - i - 1) % mod) % mod * a[i] % mod;
                res %= mod;
        }
        cout << res << endl;
}
```
<hr>


### CodeForces1371E1_Asterismï¼ˆEasy Versionï¼‰

#### ğŸ”—
<a href="https://codeforces.com/contest/1371/problem/E1">![20220705210527](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705210527.png)</a>

#### ğŸ’¡
ä¸€ä¸ªæ’åˆ—æ•°é—®é¢˜  
æ³¨æ„åˆ°å¯¹äº $f(x)$ ï¼Œä» $0\to n-1$ çš„ä½ç½®æ‰‹é‡Œçš„ç³–æ•°æ˜¯ $x\to x+n-1$   
åˆ™æ¯ä¸€ä¸ªä½ç½®åº”éƒ½æœ‰ä¸€äº›æ€ªå…½å¯ä»¥æ”¾ç½®ï¼Œä¸”æ˜¯å‡åºçš„ï¼Œå¹¶ä¸”èƒ½æ”¾åœ¨ $x$ ä½ç½®ä¸Šçš„æ€ªå…½ï¼Œä¹Ÿä¸€å®šèƒ½æ”¾åœ¨ $x+10$ çš„ä½ç½®ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«çš„   
ç°åœ¨å°±æ˜¯çœ‹å¦‚æœæœ‰ $i$ é¢—ç³–ï¼Œå¯ä»¥åº”ä»˜å‡ åªæ€ªå…½ï¼Œç”±æ­¤é¢„å¤„ç†å‡ºæ¥ $[b]$   
æˆ‘ä»¬åœ¨æ±‚ $f(x)$ æ—¶ï¼Œå¯¹äºæœ‰ $i$ é¢—ç³–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿™é‡Œå¯ä»¥æ”¾ $b_i$ ä¸ªæ€ªå…½ï¼Œä½†æ˜¯ä¹‹å‰è¿‡äº† $i-x$ ä¸ªæ€ªå…½äº†ï¼Œæ‰€ä»¥è¦å‡å»ã€‚è®©è¿™äº›è¿›è¡Œç´¯ä¹˜å³å¯ï¼Œå…¬å¼è¡¨ç¤ºä¸ºï¼š  
$$f(x)=\prod\limits_{i=x}^{x+n-1}b_i-(i-x)$$  
åœ¨è¿™é‡Œé¢åˆ¤æ–­æ˜¯å¦å­˜åœ¨ $b_i-(i-x)\equiv 0(mod\;p)$ å³å¯   

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 4100;
int n, p;
int a[N], b[N];

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        cin >> n >> p;
        for (int i = 0; i < n; i ++) cin >> a[i];
        
        sort(a, a + n);
        for (int i = max(0, a[n - 1] - n + 1); i <= a[n - 1] + n - 1; i ++) b[i] = upper_bound(a, a + n, i) - a;
        vector<int> res;
        for (int x = max(0, a[n - 1] - n + 1); x <= a[n - 1]; x ++) {
                for (int i = x; i <= x + n - 1; i ++) {
                        if ((b[i] - (i - x)) % p == 0) goto end;
                }
                res.push_back(x);
                end:;
        }

        cout << res.size() << endl;
        for (int i : res) cout << i << " ";
}
```
<hr>

### CodeForces1371E1_Asterismï¼ˆHard Versionï¼‰

#### ğŸ”—
<a href="https://codeforces.com/contest/1371/problem/E2">![20220705212323](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705212323.png)</a>

#### ğŸ’¡
æ ¹æ®ä¸Šé¢çš„æ€è·¯æœ‰ï¼š   
åˆ¤æ–­æ˜¯å¦ $b_i-(i-x)\equiv 0(mod\;p)$  
å¯è½¬åŒ–ä¸ºåˆ¤æ–­æ˜¯å¦ $i-b_i\equiv x(mod\;p)$   
è¿™é‡Œ $i-b_i$ å¯ä»¥ç›´æ¥é¢„å¤„ç†å­˜ä¸€ä¸‹ï¼Œå³å­˜ $(i-b_i)\%p$ ï¼Œç„¶ååœ¨æšä¸¾ $x$ æ—¶åˆ¤æ–­ $x\%p$ æ˜¯å¦å­˜è¿‡å³å¯  
ä½†æ˜¯æ³¨æ„åˆ°è½®æ•°ä¸äº’é€šï¼Œå› ä¸ºè½¬åŒ–ä¹‹åçš„å…¬å¼ä¸º $f(x)=\prod\limits_{i=x}^{x+n-1}x-(i-b_i)$ ï¼Œæˆ‘ä»¬æšä¸¾çš„æ˜¯ $x$ ï¼Œå½“ $x+1$ åï¼Œä¸Šä¸€è½®çš„ $i=x$ å°±ä¸èƒ½ç”¨äº†  
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå­˜å…¥ç¬¬ä¸€è½®ï¼Œç„¶ååœ¨åˆ¤æ–­å®Œä¸€ä¸ª $x$ æ˜¯å¦èƒ½ç”¨åï¼Œå°† $i=x$ æ—¶çš„ $i-b_i$ åˆ å»ï¼ŒåŠ å…¥ä¸‹ä¸€è½®çš„ $i-b_i$ ï¼Œå³ $i=x+n$ æ—¶çš„  
è¿™æ ·åˆ¤æ–­ä¸‹å»å°±è¡Œäº†   


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e5 + 10;
int n, p;
int a[N];
inline int sub (int a, int b) { return ((a - b) % p + p) % p; }
 
int vis[N];
 
int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);
 
        cin >> n >> p;
        for (int i = 0; i < n; i ++) cin >> a[i];
 
        sort(a, a + n);
 
        for (int i = a[n - 1] - n + 1; i <= a[n - 1]; i ++) {
                vis[sub(i, upper_bound(a, a + n, i) - a) % p] ++;
        }
 
        vector<int> res;
        for (int x = max(0, a[n - 1] - n + 1); x <= a[n - 1]; x ++) {
                if (!vis[x % p]) res.push_back(x);
                vis[sub(x, upper_bound(a, a + n, x) - a) % p] --; // åˆ é™¤ i=x çš„è®°å½•
                vis[sub(x + n, upper_bound(a, a + n, x + n) - a) % p] ++; // åŠ å…¥ i=x+n çš„è®°å½•
        }
        cout << res.size() << endl;
        for (int i : res) cout << i << " ";
}
```
<hr>


### CodeForces1422C_Bargain

#### ğŸ”—
<a href="https://codeforces.com/contest/1422/problem/C">![20220705154656](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705154656.png)</a>

#### ğŸ’¡
è¿™ç§å¯¹æ•°è¿›è¡Œæ“ä½œï¼Œç®—æ‰€æœ‰ç»“æœçš„å’Œçš„ï¼Œç›´æ¥ç®—æ¯ä¸€ä¸ªæ•°åšå‡ºè´¡çŒ®çš„æ¬¡æ•°  
ä½†æ˜¯ç”±äºæˆ‘ä»¬å¯ä»¥åˆ ä¸€ä½åé¢çš„æ•°ï¼Œå®ƒæ‰€åœ¨çš„ä½æ•°ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç®—çš„æ˜¯å®ƒä½œä¸ºç¬¬å‡ ä½æ‰€åšå‡ºçš„è´¡çŒ®æ˜¯å¤šå°‘  
  
å¯¹ç¬¬ $k$ ä½çš„æ•° $x$ åšä¸€ä¸‹åˆ†ç±»è®¨è®ºï¼š  
ä½œä¸ºç¬¬ $1$ ä½ï¼šåé¢å…¨åˆ   
ä½œä¸ºç¬¬ $2$ ä½ï¼šåé¢åˆ åˆ°å‰© $1$ ä¸ª  
ä½œä¸ºç¬¬ $3$ ä½ï¼šåé¢åˆ åˆ°å‰© $2$ ä¸ª  
$...$   
ä½œä¸ºç¬¬ $k$ ä½ï¼šå‰é¢åˆ ä»»æ„å­æ®µ  
å¦‚æœæ•°æœ‰ $n$ ä½ï¼Œé‚£ä¹ˆç¬¬ $k$ ä½ä½œä¸º $[1,k-1]$ ä½çš„è´¡çŒ®ä¸º $a_k\times (k-1)(k-2)...321$ è¿™æ ·çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºæ¥ä¸€ä¸ª $1,21,321,4321,...$ è¿™æ ·çš„æ•°ç»„ `\_dots321`  
è€Œä½œä¸ºç¬¬ $k$ ä½çš„è´¡çŒ®æ¬¡æ•°ï¼Œå‰é¢æœ‰ $n-k$ ä¸ªæ•°ï¼Œæ‰€ä»¥æœ‰ $\binom{n-k}{2}$ ç§å­æ®µæˆªå–æ–¹å¼ï¼Œå†ä¹˜ä¸Šå®ƒå¯¹åº”çš„ä½æ•°å³ $10^{k}$ ï¼Œåˆ™è´¡çŒ®æ˜¯ $a_k\times \binom{n-k}{2}10^k$   
  
ç”±äºä¸Šé¢è¯´çš„æ˜¯â€œä½â€ä¸æ˜¯â€œä¸‹æ ‡â€  
åˆ™è½¬æ¢ä¸ºä¸‹æ ‡çš„æœ€ç»ˆç»“æœä¸ºï¼š  
$$\sum\limits_{i=1}^n(\binom{i-1}{2}10^{n-i}+\_dots321_{n-i})s_i$$


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const ll N = 1e5 + 10;
const ll mod = 1e9 + 7;
inline ll ksm (ll a, ll b) { ll res = 1; while (b) { if (b & 1) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv (ll x) { return ksm(x, mod - 2); }

ll _dots321[N];
ll pw10[N];
ll iv2;

int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        _dots321[0] = 0;
        _dots321[1] = 1;
        for (int i = 2; i < N; i ++) _dots321[i] = (_dots321[i - 1] * 10 % mod + 1) % mod;
        for (int i = 2; i < N; i ++) _dots321[i] = (_dots321[i - 1] * 10 % mod + _dots321[i]) % mod;
        pw10[0] = 1;
        for (int i = 1; i < N; i ++) pw10[i] = pw10[i - 1] * 10 % mod;
        iv2 = inv(2);


        ll res = 0;

        string s; cin >> s; s = "0" + s;
        ll n = s.size() - 1;
        for (int i = n; i >= 1; i --) {
                ll pre = 1ll * (i - 1) * i % mod * iv2 % mod * pw10[n - i] % mod;
                res += (pre + _dots321[n - i]) % mod * (s[i] - '0') % mod;
                res %= mod;
        }
        cout << res << endl;
}
```
<hr>


### CodeForces1536B_AdvertisingAgency

#### ğŸ”—
<a href="https://codeforces.com/problemset/problem/1536/B"><img src="https://img-blog.csdnimg.cn/20210410211951223.png"></a>

#### ğŸ’¡
æˆ‘ä»¬ä»ä¸Šå‘ä¸‹å–æ•°ï¼Œæœ€å¤šèƒ½å–çš„ä¸ªæ•°å–å†³äºï¼šæˆ‘ä»¬éœ€è¦å¤šå°‘ä¸ªè·Ÿç¬¬kä¸ªæ•°ç›¸ç­‰çš„æ•°nedã€è·Ÿç¬¬kä¸ªæ•°ç›¸ç­‰çš„æ•°çš„ä¸ªæ•°numã€‚  
è¿™ä¸¤ä¸ªå¾—åˆ°è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œå°±è€ƒéªŒäº†å†™ç çš„ä¸¥è°¨æ€§ï¼Œè€Œè¿™ä¸ªä¸ªæ•°æ˜æ˜¾æ˜¯ç»„åˆæ•°ï¼Œå€¼ä¸º(num!) / (ned!) / ((num-ned)!)å¹¶å–æ¨¡  
è§£ç»„åˆæ•°æœ‰ä¸¤ç§æ–¹å¼ï¼š  
1.æ¨è¾‰ä¸‰è§’é€’æ¨æ³•ï¼ˆ1000*1000ï¼‰çš„æ—¶é—´å¤æ‚åº¦  
2.åœ¨ç»“æœä¸Šåšè¿ç®—ï¼š**æ±‚é€†å…ƒ**  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const ll mod = 1e9 + 7;
int cass;
ll n, k;

ll qpow(ll a,ll b){//ksm
    ll ans = 1;
    while(b){
        if(b&1)
            ans = ans * a % mod;
        a = a * a % mod;
        b >>= 1;
    }
    return ans%mod;
}

ll Inv(ll a,ll p){//é€†å…ƒ
    return qpow(a, p - 2);
}

void solve(){
    vector<ll> vec;
    cin >> n >> k;
    for (int i = 0,x; i < n; i++){
        cin >> x;
        vec.push_back(x);
    }
    sort(vec.begin(), vec.end(), greater<ll>());//åˆå¹¶å‡ºæœ€å¤§æ•°ï¼Œå°±è¦é™åºint cur = k;
    map<int, ll> mp;//mp[i]è¡¨içš„å‡ºç°æ¬¡æ•°
    for (int i = 0; i < vec.size(); i++)
    {
        if(mp[vec[i]]==0)
            mp[vec[i]] = 1;
        else
            mp[vec[i]]++;
    }
    k--;//æˆ‘ä»¬ä»0å¼€å§‹å­˜çš„ï¼Œç¬¬kä¸ªçš„ä¸‹æ ‡ä¸ºk-1
    ll num = mp[vec[k]];//ç¬¬kä¸ªæ•°æœ‰å¤šå°‘ä¸ª
    ll ned = 0;//æˆ‘ä»¬éœ€è¦å¤šå°‘ä¸ªç¬¬kä¸ªæ•°
    for (int i = k; i >= 0; i--){
        if(i==0||vec[i]!=vec[i-1]){
            ned = k - i + 1;
            break;
        }
    }

    //å‰é¢çš„å°å‘ç»“æŸäº†ï¼Œå¼€å§‹ç»„åˆæ•°å–æ¨¡
    ll on = 1;//åˆ†å­
    for (int i = ned + 1; i <= num; i++)
        on = on * i % mod;
    ll dn = 1;//åˆ†æ¯
    for (int i = 1; i <= num - ned; i++)
        dn = dn * i % mod;
    cout << on * Inv(dn, mod) % mod << endl;
}

int main()
{
    each_cass(cass){
        solve();
    }
    return 0;
}
```

<hr>

### CodeForces1557C_MoamenAndXOR

#### ğŸ”—
<a href="https://codeforces.com/problemset/problem/1557/C"><img src="https://i.loli.net/2021/09/13/7RtnEshvGNxBioz.png"></a>

::: details æ€è·¯ä¸€

#### ğŸ’¡
é¦–å…ˆæŠŠæ•´ä¸ª<img src="https://latex.codecogs.com/svg.image?n" title="n" />ä¸ªkä½æ•°ç”»æˆä¸€ä¸ª<img src="https://latex.codecogs.com/svg.image?n\times&space;k" title="n\times k" />çš„çŸ©é˜µ  
ç„¶åå¯¹äºæ¯ä¸€åˆ—ï¼Œä¹Ÿå°±æ˜¯<img src="https://latex.codecogs.com/svg.image?n" title="n" />ä¸ªæ•°çš„æ¯ä¸€ä½  
å¦‚æœå…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />äº†è¯<img src="https://latex.codecogs.com/svg.image?\And&space;=1" title="\And =1" />ï¼Œæœ‰ä¸€ä¸ª<img src="https://latex.codecogs.com/svg.image?0" title="0" />å°±æ˜¯<img src="https://latex.codecogs.com/svg.image?0" title="0" />ã€‚  
å¶æ•°ä¸ª<img src="https://latex.codecogs.com/svg.image?1" title="1" />äº†è¯<img src="https://latex.codecogs.com/svg.image?\bigoplus&space;=0" title="\bigoplus =0" />ï¼Œå¥‡æ•°ä¸ª<img src="https://latex.codecogs.com/svg.image?\bigoplus&space;=1" title="\bigoplus =1" />  
  
å¾—åˆ°ä¸¤æ¡æ€§è´¨ï¼š  
**nä¸ºå¥‡æ•°æ—¶ï¼š** è¿™ä¸€ä½æœ€å¤šåœ¨å«æœ‰å¶æ•°ä¸ª<img src="https://latex.codecogs.com/svg.image?1" title="1" />çš„æ—¶å€™ä¸å’Œå¼‚æˆ–ç›¸ç­‰ï¼Œéƒ½æ˜¯<img src="https://latex.codecogs.com/svg.image?0" title="0" />  
**nä¸ºå¶æ•°æ—¶ï¼š** è¿™ä¸€ä½åœ¨å…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />æ—¶ï¼Œ<img src="https://latex.codecogs.com/svg.image?\And&space;=1" title="\And =1" />ï¼Œ<img src="https://latex.codecogs.com/svg.image?\bigoplus&space;=0" title="\bigoplus =0" />ã€‚è€Œåœ¨å…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />ä»¥ä¸‹çš„å¶æ•°ä¸ªæ—¶ï¼Œ<img src="https://latex.codecogs.com/svg.image?\And&space;=\bigoplus&space;=0" title="\And =\bigoplus =0" />  
  
é‚£ä¹ˆæœ‰ä¸¤ç±»è§£å†³æ–¹æ¡ˆï¼š  
**nä¸ºå¥‡æ•°æ—¶ï¼š**   
æ¯ä¸€ä½æœ€å¤šåªèƒ½ç›¸ç­‰ï¼Œå°±æ˜¯åœ¨æ¯ä¸€ä½éƒ½æœ‰å¶æ•°ä¸ª<img src="https://latex.codecogs.com/svg.image?1" title="1" />æˆ–è€…å…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />çš„æƒ…å†µä¸‹  
æ‰€ä»¥æˆ‘ä»¬å¯¹æ¯ä¸€ä½çš„nä¸ªæ•°å­—è¿›è¡Œæ’åˆ—ç»„åˆï¼Œè®¾å¶æ•°ä¸ª<img src="https://latex.codecogs.com/svg.image?1" title="1" />å’Œå…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />çš„ç»„åˆæƒ…å†µç´¯åŠ ä¸º<img src="https://latex.codecogs.com/svg.image?has\_Eve&plus;1" title="has\_Eve+1" />    
é‚£ä¹ˆç­”æ¡ˆå°±æ˜¯  
<img src="https://latex.codecogs.com/svg.image?(has\_Eve&plus;1)^k" title="(has\_Eve+1)^k" />   
**nä¸ºå¶æ•°æ—¶ï¼š**  
æ¯ä¸€ä½å¯ä»¥æ˜¯ç›¸ç­‰ï¼Œå°±æ˜¯åœ¨æ¯ä¸€ä½åœ¨éå…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />ä¸”æœ‰å¶æ•°ä¸ªçš„æƒ…å†µä¸‹ï¼Œè®¾ä¸º<img src="https://latex.codecogs.com/svg.image?has\_Eve" title="has\_Eve" />  
å½“å‰ä½è¿˜å¯ä»¥å¤§äºï¼Œå°±æ˜¯åœ¨è¿™ä¸€ä½(è®¾ä¸º<img src="https://latex.codecogs.com/svg.image?i" title="i" />)å…¨<img src="https://latex.codecogs.com/svg.image?1" title="1" />çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå‰é¢çš„æ‰€æœ‰ä½éƒ½å¯ä»¥ä»»æ„ä¸ª<img src="https://latex.codecogs.com/svg.image?\And&space;=1" title="\And =1" />ç»„åˆï¼Œæ–¹æ¡ˆæœ‰<img src="https://latex.codecogs.com/svg.image?(2^n)^{i-1}" title="(2^n)^{i-1}" />ä¸ª  
æ‰€ä»¥è¿™ä¸€ä½å°±æ˜¯è¦é€’æ¨ï¼Œç­”æ¡ˆæ˜¯  
<img src="https://latex.codecogs.com/svg.image?\begin{aligned}i\{1\to&space;k\}:\\&res=res\times&space;has\_Eve&space;&plus;&space;(2^n)^{i-1}\end{aligned}" title="\begin{aligned}i\{1\to k\}:\\&res=res\times has\_Eve + (2^n)^{i-1}\end{aligned}" />

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int N = 2e5 + 10;
const int mod = 1e9 + 7;
ll f[N];

inline void Get_F () {
        f[0] = 1;
        for ( int i = 1; i < N; i ++ ) 
                f[i] = f[i - 1] * i % mod;
}
inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b > 0 ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}
inline ll C ( ll a, ll b ) {
        return f[a] * ksm(f[b], mod - 2) % mod * ksm(f[a - b], mod - 2) % mod;
}

inline void solve () {
        ll n, k; cin >> n >> k;

        ll has_Eve = 0; for ( ll i = 0; i < n; i += 2 ) has_Eve = (has_Eve + C(n, i)) % mod;
        if ( n & 1 ) {
                cout << ksm ( has_Eve + 1, k) << endl; // æ¯ä¸€ä½éƒ½æ˜¯è¦ä¹ˆé€‰å¶æ•°ä¸ªè¦ä¹ˆå…¨é€‰ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½ç›¸ç­‰
        } else {
                ll res = 1;
                for ( ll i = 1; i <= k; i ++ ) {
                        res = res * has_Eve % mod;                 // ç¬¬iä½ä¸å…¨æ˜¯1 -- å‰ä¸€ä½æ»¡è¶³çš„æ–¹æ¡ˆæ•°ä¹˜å®ƒ
                        res = (res + ksm(ksm(2, n), i - 1)) % mod; // ç¬¬iä½å…¨æ˜¯1 -- å‰é¢çš„å¯ä»¥éšæ„æ
                }
                cout << res << endl;
        }
}

int main () {
#ifndef ONLINE_JUDGE
        freopen("in.in", "r", stdin);
        freopen("out.out", "w", stdout);
#endif
        Get_F();
        int cass;
        for ( cin >> cass; cass; cass -- ) {
                solve();
        }
}
```

:::

::: details æ€è·¯äºŒ

#### ğŸ’¡

å’Œ [æ¸…æ–°é¢˜](#ç‰›å®¢æŒ‘æˆ˜èµ›58b-æ¸…æ–°é¢˜) æ€è·¯è§£æ³•ä¸€æ ·ï¼Œä½¿ç”¨å¯¹äºæ¯ä¸€ä½è€ƒè™‘å‰ç›¸åŒï¼Œæ­¤ä½å¤§ï¼Œåéšæ„çš„æ–¹å¼  
é¦–å…ˆé¢„å¤„ç†å‡º $one\_one$ å’Œ $zero\_zero$ è¡¨ç¤ºå·¦å³å‡ä¸º $0$ å’Œ $1$ çš„æ–¹æ¡ˆæ•°  
å‰ç›¸åŒå³ $(one\_one+zero\_zero)^{i-1}$   
æ­¤ä½å¤§å°±æ˜¯è¿™ä¸€ä½å·¦ä¾§ä¸º $1$ å³ä¾§ä¸º $0$ ï¼Œå½“ä¸”ä»…å½“ $n$ ä¸ºå¶æ•°æ—¶å¯ä»¥  
åéšæ„å°± $2^{k-i}$   
æœ€ååŠ ä¸Šæ‰€æœ‰ç›¸åŒå³ $(one\_one+zero\_zero)^k$   
  
#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 1e9 + 7;
 
inline ll ksm ( ll a, ll b ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv ( ll x ) { return ksm(x, mod - 2); }
ll f[200005];
inline ll C ( ll n, ll m ) { return f[n] * inv(f[m]) % mod * inv(f[n - m]) % mod; }
 
inline void Solve () {
        ll n, k; cin >> n >> k;
        
        ll one_one = n % 2;
        ll zero_zero = 0;
        for ( int i = 0; i <= n; i += 2 ) {
                zero_zero += C(n, i);
                zero_zero %= mod;
        } if ( n % 2 == 0 ) zero_zero --, zero_zero = (zero_zero % mod + mod) % mod;
 
        ll res = ksm((one_one + zero_zero) % mod, k);
        for ( int i = 1; i <= k; i ++ ) {
                res += ksm((one_one + zero_zero) % mod, i - 1)
                       * (n % 2 == 0) % mod
                       * ksm(ksm(2, n), k - i) % mod;
                res %= mod;
        }
        cout << res << endl;
}
 
int main () {
        cin.tie(0)->sync_with_stdio(0);
        cin.exceptions(cin.failbit);
        f[0] = 1; for ( int i = 1; i < 200005; i ++ ) f[i] = f[i - 1] * i % mod;
        int cass; cin >> cass; while ( cass -- ) {
                Solve ();
        }
}
```

:::

<hr>

### CodeForces1594B_SpecialNumbers

#### ğŸ”—
<a href="https://codeforces.com/contest/1594/problem/B"><img src="https://i.loli.net/2021/10/09/RMkqpLPQY5TFEr1.png"></a>

#### ğŸ’¡
å¯¹ä¸€ä¸ªbè¿›è¡Œåˆ†å‰²  
é¦–å…ˆçœ‹ä¸€ä¸‹æŒ‰é¡ºåºçš„æ’åˆ—æƒ…å†µï¼š  
0 (1)  
1 0+1 (2)   
2 0+2 1+2 0+1+2 (4)   
3 0+3 1+3 2+3 0+1+3 0+2+3 1+2+3 0+1+2+3 (8)  
...  
é¦–å…ˆæƒ³åˆ°å¯¹bè¿›è¡ŒæŸ¥æ‰¾ï¼Œçœ‹çœ‹æ˜¯å­˜åœ¨äºå“ªä¸€ç»„ï¼ˆè®¾ä¸ºbasï¼‰ä¸­  
ç„¶å`b -= (1ll << bas)`  
å¯ä»¥å‘ç°å‰©ä¸‹çš„ä¹Ÿå°±æ˜¯è¢«æ‹†è¿‡ä¹‹åçš„å€¼ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œåˆ†å‰²ï¼Œç„¶åæŸ¥æ‰¾  
é‚£ä¹ˆæ¯æ¬¡ `res` ä¹Ÿå°±æ˜¯åŠ ä¸Š a^basï¼Œç›´åˆ°bè¢«æ‹†åˆ°0  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 1e9 + 7;

inline ll ksm ( ll a, ll b ) {
	ll res = 1;
	while ( b ) {
		if ( b & 1 ) res = res * a % mod;
		a = a * a % mod;
		b >>= 1;
	}
	return res;
}

inline void Solve() {
	ll a, b; cin >> a >> b;
	ll res = 0;
	while ( b > 0 ) {
		ll bas = 0, sum = 0;
		while ( sum + (1ll << bas) < b ) {
			sum += (1ll << bas);
			bas ++;
		}
		res = (res + ksm(a, bas)) % mod;
		b -= (1ll << bas);
	}
	cout << res << endl;

}

int main () {
	int cass; cin >> cass; while ( cass -- ) {
		Solve();
	}
        return 0;
}
```

<hr>

### CodeForces1594E1_Rubik'sCubeColoring(easyversion)

#### ğŸ”—
<a href="https://codeforces.com/contest/1594/problem/E1"><img src="https://i.loli.net/2021/10/09/D1sUwZuREFK5rkV.png"></a>

#### ğŸ’¡
é¦–å…ˆåº”è¯¥èƒ½å¾ˆå¿«æƒ³åˆ°ï¼Œåªæœ‰ç¥–å…ˆèŠ‚ç‚¹æœ‰6ç§é¢œè‰²å¯ä»¥é€‰ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸ªæœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œä»–ä»¬éƒ½åªèƒ½é€‰å››ä¸ª  
ä¸€å…±æœ‰<img src="https://latex.codecogs.com/svg.image?2^k-1" title="2^k-1" />ä¸ªèŠ‚ç‚¹  
é‚£ä¹ˆç­”æ¡ˆå…¬å¼å°±æ˜¯<img src="https://latex.codecogs.com/svg.image?6\times&space;4^{2^k-2}" title="6\times 4^{2^k-2}" />  
  
æ­¤æ—¶kä¸è¿‡60æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¿…è¦ç”¨å¿«é€Ÿå¹‚æ±‚æŒ‡æ•°  
å¦‚æœéè¦ç”¨çš„è¯ï¼Œæ¨¡æ•°è¦é€‰æ‹©<img src="https://latex.codecogs.com/svg.image?10^9&plus;6" title="10^9+6" />ï¼Œå› ä¸ºæ ¹æ®æ¬§æ‹‰å®šç†ï¼ŒæŒ‡æ•°å–æ¨¡æ—¶åœ¨<img src="https://latex.codecogs.com/svg.image?gcd(up,&space;mod)=1" title="gcd(up, mod)=1" />æ—¶è¦å–<img src="https://latex.codecogs.com/svg.image?\phi(mod)" title="\phi(mod)" />

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 1e9 + 7;

inline ll ksm ( ll a, ll b ) {
	ll res = 1;
	while ( b ) {
		if ( b & 1 ) res = res * a % mod;
		a = a * a % mod;
		b >>= 1;
	}
	return res;
}

int main () {
	ll n; cin >> n;
	cout << 6 * ksm(4, (1ll << n) - 2) % mod << endl;
        return 0;
}
```

<hr>

### CodeForces1644D_CrossColoring

#### ğŸ”—
<a href="https://codeforces.com/contest/1644/problem/D"><img src="https://img-blog.csdnimg.cn/e9a42398e1094cf1815b59ef9ee1d3ab.png"></a>

#### ğŸ’¡
è¿™ä¸ªæ˜¯è¦èƒ½å¯¹ç»“æœè¿›è¡Œåˆ†åŒºå†ç»„åˆ  
æ±‚å‡ºæˆ‘ä»¬å¯ä»¥å‘ä¸‹ç§»åŠ¨çš„æ¬¡æ•° `can_dwn` å’Œå¯ä»¥å‘å³ç§»åŠ¨çš„æ¬¡æ•° `can_rgt`  

é¦–å…ˆæˆ‘ä»¬è¦æ‰¾åˆ°çœŸæ­£å¯ä»¥ç§»åŠ¨çš„éƒ¨åˆ†  
å³ $s[i]!=s[i+1]$ çš„ä½ç½®ï¼ˆç¬¬ä¸€ä¸ªæ‹è§’  
å…ˆæ±‚å‡ºå½»åº•åŒ…å«ç¬¬ä¸€ä¸ªæ‹è§’ä¹‹åçš„è·¯å¾„çš„è¡Œæ•° `r` å’Œåˆ—æ•° `c`  
é‚£ä¹ˆ  
<b>ç¬¬ä¸€ä¸ªéƒ¨åˆ†</b>æ˜¯æˆ‘ä»¬ä¸€ç›´å‘å³ç§»åŠ¨å¯ä»¥å¤šè¦†ç›–çš„é¢ç§¯ï¼š$can\_rgt\times c$  
<b>ç¬¬äºŒä¸ªéƒ¨åˆ†</b>æ˜¯æˆ‘ä»¬ä¸€ç›´å‘ä¸‹ç§»åŠ¨å¯ä»¥å¤šè¦†ç›–çš„é¢ç§¯ï¼š$can\_dwn\times r$  
<b>ç¬¬ä¸‰ä¸ªéƒ¨åˆ†</b>æ˜¯æˆ‘ä»¬å¼€å§‹æ—¶è¦†ç›–çš„é¢ç§¯ï¼š$s.size()+1$  
<b>ç¬¬å››ä¸ªéƒ¨åˆ†</b>æ˜¯æˆ‘ä»¬å³ä¸‹è§’çš„é¢ç§¯ï¼š$can\_dwn\times can\_rgt$  

å°†è¿™å››éƒ¨åˆ†åŠ åœ¨ä¸€èµ·å³å¯  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline void Solve () {
        int n; cin >> n; n --;
        string s; cin >> s;
        ll rgt = 0, dwn = 0;
        for ( int i = 0; i < s.size(); i ++ ) {
                rgt += s[i] == 'R';
                dwn += s[i] == 'D';
        }
        ll canr = n - rgt;
        ll cand = n - dwn;
 
        string tmp = s; sort ( tmp.begin(), tmp.end() );
        if (tmp[0] == tmp.back()) {
                cout << n + 1 << endl;
                return;
        }
 
        int id = 0;
        for ( int i = 0; i < s.size(); i ++ ) {
                if ( s[i] != s[i + 1] ) {
                        id = i;
                        break;
                }
        }
        rgt = dwn = 1;
        for ( int i = id + 1; i < s.size(); i ++ ) rgt += s[i] == 'R', dwn += s[i] == 'D';
 
 
        ll dwn_num = rgt * cand;
        ll rgt_num = dwn * canr;
        cout << canr * cand + s.size() + 1 + dwn_num + rgt_num << endl;
}
```
<hr>

### CodeForces1649E_TylerAndStrings

#### ğŸ”—
<a href="https://codeforces.com/contest/1649/problem/E">![20220308115240](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220308115240.png)</a>

#### ğŸ’¡
è€ƒè™‘ä¸€ä¸ªæ²¡æœ‰ä»»ä½•é™åˆ¶çš„æƒ…å†µ  
è‹¥å­˜åœ¨ $cnt[i]$ ä¸ª $i$ ï¼Œæ„é€ å‡ºä¸åŒçš„æ•°åˆ—çš„æ–¹æ¡ˆæ•° $=\frac{(\sum\limits_{i=1}^Ncnt[i])!}{\prod\limits_{i=1}^Ncnt[i]!}$  
è¿™é‡Œæˆ‘ä»¬è¦è®©å­—å…¸åº $a<b$  
é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´å¿…é¡»è¦å«ä¸€ä¸²ç›¸åŒçš„å‰ç¼€ï¼Œç„¶åå¯¹äºç¬¬ä¸€ä¸ªéå‰ç¼€çš„ä½ç½®ï¼Œè®© $a[i]<b[i]$  
æšä¸¾ä»ç¬¬ $i$ ä¸ªä¸ºç¬¬ä¸€ä¸ªéåŒå‰ç¼€çš„ä½ç½®  
- å‰é¢ç”±äºç›¸åŒï¼Œæ–¹æ¡ˆæ•°ä¸º $1$ 
- ç¬¬ $i$ ä¸ªä½ç½®å¯ä»¥é€‰çš„æ•°çš„ä¸ªæ•°ä¸ºå°äº $b[i]$ çš„æ•°çš„ä¸ªæ•° 
- åé¢å¯ä»¥éšæ„æ’åˆ—ï¼Œä¸º $(n-i)!$
- æœ€åè¦é™¤ $\prod\limits_{i=1}^Ncnt[i]!$

è€ƒè™‘ä¸€ä¸ªé€’è¿›çš„è®°å½•ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢æ¯æ¬¡æˆ‘ä»¬è¦é‡æ–°å¯¹æ¯ä¸€ä¸ªæ•°ç®— $\prod\limits_{i=1}^Ncnt[i]!$ ä¸ $\sum\limits_{j=1}^{b[i]-1}cnt[j]$  

$ifac,fac$ éƒ½å¯ä»¥æå‰é¢„å¤„ç†  
å‰è€…å¯ä»¥ç»´æŠ¤ä¸€ä¸ª $div\_permutation=\frac{1}{\prod\limits_{i=1}^Ncnt[i]!}$ ï¼Œæ¯æ¬¡ä½¿ $cnt[b[i]]-1$ æ—¶æ„å‘³ç€è¦å°‘é™¤ä¸€ä¸ª $cnt[b[i]]$ ï¼Œé‚£ä¹ˆè®© $div\_permutation\times cnt[b[i]]$ å³å¯  
åè€…å¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„å»è®°å½•  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 2e5 + 10;
const int mod = 998244353;
struct modint{ /*.....*/ };
# define mi modint

int n, m;
int a[N], b[N];
int cnt[N];
 
int t[N];
inline int lowbit ( int x ) { return x & -x; }
inline void Update ( int x, int c ) {
        while ( x < N ) t[x] += c, x += lowbit(x);
}
inline mi Query ( int x ) {
        mi res = 0;
        while ( x > 0 ) res += t[x], x -= lowbit(x);
        return res;
}
 
mi fac[N], ifac[N];
 
int main () {
        fac[0] = ifac[0] = 1;
        for ( int i = 1; i < N; i ++ ) fac[i] = fac[i - 1] * i, ifac[i] = ifac[i - 1] / i;
 
 
        scanf("%d%d", &n, &m);
        for ( int i = 1; i <= n; i ++ ) scanf("%d", &a[i]), cnt[a[i]] ++, Update(a[i], 1);
        for ( int i = 1; i <= n; i ++ ) scanf("%d", &b[i]);
 
        mi div_permutation = 1;
        for ( int i = 1; i < N; i ++ ) div_permutation *= ifac[cnt[i]];
 
        mi res = 0;
        bool flag = true;
        for ( int i = 1; i <= min(n, m); i ++ ) {
                res += Query(b[i] - 1) * fac[n - i] * div_permutation;
                div_permutation *= cnt[b[i]];
                cnt[b[i]] --;
 
                if ( cnt[b[i]] < 0 ) {
                        flag = false;
                        break;
                }
 
                Update(b[i], -1);
        }       
        if ( flag && n < m ) res += 1;
 
        printf("%d", res);
}
```
<hr>

### CodeForces1699C_TheThirdProblem

#### ğŸ”—
<a href="https://codeforces.com/contest/1699/problem/C">![20220705103135](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220705103135.png)</a>

#### ğŸ’¡
é¦–å…ˆ $0ã€1$ çš„ä½ç½®ä¸€å®šæ˜¯å›ºå®šçš„ï¼Œå› ä¸ºè¦é€šè¿‡ $0ã€1$ çš„ $[l,r]$ ç¡®å®šå‡ºæ¥ $mex=2$   
æ‰€ä»¥å¯ä»¥å¾€æ•°å€¼ä» $1,2,3,4,5,...$ è€ƒè™‘çš„æ–¹å¼ç€æ‰‹  
è€ƒè™‘è¿™æ ·çš„åºåˆ— $[0,2,3,4,1]$ ï¼Œå…¶ä¸­å¯¹äº $x\in\{2,3,4\}$ æ€ä¹ˆæ‘†éƒ½ä¸ä¼šå½±å“ $[l=1,r=5]$ ä¹Ÿä¸ä¼šå½±å“ $1$ åˆ° $x$ å’Œ $0$ åˆ° $x$ å½¢æˆçš„ $mex[l,r]$ ï¼Œå› ä¸ºç¨³å®šä¸Šå‡ $mex$ çš„åŒºé—´å·²ç»å›ºå®šäº†ï¼Œé‡Œé¢çš„æ•°å€¼ä¸ç®¡æ€ä¹ˆæ‘†éƒ½ä¸ä¼šå½±å“è¿™ä¸ª $mex[l,r]$     
è€Œå¦‚æœè€ƒè™‘ $[0,3,4,1,2]$ ï¼Œç”±äº $2$ ä¼šè®© $[l,r]$ å‘å¤–æ›´æ–°ï¼Œæ‰€ä»¥ç”± $0,1,2$ å›ºå®šçš„åŒºé—´ $[l=1,r=5]$ æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆ $2$ çš„ä½ç½®ä¹Ÿæ˜¯å›ºå®šçš„    
  
åœ¨å¾€ä¸ŠåŒç†ï¼Œå¾—åˆ°è¿™æ ·ä¸€ä¸ªæ€§è´¨ï¼š  
å¦‚æœå¯¹äºå½“å‰æ‰«æçš„ $x$ åœ¨ $[l,r]$ å†…ï¼Œåˆ™ $[l,r]$ å†…çš„ç©ºä½éƒ½å¯ä»¥ä¾› $x$ é€‰æ‹©  
å¦‚æœå¯¹äºå½“å‰æ‰«æçš„ $x$ ä¸åœ¨ $[l,r]$ å†…ï¼Œåˆ™ $x$ æ˜¯å›ºå®šçš„ï¼ŒåŒæ—¶å‘å¤–æ‰©å¼  $[l,r]$   
ç”¨è¿™ä¸ªæ€§è´¨æ±‚è§£å³å¯    


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline void Solve () {
        int n; cin >> n;
        int l, r;
        vector<int> id(n);
        vector<int> a(n); for (int i = 0; i < n; i ++) {
                cin >> a[i];
                id[a[i]] = i;
                if (!a[i]) l = r = i;
        }
        ll res = 1;
        for (int i = 1; i < n; i ++) {
                if (id[i] < l || id[i] > r) l = min(l, id[i]), r = max(r, id[i]);
                else res = res * (1ll * r - l + 1 - i) % mod;
        }
        cout << res << endl;
}
```
<hr>

### HDU2021å¤šæ ¡7D_LinkWithBalls 

#### ğŸ”—
<a href="https://vjudge.net/contest/461347#problem/D">![20221113230923](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20221113230923.png)</a>

#### ğŸ’¡
ä¸¤æ­¥éƒ½èµ°åˆ°æˆ‘æƒ³è±¡ä¸åˆ°çš„åœ°æ–¹...  
  
ä¸¤ä¸ªéƒ½æœ‰é™åˆ¶ï¼Œå³å¥‡æ•° $2x-1$ è¦æ±‚æ˜¯é€‰ $x$ çš„å€æ•°ï¼Œå¶æ•° $2x$ è¦é€‰ä¸è¶…è¿‡ $x$  
è€ƒè™‘é™åˆ¶å’Œé™åˆ¶å–å¹¶é›†èƒ½å¦å˜å¾—æ²¡æœ‰é™åˆ¶ï¼Œå‘ç°å°†é€‰ $x$ çš„å€æ•°å’Œä¸è¶…è¿‡ $x-1$ çš„ä¸¤ä¸ªå—åˆå¹¶åˆ°ä¸€ä¸ªå—ï¼Œåˆ™å¯¹äºè¿™ä¸ªå—æ˜¯ä»»é€‰ä»»æ„æ•°é‡çš„  
åˆå¹¶çš„å—ä¸ºï¼š$1,(2,3),(4,5),...,(2n-2,2n-1),2n$  
å‰ $n$ ä¸ªéƒ½æ˜¯ä»»é€‰ï¼Œæœ€åä¸€ä¸ªå—æ˜¯å¯ä»¥é€‰ä¸è¶…è¿‡ $n$ ä¸ª  
é‚£ä¹ˆé¦–å…ˆæœ‰ä¸€ä¸ªå¼å­å°±æ˜¯æšä¸¾æœ€åä¸€ä¸ªå—é€‰ $i$ ä¸ªï¼Œç„¶åå‰ $m-i$ ä¸ªç›¸åŒçš„ä¸œè¥¿åˆ†é…è¿› $n$ ä¸ªä¸åŒçš„å—å†…  
å³ $\sum\limits_{i=0}^{min(n,m)}C_{m-i+n-1}^{n-1}$  
  
è¿™ä¸ªå¼å­æ—¶é—´å¤æ‚åº¦è¿‡ä¸å»ï¼Œéœ€è¦ä¼˜åŒ–  
çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªæ€»é‡è¿ç»­çš„æ±‚å’Œ  
åœ¨ç»„åˆæ•°çš„æ¨è¾‰ä¸‰è§’æ±‚è§£é‡Œé¢ï¼Œ$C_{n-1}^{m-1}=C_n^m-C_{n-1}^m$ ä¹Ÿæ˜¯ä¸€ä¸ªè¿ç»­çš„ä¸œè¥¿ï¼Œæ‹¿è¿™ä¸ªå¥—ä¸€ä¸ªåŸºç¡€çš„å¼å­çœ‹çœ‹  
$C_{n-1}^{m-1}+C_{n-2}^{m-2}=C_n^m-C_{n-1}^m+C_{n-1}^m-C_{n-2}^m=C_n^m-C_{n-2}^m$  
è€Œæ¨çš„åŸå¼ä¸º $C_{m+n-1}^{n-1}+C_{m+n-2-1}^{n-1}+...+C_{m+n-min(n,m)-1}^{n-1}$  
å°±å¯ä»¥è¿›è¡ŒåŒ–ç®€ä¸º $C_{m+n}^n-C_{m+n-min(n,m)-1}^n$  
æœ€ç»ˆå¼å­å·²å‡ºï¼Œ$O(1)$ ç®—å³å¯   

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 1e9 + 7;
const int N = 2e6 + 10;
inline int ksm (int a, int b) {
    int res = 1;
    while (b) {
        if (b & 1) res = (ll)res * a % mod;
        a = (ll)a * a % mod;
        b >>= 1;
    }
    return res;
}
inline int inv (int x) {return ksm(x, mod - 2);}

int f[N], ivf[N];
inline int C (int n, int m) {
    if (n < m) return 0;
    return (ll)f[n] * ivf[n - m] % mod * ivf[m] % mod;
}

int main () {
    f[0] = 1;
    for (int i = 1; i < N; i ++) f[i] = (ll)f[i - 1] * i % mod;
    ivf[N - 1] = inv(f[N - 1]);
    for (int i = N - 2; i >= 0; i --) ivf[i] = (ll)ivf[i + 1] * (i + 1) % mod;

    int t; scanf("%d", &t); while (t --) {
        int n, m; scanf("%d%d", &n, &m);
        printf("%d\n", (C(m + n, n) - C(m - min(n, m) + n - 1, n) + mod) % mod);
    }
}
```
<hr>


### HDU2021å¤šæ ¡8E_SeparatedNumber 

#### ğŸ”—
<a href="https://vjudge.net/contest/461348#problem/E">![20221113230653](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20221113230653.png)</a>

#### ğŸ’¡
ä¸€å…±è¦æ”¾ç½®ä¸è¶…è¿‡ $k-1$ å—éš”æ¿  
é¦–å…ˆæ ¹æ®ç»å…¸ç»„åˆæ•°å¥—è·¯è´¡çŒ®æ¬¡æ•°ï¼Œæˆ‘ä»¬æ±‚ $a_i$ ä¹˜ $10^j$ æ—¶çš„è´¡çŒ®  
å¦‚æœ $i+j=n$ ï¼Œé‚£ä¹ˆ $i+j$ çš„åé¢æ”¾éš”æ¿æ˜¯æ­£å¸¸çš„ï¼Œæ•…æœ€å¤šè¿˜å¯ä»¥æ”¾ $k-1$ å—ï¼Œä¸€å…±æœ‰ $n-j-1$ ä¸ªç©º  
å¦‚æœ $i+j<n$ ï¼Œæœ€å¤šè¿˜èƒ½æ”¾ $k-2$ å—ï¼Œæœ‰ $n-j-1$ ä¸ªç©º  
å…¬å¼å³ä¸º $\sum\limits_{i=1}^na_i\sum\limits_{j=0}^{n-i}10^j\sum\limits_{\alpha=0}^{k-1-[j\neq n-i]}C_{n-j-1-[j\neq n-i]}^{\alpha}$    
æ‹†ä¸€ä¸‹å˜æˆ $\sum\limits_{i=1}^na_i\left\{\begin{aligned}\sum\limits_{j=0}^{n-i-1}10^jF_{n-j-2}^{k-2}\\10^{n-i}F_{n-j-1}^{k-1}\end{aligned}\right.$
ç”±äºç»„åˆæ•°æ˜¯é¢„å¤„ç†ï¼Œé‚£ä¹ˆåé¢è¿™ä¸€ä¸ªçœ‹ç€åƒå‰ç¼€å’Œçš„ä¹Ÿé¢„å¤„ç†  
ä»¤ $F_n^m=\sum\limits_{i=0}^mC_n^i$  
$F_n^m=F_n^{m-1}+C_n^m$ ä¸” $C_n^m=C_{n-1}^{m-1}+C_{n-1}^m$   
æ¨åˆ° $\sum$ é‡Œé¢ï¼Œç”±äºå‰ç¼€ä¸­é™¤äº†è¯¥ä½ç½®ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ç”¨äº†ä¸¤æ¬¡ï¼Œæ•… $F_n^m=2F_{n-1}^m-C_{n-1}^m$  
è¿™æ ·æ ¹æ®ä¸Šé¢çš„å¼å­æˆ‘ä»¬åªéœ€è¦é¢„å¤„ç†å‡º $F_{[]}^{k-1}$ å’Œ $F_{[]}^{k-2}$ å³å¯  
é‚£ä¹ˆåœ¨æ±‚çš„æ—¶å€™è¿˜æœ‰ä¸€ä¸ªå›°éš¾å°±æ˜¯åœ¨ç¬¬ä¸€ç±»æ±‚è§£é‡Œé¢è¿˜æœ‰ä¸€ä¸ªç´¯åŠ ç¬¦å·  
å‘ç°åœ¨å€’ç€æ¨çš„æ—¶å€™ $n-i-1$ æ˜¯é€’å¢çš„ï¼Œä¸”ç¬¬ $i$ é¡¹åªæ¯”ç¬¬ $i+1$ é¡¹å¤šäº† $10^{n-i-1}F_{n-(n-i-1)-2}^{k-2}$ ï¼Œåˆ«çš„éƒ½æ²¡å˜ï¼Œäºæ˜¯ç¬¬ä¸€ç±»å¯ä»¥å€’ç€æ±‚ç„¶åä¸æ–­ç´¯åŠ ä¸Šæ–°å¢çš„å€¼ï¼Œå¯ä»¥è§†ä½œä¸€ä¸ªåç¼€  
ç¬¬äºŒç±»å°±ç›´æ¥ç®—å³å¯  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;
inline int ksm (int a, int b) {
    int res = 1;
    while (b) {
        if (b & 1) res = (ll)res * a % mod;
        a = (ll)a * a % mod;
        b >>= 1;
    }
    return res;
}
inline int inv (int x) {return ksm(x, mod - 2);}

const int N = 1e6 + 10;

int f[N], ivf[N];
inline int C (int n, int m) {
    if (n < m) return 0;
    return (ll)f[n] * ivf[m] % mod * ivf[n - m] % mod;
}

char s[N];
int a[N];

int Fkd1[N], Fkd2[N];
int pw10[N];

inline void Solve () {
    int k; scanf("%d", &k);
    scanf("%s", s + 1);
    int n = strlen(s + 1);
    for (int i = 1; i <= n; i ++) a[i] = s[i] - '0';

    if (k == 1) {
        int res = 0;
        for (int i = 1; i <= n; i ++) res = ((ll)res * 10 % mod + a[i]) % mod;
        printf("%d\n", res);
        return;
    }

    Fkd1[0] = Fkd2[0] = 1;
    for (int i = 1; i < N; i ++) 
        Fkd1[i] = (Fkd1[i - 1] * 2 % mod - C(i - 1, k - 1) + mod) % mod,
        Fkd2[i] = (Fkd2[i - 1] * 2 % mod - C(i - 1, k - 2) + mod) % mod;
    
    int sum_fkd2 = 0;
    int res = 0;
    for (int i = n; i >= 1; i --) {
        if (n - i - 1 >= 0) {
            (sum_fkd2 += (ll)pw10[n - i - 1] * Fkd2[n - (n - i - 1) - 2] % mod) %= mod;
        }
        int num = ((ll)pw10[n - i] * Fkd1[n - (n - i) - 1] % mod + sum_fkd2) % mod;
        (res += (ll)a[i] * num % mod) %= mod;
    }
    printf("%d\n", res);
}


int main () {
    f[0] = 1;
    for (int i = 1; i < N; i ++) f[i] = (ll)f[i - 1] * i % mod;
    ivf[N - 1] = inv(f[N - 1]);
    for (int i = N - 2; i >= 0; i --) ivf[i] = (ll)ivf[i + 1] * (i + 1) % mod;
    pw10[0] = 1;
    for (int i = 1; i < N; i ++) pw10[i] = (ll)pw10[i - 1] * 10 % mod;

    int cass; scanf("%d", &cass); while (cass --) {
        Solve();
    }
}
```
<hr>


### ICPC2018å—äº¬ç«™J_PrimeGame

#### ğŸ”—
<a href="https://codeforces.com/gym/101981/attachments">![20220924135831](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220924135831.png)</a>

#### ğŸ’¡
åˆšæ‹¿åˆ°è¿™ä¸ªé¢˜æ˜¯æƒ³ç€æ€ä¹ˆå»ä¼˜åŒ–å¼å­ï¼Œåœ¨æƒ³ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Œä½†æ˜¯åŒºé—´é—®é¢˜çš„æ—¶å€™å°±å¾ˆéš¾çœ‹ä¸€ä¸ªåŒºé—´æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ•°ï¼Œè¿™æ ·çš„è¯è¿˜è¦å†å¼€ä¸€ä¸ªå¤æ‚åº¦  
çœ‹ä¸€ä¸‹é—®çš„æ˜¯ä»€ä¹ˆï¼Œâ€œå¯¹äºæ‰€æœ‰åŒºé—´ï¼Œå‡ºç°çš„ä¸åŒè´¨å› æ•°å’Œâ€ï¼ŒåŠ å’Œæ˜¯ä»¥ä¸€ä¸ªè´¨å› æ•°å‡ºæ²¡å‡ºç°ä¸ºå•ä½çš„ï¼Œé‚£å°±åˆ†å¼€è€ƒè™‘è´¨å› æ•°ï¼Œç´¯åŠ æ¯ä¸€ä¸ªè´¨å› æ•°çš„è´¡çŒ®ï¼ˆç»å…¸ç»„åˆå¥—è·¯  
é¦–å…ˆå°†æ‰€æœ‰è´¨æ•°å‡ºç°çš„æ‰€æœ‰ä½ç½®ç»Ÿè®¡ä¸€é  
å¯¹äºè´¨æ•° $p$ çš„å‡ºç°ä½ç½®ï¼š$a,b,c,d$  
å®ƒæ‰€è´¡çŒ®çš„æ¬¡æ•°ä¸º $a\times(b-a)+(b-a)\times(c-b)+(d-c)\times(n+1-d)$  
æŒ‰è¿™ç§æ–¹å¼ä¸€ä¸ªè´¨æ•°è´¡çŒ®çš„æ¬¡æ•°ä¸º $a_0=0,a_{sz+1}=n+1,\sum\limits_{i=1}^{sz}(a_i-a_{i-1})(a_{i+1}-a_i)$  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e6 + 10;
bool ntp[N];
int mnp[N];
vector<int> p;
vector<int> id[N];

int main () {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    ntp[0] = ntp[1] = 1;
    for (int i = 2; i < N; i ++) {
        if (!ntp[i]) p.push_back(i), mnp[i] = i;
        for (int j = 0; j < p.size() && 1ll * i * p[j] < N; j ++) {
            ntp[i * p[j]] = 1;
            mnp[i * p[j]] = p[j];
            if (i % p[j] == 0) break;
        }
    }

    for (int i = 2; i < N; i ++) id[i].push_back(0);
    int n; cin >> n;
    for (int i = 1; i <= n; i ++) {
        int x; cin >> x;
        while (x > 1) {
            id[mnp[x]].push_back(i);
            x /= mnp[x];
        } 
    } 
    for (int i = 2; i < N; i ++) id[i].push_back(n + 1);

    ll res = 0;
    for (int i = 2; i < N; i ++) {
        id[i].erase(unique(id[i].begin(), id[i].end()), id[i].end());
        for (int j = 1; j + 1 < id[i].size(); j ++) {
            res += 1ll * id[i][j] * (id[i][j + 1] - id[i][j]);
        }
    }
    cout << res << endl;
}
```
<hr>


### ICPC2020ä¸Šæµ·ç«™G_Fibonacci

#### ğŸ”—
<a href="https://codeforces.com/gym/102900/problem/G"><img src="https://img-blog.csdnimg.cn/cfad2ab416f3422e86ca29dcbcd0cc6b.png"></a>

#### ğŸ’¡
fibonacciæ•°åˆ—æ¯ç¬¬ä¸‰ä¸ªæ•°ä¸€å®šæ˜¯å¶æ•°  
é‚£ä¹ˆ `n/3` æ±‚ä¸€ä¸‹å¶æ•°çš„ä¸ªæ•° `eve` 
å¶æ•°å’Œæ‰€æœ‰æ•°ç›¸ä¹˜éƒ½æ˜¯å¶æ•° `res = eve * n` ä½†æ˜¯ä¸èƒ½å’Œè‡ªå·±ç»„åˆ `res -= eve`  
å¶æ•°å†…éƒ¨ä¸¤ä¸¤ç»„åˆä¹Ÿå¤šåŠ äº†ä¸€æ¬¡ï¼Œè¦å‡å» `res -= eve * (eve - 1) / 2`  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
int main () {
        ios::sync_with_stdio(false);

        ll n; cin >> n;
        ll eve = n / 3;
        ll res = eve * n - eve;
        res -= eve * (eve - 1) / 2;
        cout << res << endl;
}
```

<hr>

### NamomoCamp2022æ˜¥å­£div1æ¯æ—¥ä¸€é¢˜_æ‹†æ‹†

#### ğŸ”—
<a href="http://oj.daimayuan.top/problem/611">![20220324221847](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220324221847.png)</a>

#### ğŸ’¡
æˆ‘ä»¬åˆ†è§£è´¨å› å­  
$$x=p_1^{a_1}\times p_2^{a_2}\times\dots\times p_k^{a_k}$$  
ç”±äºæ¯ä¸ªå› æ•°ä¸åŒä¸”ç‹¬ç«‹ï¼Œå¯¹è¿™ä¸ªé—®é¢˜è½¬åŒ–ä¸€ä¸‹å…¶å®ä¹Ÿå°±æ˜¯å°† $a_i$ ä¸ª $p_i$ æ”¾å…¥ $y$ ä¸ªç›’å­å†…ï¼Œçƒç›’æ¨¡å‹ä¸‹è¡¨è¾¾å¼ä¸º $\binom{a_i+y-1}{y-1}$  
åˆ©ç”¨ä¹˜æ³•åŸç†å¾—åˆ°ç»“æœ  
æ­£æ•°æ˜¯è¦åœ¨ $y$ ä¸­å¶æ•°ä¸ªä½œä¸ºè´Ÿæ•°ï¼Œå³ $2^{y-1}$  
è®©ç»“æœä¹˜ä¸Šè¿™ä¸ªæ•°å³å¯  
  
ä½†æ˜¯è¿™é“é¢˜æ—¶é—´å¡çš„ç´§ï¼Œè€ƒè™‘ä¼˜åŒ–ï¼ˆçœ‹åˆ°äº†ä¸€å †é»‘ç§‘æŠ€  
::: tip å¿«é€Ÿæ‹†åˆ†è´¨å› æ•°
ä»¤ `npt[i]` è¡¨ç¤ºç­›å‡ºæ¥ $i$ ä¸æ˜¯è´¨æ•°çš„æœ€å°è´¨å› æ•°  
ç„¶åè®© $x$ ä¸æ–­ $x/ntp[x]$ å³å¯å¾—åˆ°æ‰€æœ‰çš„è´¨å› æ•°  
```cpp
int ntp[N], prime[N], idx;
inline void Sieve () {
        ntp[1] = 1;
        for ( int i = 2; i < N; i ++ ) {
                if ( !ntp[i] ) prime[idx ++] = i, ntp[i] = i;
                for ( int j = 0; j < idx && 1ll * i * prime[j] < N; j ++ ) {
                        if ( !ntp[i * prime[j]] ) {
                                ntp[i * prime[j]] = prime[j];
                        }
                        if ( i % prime[j] == 0 ) break;
                }
        }
}

vector<int> table; // x çš„è´¨å› æ•°çš„æŒ‡æ•°è¡¨
int lst = ntp[x], t = 1;
x /= ntp[x];
while ( ntp[x] > 1 ) {
        if ( ntp[x] == lst ) {
                t ++;
        } else {
                table.push_back(t);
                lst = ntp[x];
                t = 1;
        }
        x /= ntp[x];
}
if ( lst > 1 ) table.push_back(t);
```
:::

::: tip å¿«é€Ÿæ±‚é˜¶ä¹˜é€†å…ƒ
åˆ©ç”¨å¤§é˜¶ä¹˜åšåˆ†æ¯ï¼Œç„¶åå‘å‰åŒ–ç®€
```cpp
ivf[n] = inv(f[n]);
for ( int i = n - 1; i >= 0; i -- ) ivf[i] = ivf[i + 1] * (i + 1) % mod;
```
:::

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 2e6 + 10;
const int mod = 1e9 + 7;

inline ll ksm ( ll a, ll b ) { ll res = 1; while ( b ) { if ( b & 1 ) res = res * a % mod; a = a * a % mod; b >>= 1; } return res; }
inline ll inv ( ll x ) { return ksm(x, mod - 2); }

namespace Number {
        int ntp[N], prime[N], idx;
        inline void Sieve () {
                ntp[1] = 1;
                for ( int i = 2; i < N; i ++ ) {
                        if ( !ntp[i] ) prime[idx ++] = i, ntp[i] = i;
                        for ( int j = 0; j < idx && 1ll * i * prime[j] < N; j ++ ) {
                                if ( !ntp[i * prime[j]] ) {
                                        ntp[i * prime[j]] = prime[j];
                                }
                                if ( i % prime[j] == 0 ) break;
                        }
                }
        }
        ll f[N], ivf[N];
        inline void get_F () {
                f[0] = 1;
                for ( int i = 1; i < N; i ++ ) f[i] = f[i - 1] * i % mod;
                ivf[N - 1] = inv(f[N - 1]);
                for ( int i = N - 2; i >= 0; i -- ) ivf[i] = ivf[i + 1] * (i + 1) % mod;
        }
} using namespace Number;

inline ll C ( int n, int m ) {
        return f[n] * ivf[m] % mod * ivf[n - m] % mod;
}

inline void Solve () {
        int x, y; cin >> x >> y;

        vector<int> table;
        int lst = ntp[x], t = 1;
        x /= ntp[x];
        while ( ntp[x] > 1 ) {
                if ( ntp[x] == lst ) {
                        t ++;
                } else {
                        table.push_back(t);
                        lst = ntp[x];
                        t = 1;
                }
                x /= ntp[x];
        }
        if ( lst > 1 ) table.push_back(t);

        ll res = 1;
        for ( int i : table ) res = res * C(i + y - 1, y - 1) % mod;
        res = res * ksm(2, y - 1) % mod;
        cout << res << "\n";
}

int main () {
        cin.tie(0)->sync_with_stdio(0);
        cin.exceptions(cin.failbit);

        Sieve(); get_F();

        int cass; cin >> cass; while ( cass -- ) {
                Solve ();
        }
}
```
<hr>


### POJ3734_Blocks

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/24710/D"><img src="https://i.loli.net/2021/11/25/t2savw1RVIrTjGd.png"></a>

#### ğŸ’¡
é¦–å…ˆç”Ÿæˆå‡½æ•°æƒ³ä¸€æ³¢ï¼ŒæŠŠè¿™å››ä¸ªç –çš„ç”Ÿæˆå‡½æ•°ä¹˜èµ·æ¥å¾—åˆ°  <img src="https://latex.codecogs.com/svg.image?\inline&space;\frac{1}{(1-x)^4(1+x)^2}" title="\inline \frac{1}{(1-x)^4(1+x)^2}" />  å‘ç°å•¥ä¹Ÿä¸å•¥ï¼Œå‘Šè¾  
ç»„åˆæ•°æƒ³ä¸€æ³¢  
å…¶å®å°±æ˜¯åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸€å®šæ˜¯å¶æ•°ï¼Œä¸€éƒ¨åˆ†æ— æ‰€è°“ï¼Œå¶æ•°é‚£ä¸€éƒ¨åˆ†åˆ†æˆä¸¤ä»½å¶æ•°ï¼Œæ— æ‰€è°“é‚£ä¸€éƒ¨åˆ†åˆ†æˆä¸¤ä»½æ— æ‰€è°“  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;n" title="\inline n" />  å—ç –é€‰å¶æ•°ä¸ªæœ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^{n-1}" title="\inline 2^{n-1}" />  ç§ï¼Œé€‰ä»»æ„ä¸ªæœ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^n" title="\inline 2^n" />  ç§  
é‚£ä¹ˆä»è¿™å¶æ•°ä¸ªä¸­é€‰å¶æ•°ä¸ªï¼Œå†ä»å¦å¤–ä»»æ„ä¸ªä¸­é€‰ä»»æ„ä¸ªï¼Œå¾—åˆ°æŸ¿å­  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\sum\limits_{i=0}^{\frac&space;n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})" title="\inline \sum\limits_{i=0}^{\frac n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})" />   
æ³¨æ„åœ¨  <img src="https://latex.codecogs.com/svg.image?\inline&space;i=0" title="\inline i=0" />  æ—¶  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^{i-1}" title="\inline 2^{i-1}" />  å¯èƒ½ä¼šå‡ºé”™ï¼Œæ‰€ä»¥æ‹¿å‡ºæ¥  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}&\sum\limits_{i=0}^{\frac&space;n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})\\=&\sum\limits_{i=2}^{\frac&space;n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})+2^n\\=&2^{n-1}\sum\limits_{i=2}^{\frac&space;n2\times2}\binom{n}{i}+2^n\\=&2^{n-1}\times(2^{n-1}-1)+2^n\end{aligned}" title="\inline \begin{aligned}&\sum\limits_{i=0}^{\frac n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})\\=&\sum\limits_{i=2}^{\frac n2\times2}(\binom{n}{i}\times2^{i-1}\times2^{n-i})+2^n\\=&2^{n-1}\sum\limits_{i=2}^{\frac n2\times2}\binom{n}{i}+2^n\\=&2^{n-1}\times(2^{n-1}-1)+2^n\end{aligned}" />   
  
æˆ‘ä»¬è§£è¿™ä¸ªæŸ¿å­å°±è¡Œäº†  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 10007;

inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}

int main () {
        int cass; cin >> cass; while ( cass -- ) {
               ll n; cin >> n;
               ll two_mi = ksm(2, n - 1);
               cout << (two_mi * (two_mi - 1) % mod + two_mi * 2 % mod) % mod << endl;
        }
}
```

<hr>

## ç”Ÿæˆå‡½æ•°

### æ´›è°·P6078_Sweets

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P6078"><img src="https://i.loli.net/2021/11/25/WNiCvjUeZGQRs69.png"></a>

#### ğŸ’¡
å…ˆæ ¹æ®é¢˜ç›®æ„å»ºç”Ÿæˆå‡½æ•°  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;i:1+x+x^2+...+x^{m_i}" title="\inline i:1+x+x^2+...+x^{m_i}" />   
å°†ç”Ÿæˆå‡½æ•°ä¹˜èµ·æ¥  <img src="https://latex.codecogs.com/svg.image?\inline&space;\prod\limits_{i=1}^n\frac{1-x^{m_i+1}}{1-x}=\frac{\prod\limits_{i=1}^n(1-x(m_i+1))}{(1-x)^n}" title="\inline \prod\limits_{i=1}^n\frac{1-x^{m_i+1}}{1-x}=\frac{\prod\limits_{i=1}^n(1-x(m_i+1))}{(1-x)^n}" />   
ä¸Šé¢çš„å¯ä»¥å˜æˆä¸€ä¸ªå¤šé¡¹å¼  <img src="https://latex.codecogs.com/svg.image?\inline&space;g(x)" title="\inline g(x)" />   
çœ‹ä¸‹é¢çš„   
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}&=(1-x)^{-n}\\&=\sum\limits_{i\ge0}\binom{-n}i(-x)^i\\&=\sum\limits_{i\ge0}\frac{(-n)\times...\times(-n-i+1)}{i!}(-x)^i\\&=\sum\limits_{i\ge0}\frac{n\times...\times(n+i-1)}{i!}x^i\\&=\sum\limits_{i\ge0}\binom{n+i-1}ix^i\end{aligned}" title="\inline \begin{aligned}=(1-x)^{-n}\\=\sum\limits_{i\ge0}\binom{-n}i(-x)^i\\=\sum\limits_{i\ge0}\frac{(-n)\times...\times(-n-i+1)}{i!}(-x)^i\\=\sum\limits_{i\ge0}\frac{n\times...\times(n+i-1)}{i!}x^i\\=\sum\limits_{i\ge0}\binom{n+i-1}ix^i\end{aligned}" />   
åˆå¹¶èµ·æ¥å¾—åˆ°  <img src="https://latex.codecogs.com/svg.image?\inline&space;g(x)\sum\limits_{i\ge0}\binom{n+i-1}ix^i" title="\inline g(x)\sum\limits_{i\ge0}\binom{n+i-1}ix^i" />   
  
å¯¹äº  <img src="https://latex.codecogs.com/svg.image?\inline&space;x^k" title="\inline x^k" />  è¿™ä¸€é¡¹ï¼šï¼ˆç³»æ•°è®¾ç½®ä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;\alpha" title="\inline \alpha" />  )  <img src="https://latex.codecogs.com/svg.image?\inline&space;\alpha&space;x^k\sum\limits_{l\le&space;i+1\le&space;r}\binom{n+i-1}{i}x^i" title="\inline \alpha x^k\sum\limits_{l\le i+1\le r}\binom{n+i-1}{i}x^i" />   
é‚£ä¹ˆè¿™ä¸€é¡¹è´¡çŒ®ä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;\alpha\sum\limits_{i=l-k}^{r-k}\binom{n+i-1}{i}" title="\inline \alpha\sum\limits_{i=l-k}^{r-k}\binom{n+i-1}{i}" />   
ç”±  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{n}{m}=\binom{n}{m-1}+\binom{n-1}{m-1}" title="\inline \binom{n}{m}=\binom{n}{m-1}+\binom{n-1}{m-1}" />  å¯å°†  <img src="https://latex.codecogs.com/svg.image?\inline&space;\sum\limits_{i=l-k}^{r-k}\binom{n+i-1}{i}" title="\inline \sum\limits_{i=l-k}^{r-k}\binom{n+i-1}{i}" />  åŒ–æˆ  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{r-k+n}{r-k}-\binom{l-k+n-1}{l-k-1}" title="\inline \binom{r-k+n}{r-k}-\binom{l-k+n-1}{l-k-1}" />   
å³  <img src="https://latex.codecogs.com/svg.image?\inline&space;\alpha(\binom{r+k-n}{r-k}-\binom{l-k+n-1}{l-k-1})" title="\inline \alpha(\binom{r+k-n}{r-k}-\binom{l-k+n-1}{l-k-1})" />   

é‚£ä¹ˆç­”æ¡ˆä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;\sum\limits_{i=1}^{SZ_g}\alpha_i(\binom{r+k_i-n}{r-k_i}-\binom{l-k_i+n-1}{l-k_i-1})" title="\inline \sum\limits_{i=1}^{SZ_g}\alpha_i(\binom{r+k_i-n}{r-k_i}-\binom{l-k_i+n-1}{l-k_i-1})" />   

å¯¹äºå–æ¨¡ï¼Œè§‚å¯Ÿ  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{x+n}{x}=\frac{(n+1)\times...\times(n+x)}{n!}" title="\inline \binom{x+n}{x}=\frac{(n+1)\times...\times(n+x)}{n!}" />   
å°†  <img src="https://latex.codecogs.com/svg.image?\inline&space;mod+n!" title="\inline mod+n!" />  ï¼Œå–å®Œæ¨¡æ˜¯æ¯”  <img src="https://latex.codecogs.com/svg.image?\inline&space;n!" title="\inline n!" />  è¦å¤§çš„ï¼Œé‚£ä¹ˆè¿™æ—¶å°±å¯ä»¥ç›´æ¥é™¤  <img src="https://latex.codecogs.com/svg.image?\inline&space;n!" title="\inline n!" />  äº†  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
int n, a, b;
int m[15];
map<int, int> g_mps;
vector<pair<int, int> > g; // first: æŒ‡æ•°ï¼Œsecond: ç³»æ•°

const int mod = 2004;
ll MOD = mod;
ll fac = 1;
inline int C ( int n, int m ) {
        if ( n < m ) return 0;
        ll res = 1;
        for ( int i = n - m + 1; i <= n; i ++ ) res = res * i % MOD;
        return res / fac % mod;
}

int main () {
        cin >> n >> a >> b;
        for ( ll i = 1; i <= n; i ++ ) fac *= i;
        MOD *= fac;

        g_mps[0] = 1;
        for ( int i = 0; i < n; i ++ ) {
                cin >> m[i];
                vector<pair<int, int> > tmps; 
                for ( auto g_mp : g_mps ) {
                        tmps.push_back({g_mp.first, g_mp.second});
                        tmps.push_back({g_mp.first + m[i] + 1, -g_mp.second});
                }
                g_mps.clear();
                for ( auto tmp : tmps ) {
                        g_mps[tmp.first] += tmp.second;
                }
        }
        for ( auto g_mp : g_mps ) g.push_back({g_mp.first, g_mp.second});

        ll res = 0;
        for ( auto i : g ) {
                int k = i.first;
                res = ((res + (ll)i.second * (C(n + b - k, n) - C(n + a - k - 1, n) + mod) % mod) % mod + mod) % mod;
        }
        cout << res << endl;
}
```

<hr>

### ç‰›å®¢NC207746_èƒŒåŒ…

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/24710/A"><img src="https://i.loli.net/2021/11/24/KcP56J1EIiOuRFf.png"></a>

#### ğŸ’¡
æˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªç‰©å“ä¸€ä¸ªç”Ÿæˆå‡½æ•°å¤šé¡¹å¼ï¼ŒåŒæ—¶æ ¹æ®ä¸‹é¢è¿™ä¸ªç»“è®ºå°†ä»–ä»¬åŒ–ç®€     
>å¯¹äºç­‰æ¯”  <img src="https://latex.codecogs.com/svg.image?\inline&space;(x)" title="\inline (x)" />  æ•°åˆ—æ±‚å’Œå…¬å¼ï¼š  <img src="https://latex.codecogs.com/svg.image?\inline&space;\frac{a_0(1-x^n)}{1-x}" title="\inline \frac{a_0(1-x^n)}{1-x}" />   
>å¦‚æœ   <img src="https://latex.codecogs.com/svg.image?\inline&space;(0<x<1)" title="\inline (1\lt&space;x\lt y)" />  
>é‚£ä¹ˆ  <img src="https://latex.codecogs.com/svg.image?\inline&space;1-x^n\approx1" title="\inline 1-x^n\approx1" />   
>æ‰€ä»¥  <img src="https://latex.codecogs.com/svg.image?\inline&space;\frac{a_0(1-x^n)}{1-x}\approx\frac1{x-1}" title="\inline \frac{a_0(1-x^n)}{1-x}\approx\frac1{x-1}" /> 

 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}(1)&1+x&1+x\\(2)&1+x+x^2&\frac{1-x^3}{1-x}\\(3)&1+x+x^2+x^3&\frac{1-x^4}{1-x}\\(4)&1+x^2+x^4+...&\frac{1}{1-x^2}\\(5)&x+x^3+x^5+...&\frac{x}{1-x^2}\\(6)&1+x^4+x^8+...&\frac{1}{1-x^4}\\(7)&1+x&1+x\\(8)&x+x^3+x^6+...&\frac1{1-x^3}\end{aligned}" title="\inline \begin{aligned}(1)&1+x&1+x\\(2)&1+x+x^2&\frac{1-x^3}{1-x}\\(3)&1+x+x^2+x^3&\frac{1-x^4}{1-x}\\(4)&1+x^2+x^4+...&\frac{1}{1-x^2}\\(5)&x+x^3+x^5+...&\frac{x}{1-x^2}\\(6)&1+x^4+x^8+...&\frac{1}{1-x^4}\\(7)&1+x&1+x\\(8)&x+x^3+x^6+...&\frac1{1-x^3}\end{aligned}" />    

å¯¹åé¢çš„æ±‚å’Œå¹¶åŒ–ç®€å¾—åˆ°  <img src="https://latex.codecogs.com/svg.image?\inline&space;g(x)=\frac{x}{(1-x)^4}" title="\inline g(x)=\frac{x}{(1-x)^4}" />   
å±•å¼€å¾—  <img src="https://latex.codecogs.com/svg.image?\inline&space;g(x)=x\times&space;(\frac1{1-x})^4=x(1+x+x^2+x^3+...+x^n)^4" title="\inline g(x)=x\times (\frac1{1-x})^4=x(1+x+x^2+x^3+...+x^n)^4" />   
æ ¹æ®äºŒé¡¹å¼å®šç†å¾—åˆ°æœ€å  <img src="https://latex.codecogs.com/svg.image?\inline&space;x^n" title="\inline x^n" />  çš„ç³»æ•°ä¾¿æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{n+2}{n-1}" title="\inline \binom{n+2}{n-1}" />   
   
é‚£ä¹ˆå°±ç›´æ¥æ±‚  <img src="https://latex.codecogs.com/svg.image?\inline&space;\frac{n\times(n+1)\times(n+2)}{1\times2\times3}" title="\inline \frac{n\times(n+1)\times(n+2)}{1\times2\times3}" />   


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int mod = 1e9 + 7;
inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}
inline ll inv ( ll x ) {
        return ksm ( x, mod - 2 );
}

int main () {
        ll n; cin >> n;
        ll a = n % mod, b = (n + 1) % mod, c = (n + 2) % mod;
        ll d = inv(6);
        cout << a * b % mod * c % mod * d % mod << endl;
}
```

<hr>

### HDUOJ1521_æ’åˆ—ç»„åˆ

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=1521

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define Chivas int main()
#define Regal return 0
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define fir(i, a, n) for (ll i = a; i <= n; i++)
#define rif(i, a, n) for (ll i = a; i >= n; i--)
#define each_cass(cass) for (scanf("%d", &cass); cass; cass--)

using namespace std;

const int maxn = 15;
double c1[maxn], c2[maxn];
ll num[maxn];
ll F[maxn];
ll n, m;

void Factorial(){
    F[0] = 1;
    for (int i = 1; i < maxn; i++)
        F[i] = F[i - 1] * i;
}

void init(){
    mm(c1, 0);
    mm(c2, 0);
    for (int i = 0; i <= num[1]; i++)
        c1[i] = 1.0 / F[i];
}

Chivas{
    Factorial();
    while (scanf("%lld%lld", &n, &m) == 2){
        for (int i = 1; i <= n; i++)
            scanf("%lld", &num[i]);
        init();
        for (int i = 2; i <= n; i++){
            for (int j = 0; j <= m; j++){
                for (int k = 0; k + j <= m && k <= num[i]; k++)
                    c2[j + k] += c1[j] / F[k];
            }
            for (int j = 0; j <= m; j++)
                c1[j] = c2[j], c2[j] = 0;
        }
        printf("%.0f\n", c1[m] * F[m]);
    }
    Regal;
}
```

<hr>

### HDUOJ1028_IgnatiusAndThePrincess3

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=1028

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define fir(i, a, n) for (int i = a; i <= n; i++)
#define rif(i, a, n) for (int i = a; i >= n; i--)
#define each_cass(cass) for (cin >> cass; cass; cass--)

using namespace std;

const int maxn = 200;
int c1[maxn];
int c2[maxn];

void init(){
    for (int i = 0; i < maxn; i++)
        c1[i] = 1, c2[i] = 0;
}

int main(){
    int n;
    while(cin>>n){
        init();
        for (int i = 2; i <= n; i++){//n-1æ¬¡åˆå¹¶
            for (int j = 0; j <= n; j++)//ç¬¬ä¸€ä¸ªæ‹¬å·
                for (int k = 0; k + j <= n; k += i)//ç¬¬äºŒä¸ªæ‹¬å·
                    c2[j + k] += c1[j];
            for (int j = 0; j <= n; j++)//æ›¿æ¢
                c1[j] = c2[j], c2[j] = 0;
        }
        cout << c1[n] << endl;
    }
    return 0;
}
```

<hr>

### HDUOJ1085_HoldingBin-LadenCaptive

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=1085

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define fir(i, a, n) for (ll i = a; i <= n; i++)
#define rif(i, a, n) for (ll i = a; i >= n; i--)
#define each_cass(cass) for (scanf("%d", &cass); cass; cass--)

using namespace std;

const int maxn = 100010;
int kind[4] = {0, 1, 2, 5};
int c1[maxn];
int c2[maxn];
int num[4];
int sum;

void init(){
    mm(c1, 0);
    mm(c2, 0);
    for (int i = 0; i <= sum; i++)
        c1[i] = 1, c2[i] = 0;
}

int main(){
    while (scanf("%d%d%d", &num[1], &num[2], &num[3]) == 3, num[1] || num[2] || num[3]){
        sum = num[1];
        init();
        for (int i = 2; i <= 3; i++){
            for (int j = 0; j <= sum; j++)
                for (int k = 0; k <= num[i] * kind[i]; k += kind[i])
                    c2[j + k] += c1[j];
            sum += num[i] * kind[i];
            for (int j = 0; j <= sum; j++)
                c1[j] = c2[j], c2[j] = 0;
        }
        for (int i = 0; i <= sum + 1; i++){
            if(!c1[i]){
                printf("%d\n", i);
                break;
            }
        }
    }
    return 0;
}

```

<hr>

### HDUOJ1398_SquareCoins

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=1398

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define each_cass(cass) for (cin >> cass; cass; cass--)

using namespace std;

const ll maxn = 1000;
ll c1[maxn];
ll c2[maxn];
ll a[1000];

void init(){
    for (ll i = 0; i < maxn; i++)
        c1[i] = 1, c2[i] = 0;
    for (ll i = 0; i < 1000; i++)
        a[i] = i * i;
}

int main(){
    ll n;
    while(scanf("%d",&n)==1,n){
        init();
        for (ll i = 2; i <= n; i++){
            for (ll j = 0; j <= n; j++)
                for (ll k = 0; k + j <= n; k += a[i])
                    c2[k + j] += c1[j];
            for (ll j = 0; j <= n; j++)
                c1[j] = c2[j], c2[j] = 0;
        }
        printf("%d\n", c1[n]);
    }
    return 0;
}

```

<hr>

### HDUOJ1709_TheBalance

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=1709

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define fir(i, a, n) for (ll i = a; i <= n; i++)
#define rif(i, a, n) for (ll i = a; i >= n; i--)
#define each_cass(cass) for (scanf("%d", &cass); cass; cass--)

using namespace std;

const int maxn = 100005;
int n;
int A[110];
int c1[maxn];
int c2[maxn];

void init(){
    mm(c1, 0);
    mm(c2, 0);
    c1[0] = c1[A[1]] = 1;
}

main(){
    while (scanf("%d", &n) == 1){
        int sum = 0;
        for (int i = 1; i <= n; i++)
            scanf("%d", &A[i]), sum += A[i];
        init();
        for (int i = 2; i <= n; i++){
            for (int j = 0; j <= sum; j++){
                for (int k = 0; k + j <= sum && k <= A[i]; k += A[i])
                    c2[abs(k - j)] += c1[j], c2[k + j] += c1[j];
            }
            for (int j = 0; j <= sum; j++)
                c1[j] = c2[j], c2[j] = 0;
        }

        vector<int> ans;
        for (int i = 0; i <= sum; i++){
            if(!c1[i]){
                ans.push_back(i);
            }
        }
        printf("%lu\n", ans.size());
        for (int i = 0; i < ans.size(); i++)
            printf("%d%c", ans[i], i == ans.size() - 1 ? '\n' : ' ');
    }
        return 0;
}

```

<hr>

### HDUOJ2152_Fruit

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=2152

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define ll long long
#define INF 0x7FFFFFFF
#define Chivas int main()
#define Regal return 0
#define PI acos(-1.0)
#define pb(x) push_back(x)
#define SP system("pause")
#define mm(a, b) memset(a, b, sizeof(a))
#define fir(i, a, n) for (ll i = a; i <= n; i++)
#define rif(i, a, n) for (ll i = a; i >= n; i--)
#define each_cass(cass) for (scanf("%d", &cass); cass; cass--)

using namespace std;

const ll maxn = 1e4 + 10;
ll n, m;
struct fruit{
    ll a;
    ll b;
    void read(){
        scanf("%lld%lld", &a, &b);
    }
} f[110];
ll c1[maxn];
ll c2[maxn];

void init(){
    mm(c1, 0);
    mm(c2, 0);
    for (ll i = f[1].a; i <= f[1].b; i++)
        c1[i] = 1;
}

Chivas{
    while (scanf("%lld%lld", &n, &m) == 2){
        for (ll i = 1; i <= n; i++)
            f[i].read();
        init();
        for (ll i = 2; i <= n; i++){
            for (ll j = 0; j <= m; j++){
                for (ll k = f[i].a; k + j <= m && k <= f[i].b; k++)
                    c2[j + k] += c1[j];
            }
            for (ll j = 0; j <= m; j++)
                c1[j] = c2[j], c2[j] = 0;
        }
        printf("%lld\n", c1[m]);
    }
    Regal;
}

```

<hr>

## å®¹æ–¥åŸç†

### æ´›è°·P1450_ç¡¬å¸è´­ç‰©

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P1450"><img src="https://i.loli.net/2021/11/10/27LQvBmkElueGT6.png"></a>

#### ğŸ’¡
æœ¬é¢˜å°è¯•ç”Ÿæˆå‡½æ•°  <img src="https://latex.codecogs.com/svg.image?\inline&space;10" title="\inline 10" /> åˆ†ï¼Œ  <img src="https://latex.codecogs.com/svg.image?\inline&space;FFT" title="\inline FFT" /> ä¼˜åŒ–è¿˜æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;10" title="\inline 10" /> åˆ†...  
  
çœ‹äº†çœ¼æ—¶é—´ï¼Œå¼€å§‹è€è€å®å®æƒ³èƒŒåŒ…   
ï¼ˆä¸ä¼šå§  <img src="https://latex.codecogs.com/svg.image?\inline&space;O(n)" title="\inline O(n)" /> æ˜¯æé™è€Œä¸”ä¸ä¸€å®šè¿‡ï¼Ÿ  
  
æå‰ç»™å®šçš„  <img src="https://latex.codecogs.com/svg.image?\inline&space;c[0...4]" title="\inline c[0...4]" /> ä¸€å®šæœ‰å…¶ç”¨æ„ï¼Œå…ˆæ‹¿å®Œå…¨èƒŒåŒ…é¢„å¤„ç†ä¸€ä¸‹  <img src="https://latex.codecogs.com/svg.image?\inline&space;dp" title="\inline dp" />  æ•°ç»„  
ä½†æ˜¯è®©å¤šé‡èƒŒåŒ…ï¼Œæˆ‘ä»¬å°±å®¹æ–¥å‡æ‰ä¸åˆæ³•çš„  
å‡è®¾æˆ‘ä»¬æšä¸¾ç¬¬  <img src="https://latex.codecogs.com/svg.image?\inline&space;i" title="\inline i" /> ä¸ªï¼Œæ­¤æ—¶æˆ‘ä»¬å¦‚æœé¢„å…ˆæ‹¿èµ°  <img src="https://latex.codecogs.com/svg.image?\inline&space;d[i]+1" title="\inline d[i]+1" /> ä¸ªï¼Œé‚£ä¹ˆä¹‹åçš„ä»»æ„é€‰æ‹©æ–¹å¼éƒ½æ˜¯ä¸åˆæ³•çš„  
æ­¤æ—¶ä¸åˆæ³•çš„ä¹Ÿå°±æ˜¯å®¹ç§¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;n-c[i]\times&space;(d[i]+1)" title="\inline n-c[i]\times&space;(d[i]+1)" /> çš„èƒŒåŒ…ï¼Œæˆ‘ä»¬å‡å»  <img src="https://latex.codecogs.com/svg.image?\inline&space;dp[n-c[i]*(d[i]+1)]" title="\inline dp[n-c[i]*(d[i]+1)]" />   
å½“ç„¶å› ä¸ºæ˜¯å®¹æ–¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åŠ å›æ¥æå‰ä¸¤ä¸ªä¸åˆæ³•ï¼Œå‡æ‰æå‰ä¸‰ä¸ªä¸åˆæ³•...   
  
äºŒè¿›åˆ¶æšä¸¾ï¼Œè§‚å¯Ÿæ—¶é—´å¤æ‚çš„ï¼Œ  <img src="https://latex.codecogs.com/svg.image?\inline&space;T*2^4" title="\inline T*2^4" /> å¾ˆæ­£å¸¸çš„æ—¶é—´    
  
å¥½å®¶ä¼™ï¼Œå®¹æ–¥æ”¹å®Œå…¨èƒŒåŒ…ä¸ºå¤šé‡èƒŒåŒ…...

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
#include <iostream>

#define ll long long

using namespace std;

const int N = 1e5 + 10;
int c[N], d[N], n;
ll dp[N];

inline void Solve () {
        for ( int i = 0; i < 4; i ++ ) cin >> d[i];
        cin >> n;
        ll res = dp[n];
        for ( int i = 0; i < (1 << 4); i ++ ) { // æšä¸¾æå‰é€‰å“ªäº›ç‰©å“è¶…è¿‡é™åˆ¶
                int cnt = 0; ll cur = 0;
                for ( int j = 0; j < 4; j ++ ) {
                        if ( i & (1 << j) ) {
                                cnt ++;
                                cur += (ll)c[j] * (d[j] + 1);
                        }
                }
                if ( cur > n || cur == 0 ) continue; // nä»¥ä¸‹æ²¡æœ‰ä¸åˆæ³•è§£ æˆ–è€… å…¨éƒ½ä¸é€‰ä¸æ„æˆè§£ä¹Ÿä¸æ„æˆä¸åˆæ³•è§£
                if ( cnt & 1 ) res -= dp[n - cur];
                else           res += dp[n - cur];
        }
        cout << res << endl;
}

int main () {
        for ( int i = 0; i < 4; i ++ ) cin >> c[i]; 
        dp[0] = 1; for ( int i = 0; i < 4; i ++ ) for ( int j = c[i]; j < N; j ++ ) dp[j] += dp[j - c[i]]; 

        int cass; cin >> cass; while ( cass -- ) {
                Solve ();
        }
}
```

<hr>

### æ´›è°·P3166_æ•°ä¸‰è§’å½¢

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/P3166">![20220706185721](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220706185721.png)</a>

#### ğŸ’¡
é¢˜ç›®å…ˆè¯´çš„å…¨éƒ¨ï¼Œç„¶åç»™äº†é™åˆ¶ï¼ŒæŒ‰ç€å®ƒçš„é¡ºåºæƒ³å°±æ˜¯ç”¨å®¹æ–¥ã€‚  
æœ¬é¢˜æ˜¯æ ¼ç‚¹ï¼Œæˆ‘ä»¬å°† $n,m$ éƒ½ $+1$ ä¼šæ›´å¥½çœ‹   
é¦–å…ˆæ‰€æœ‰çš„ç‚¹ä¸ºï¼š$C_{nm}^3$  
å‡å»åœ¨åŒä¸€æ¡çº¿ä¸Šçš„æƒ…å†µï¼š  
<b>$1.$ ä¸åæ ‡è½´å¹³è¡Œï¼š</b>  
$nC_m^3+mC_n^3$  
<b>$2.$ ä¸åæ ‡è½´ä¸å¹³è¡Œï¼š</b>  
æ³¨æ„ $1\le N,M\le1000$ ï¼Œå¯ä»¥ $O(nm)$ å†™  
æšä¸¾ä¸¤ä¸ªç‚¹çš„çºµåæ ‡å·® $i$ ä¸æ¨ªåæ ‡å·® $j$ ï¼Œå¯¹äºä¸€å¯¹ç‚¹æ˜¯å½¢æˆä¸€ä¸ª $i\times j$ çš„çŸ©å½¢   
è¿™ä¸ªçŸ©å½¢å¯¹è§’çº¿ä¸Šé™¤äº†é¡¶ç‚¹ä¹‹å¤–çš„ç‚¹ä¸€å…±æœ‰ $gcd(i,j)-1$ ä¸ª  
::: tip è¯æ˜  
ä»¤ $d=gcd(i,j)$ ï¼Œåˆ™ä¸ç»è¿‡ä»»ä½•ä¸€ä¸ªç‚¹çš„åæ ‡å·®åº”ä¸º $(\frac{i}{d},\frac{j}{d})$ ï¼Œè¿™ä¸ªç‚¹ä¸€å…±æœ‰ $d$ ä¸ªå€æ•°ï¼ŒåŒ…å«äº†ä¸€ä¸ªé¡¶ç‚¹ï¼Œåº”å‡å»ä¸º $d-1$    
:::  
ä¸€ä¸ªçŸ©å½¢æœ‰ä¸¤ä¸ªå¯¹è§’çº¿ï¼Œåº”ä¹˜ $2$   
$n\times m$ çš„çŸ©å½¢æœ‰ $(n-i)(m-j)$ ä¸ªè¿™æ ·çš„å°çŸ©å½¢ï¼Œä¹˜ä¸Šä¸ªæ•°  
åˆ™è¿™ä¸€æ¡åº”å‡å» $2\sum\limits_{i=1}^{n-1}\sum\limits_{j=1}^{m-1}(n-i)(m-j)(gcd(i,j)-1)$  

åˆ™ç­”æ¡ˆä¸ºï¼š  
$$C_{nm}^3-nC_m^3-mC_n^3-2\sum\limits_{i=1}^{n-1}\sum\limits_{j=1}^{m-1}(n-i)(m-j)(gcd(i,j)-1)$$ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
inline ll gcd (ll a, ll b) { return b ? gcd(b, a % b) : a; }
int main () {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);

        ll n, m; cin >> n >> m;
        n ++, m ++;

        ll res = n * m * (n * m - 1) * (n * m - 2) / 6;
        
        res -= m * n * (n - 1) * (n - 2) / 6;
        res -= n * m * (m - 1) * (m - 2) / 6;
        for (ll i = 1; i < n; i ++) {
                for (ll j = 1; j < m; j ++) {
                        res -= 2ll * (gcd(i, j) - 1) * (n - i) * (m - j);
                }
        }

        cout << res << endl;
}
```
<hr>

### ç‰›å®¢2021å¤šæ ¡(2)J_CountingTriangles

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/11254/J">![20220919183903](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220919183903.png)</a>

#### ğŸ’¡
å¾ˆå¦™çš„é¢˜  
è¦å¾—åˆ°åŒè‰²è¾¹ä¸‰è§’å½¢ï¼Œåªèƒ½æšä¸¾ï¼Œä¸”æšä¸¾ä¸¤ä¸ªç‚¹è¿˜ä¸å¤Ÿï¼Œè¿˜è¦å»æ£€æŸ¥ç¬¬ä¸‰ä¸ªç‚¹æ˜¯å¦åˆæ³•  
æ­£éš¾åˆ™åï¼Œä»ä¸€ä¸ªç‚¹å‡ºå‘ä¸åŒè‰²çš„ä¸¤ä¸ªè¾¹æ˜¯å¯ä»¥ç›´æ¥ç®—å‡ºæ¥çš„  
æšä¸¾ $u$ ï¼Œæšä¸¾ $u$ å‡ºå‘çš„è¾¹ï¼Œ$cnt[i]$ ä¸ºé¢œè‰²ä¸º $i$ çš„è¾¹æ•°ï¼Œåˆ™ $u$ å‡ºå‘çš„ä¸åŒè‰²è¾¹ä¸º $cnt[0]\times cnt[1]$ ï¼Œè¿™å°±æ˜¯ä¸¤ä¸ªè¾¹ç¡®å®šå‡ºæ¥çš„ä¸‰è§’å½¢ ï¼Œè®©ç­”æ¡ˆ $res$ åŠ ä¸Š    
æœ€åä¼šæœ‰é‡å¤çš„ï¼Œéœ€è¦ $res/2$   
æ‰€æœ‰çš„ä¸‰è§’å½¢æ•°é‡ä¸ºä» $n$ ä¸ªç‚¹ä¸­é€‰ $3$ ä¸ªç‚¹ï¼Œé‚£ä¹ˆåŒè‰²è¾¹ä¸‰è§’å½¢æ•°ä¸º $C_n^3-res$ 

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
namespace GenHelper
{
    unsigned z1,z2,z3,z4,b,u;
    unsigned get()
    {
        b=((z1<<6)^z1)>>13;
        z1=((z1&4294967294U)<<18)^b;
        b=((z2<<2)^z2)>>27;
        z2=((z2&4294967288U)<<2)^b;
        b=((z3<<13)^z3)>>21;
        z3=((z3&4294967280U)<<7)^b;
        b=((z4<<3)^z4)>>12;
        z4=((z4&4294967168U)<<13)^b;
        return (z1^z2^z3^z4);
    }
    bool read() {
      while (!u) u = get();
      bool res = u & 1;
      u >>= 1; return res;
    }
    void srand(int x)
    {
        z1=x;
        z2=(~x)^0x233333333U;
        z3=x^0x1234598766U;
        z4=(~x)+51;
      	u = 0;
    }
}
using namespace GenHelper;

int e[8001][8001];

int main () {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n, seed; cin >> n >> seed;
    srand(seed);
    for (int i = 0; i < n; i ++) {
        for (int j = i + 1; j < n; j ++) e[i][j] = e[j][i] = read();
    }

    ll res = 0;
    for (int i = 0; i < n; i ++) {
        int num[2] = {0};
        for (int j = 0; j < n; j ++) {
            if (i != j) num[e[i][j]] ++;
        }
        res -= 1ll * num[0] * num[1];
    }
    res = res / 2 + 1ll * n * (n - 1ll) * (n - 2ll) / 6;

    cout << res << endl;
}
```
<hr>


### ç‰›å®¢2022å¯’å‡ç®—æ³•åŸºç¡€é›†è®­è¥K_æ™ºä¹ƒçš„Cè¯­è¨€æ¨¡é™¤æ–¹ç¨‹

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/23478/K"><img src="https://img-blog.csdnimg.cn/6d2ed77c2fe84b679c807b3bf69a7975.png"></a>

#### ğŸ’¡
æœ¬é¢˜æ˜¯è®©æˆ‘ä»¬è®¡æ•°  
è®© $[l,r]$ ä»¥ $p$ ä¸ºå¾ªç¯åŒºé—´è¿›è¡Œç§»åŠ¨ï¼Œçœ‹å¤šå°‘ä¸ªæ¨¡åå­˜åœ¨äº $[L,R]$ ä¸­  
é¦–å…ˆè‚¯å®šæ˜¯è¦çœ‹éœ€ä¸éœ€è¦ä» $0$ çš„ä½ç½®åˆ†å¼€è®¡ç®—çš„  

å¯¹äº $[L,R]$ éƒ½åœ¨åŒä¸€è¾¹çš„ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ç”¨å®¹æ–¥ï¼Œ $calc(R)-calc(L-1)$ è¿™ç§  
é‚£ä¹ˆä¸åœ¨ä¸€è¾¹çš„æˆ‘ä»¬è¦åˆ†å¼€è®¡ç®—ç„¶ååŠ èµ·æ¥  

é‚£ä¹ˆå°±å°†åŒºé—´é—®é¢˜è½¬åŒ–ä¸ºå‰ç¼€çš„ç‚¹é—®é¢˜äº†  
ä»»åŠ¡æ˜¯æ±‚ä» $x$ åˆ° $0$ æœ‰å¤šå°‘ä¸ªæ•°æ¨¡åä¸º $[l,r]$ ï¼Œä¸Šé¢åœ¨å™è¿°é—®é¢˜æ—¶å·²ç»å¾ˆæ˜ç™½äº†ï¼Œè¿™ä¸ªè®¡ç®—å¾ªç¯èŠ‚è¿›è¡Œä¼˜åŒ–  
ä»¥ $[0,p-1]$ ä¸ºå¾ªç¯èŠ‚ï¼Œæ¯ä¸ªå¾ªç¯èŠ‚å†…è®¡ç®— $[0,p-1]\cap[l,r]$ çš„ä¸ªæ•°ï¼Œç„¶åå¾ªç¯ $\left\lfloor\frac xp\right\rfloor$ æ¬¡  
å¤šå‡ºæ¥çš„å°±ç®—ä¸€ä¸‹ $[0,x\%p]\cap[l,r]$ å³å¯  
  
ç›¸äº¤åŒºé—´é•¿åº¦æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•° `get_intersection(a, b, c, d)` æ¥è®¡ç®—   
é‚£ä¹ˆæˆ‘ä»¬å¯¹äºå¾ªç¯ `x / p` æ¬¡ï¼Œæ¯ä¸ªå¾ªç¯æœ‰ `get_intersection(0, p - 1, l, r)` ä¸ªç›¸äº¤ï¼ŒåŠ ä¸Š `get_intersection(0, x % p, l, r)` è¿™æ ·å»ç®—  
è®°å¾—å¯¹ `x` åˆ†å¥‡å¶

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
ll P, l, r, L, R;

inline ll get_Intersection ( ll a, ll b, ll c, ll d ) {
        if ( c > b || d < a ) return 0;
        return min(b, d) - max(a, c) + 1;
}
inline ll Query ( ll bondry ) {
        if ( bondry < 0 ) 
                return (- bondry / P) * get_Intersection(- P + 1, 0, l, r) + get_Intersection(bondry % P, 0, l, r );
        else 
                return bondry / P * get_Intersection(0, P - 1, l, r) + get_Intersection(0, bondry % P, l, r);
}

int main () {
        ios::sync_with_stdio(false);

        cin >> P >> l >> r >> L >> R;
        P = llabs(P);
        if ( L <= 0 && R >= 0 ) 
                cout << Query(R) + Query(L) - Query(0) << endl; // åˆ†å¼€è®¡ç®—ï¼Œå¤šç®—äº†ä¸ª 0
        else if ( L < 0 && R < 0 )
                cout << Query(L) - Query(R + 1) << endl; // è´Ÿæ•°å®¹æ–¥
        else 
                cout << Query(R) - Query(L - 1) << endl; // æ­£æ•°å®¹æ–¥
}
```
<hr>


### ç‰›å®¢ç»ƒä¹ èµ›92C_Dä¸C

#### ğŸ”—
<a href="https://ac.nowcoder.com/acm/contest/11182/C"><img src="https://i.loli.net/2021/11/27/Ne98jLhYZSQsnxz.png"></a>

#### ğŸ’¡
çœŸå°±çœ‹è§è®¡æ•°æƒ³å®¹æ–¥å‘—  
é¦–å…ˆå¯ä»¥å¾—åˆ°æ€»è¾¹æ•°  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_edge" title="\inline has\_edge" />  ä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;\frac{n\times&space;(n-1)}2" title="\inline \frac{n\times&space;(n-1)}2" />  
å¯¹äºè¿™äº›è¾¹æ•°è®©ä¸¤äººä¸€èµ·æ”¾ä¸€å…±æœ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{has\_edge}{a}\times\binom{has\_edge}{b}" title="\inline \binom{}{}" /> ç§æƒ…å†µï¼Œè®¾ä¸º  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_situation" title="\inline has\_situation" />   

å¦‚æœ  <img src="https://latex.codecogs.com/svg.image?\inline&space;a+b\ge&space;has\_edge" title="\inline a+b\ge&space;has\_edge" /> é‚£ä¹ˆä¸ç®¡å’‹æ”¾éƒ½æˆç«‹ï¼Œç›´æ¥è¾“å‡º  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_situation" title="\inline has\_situation" /> å°±è¡Œ  
å¦åˆ™çœ‹çœ‹ä¸¤äººæ²¡æœ‰å…¬å…±è¾¹çš„æƒ…å†µ  
å°±æ˜¯åœ¨  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_edge" title="\inline has\_edge" /> ä¸­é€‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;a" title="\inline a" /> ä¸ªï¼Œå†ä»  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_edge-a" title="\inline has\_edge-a" /> ä¸ªä¸­é€‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;b" title="\inline b" /> ä¸ª  
è¿™æ ·çš„ç­”æ¡ˆå°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;has\_situation-\binom{has\_edge}{a}\times\binom{has\_edge-a}{b}" title="\inline has\_situation-\binom{has\_edge}{a}\times\binom{has\_edge-a}{b}" />   

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
#include <iostream>

#define ll long long

using namespace std;

const int mod = 1e9 + 7;
const int N = 1e6 + 10;

ll f[N];
inline void Get () {
        f[0] = 1;
        for ( ll i = 1; i < N; i ++ ) f[i] = f[i - 1] * i % mod;
}
inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}
inline ll inv ( ll x ) { return ksm (x, mod - 2); }
inline ll C ( ll n, ll m ) {
        return f[n] * inv(f[m]) % mod * inv(f[n - m]) % mod;
}

int main () {
        Get();
        ll n, a, b; cin >> n >> a >> b;
        ll has_edge = n * (n - 1) / 2;
        ll has_situation = C(has_edge, a) * C(has_edge, b) % mod;
        if ( a + b >= has_edge ) cout << has_situation << endl;
        else {
                ll sub = C(has_edge, a) * C(has_edge - a, b) % mod;
                cout << (has_edge - sub + mod) % mod << endl;
        }
}
```

<hr>

### ABC221E_LEQ

#### ğŸ”—
<a href="https://atcoder.jp/contests/abc221/tasks/abc221_e?lang=en"><img src="https://i.loli.net/2021/10/03/zgE36rAUpOTkXHQ.png"></a>

#### ğŸ’¡
é—®é¢˜è½¬åŒ–ä¸€ä¸‹å°±æ˜¯  
ä»å·¦å‘å³ï¼Œ<img src="https://latex.codecogs.com/svg.image?a[i]" title="a[i]" />çš„è´¡çŒ®å°±æ˜¯æ¯ä¸ªå‰é¢æ¯”å®ƒå°çš„<img src="https://latex.codecogs.com/svg.image?a[j]" title="a[j]" />ï¼Œåœ¨è¿™ä¸ªä½ç½®ä¸Šçš„è´¡çŒ®ä¸º<img src="https://latex.codecogs.com/svg.image?2^{i-j-1}" title="2^{i-j-1}" />  
ç”±äºåŒºé—´é•¿åº¦æ€»æ˜¯å‚å·®ä¸é½çš„  
é‚£ä¹ˆå¯¹äºæ¯ä¸ª<img src="https://latex.codecogs.com/svg.image?a[j]" title="a[j]" />ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå‰ç¼€è´¡çŒ®ä¸º<img src="https://latex.codecogs.com/svg.image?2^{-j-1}&space;" title="2^{-j-1} " />   
ç„¶ååœ¨<img src="https://latex.codecogs.com/svg.image?i" title="i" />çš„ä½ç½®çš„æ—¶å€™çš„è´¡çŒ®å®¹æ–¥ä¸º<img src="https://latex.codecogs.com/svg.image?\sum\frac{2^i}{2^{j&plus;1}}" title="\sum\frac{2^i}{2^{j+1}}" />å³å¯ï¼Œå…¶ä¸­sumå¯ä»¥ç”±æ ‘çŠ¶æ•°ç»„çš„å‰ç¼€å¾—åˆ°  
æ‰€ä»¥æ¯æ¬¡ç´¯åŠ æŸ¥è¯¢<img src="https://latex.codecogs.com/svg.image?a[i]" title="a[i]" />ä½ç½®ä»¥å‰çš„æ€»è´¡çŒ®ï¼Œ`query(a[i]) * ksm(2, i)`  
ç„¶ååœ¨<img src="https://latex.codecogs.com/svg.image?a[i]" title="a[i]" />çš„ä½ç½®ä¸Šæ›´æ–°ä¸€ä¸‹è¿™ä¸ªå‰ç¼€è´¡çŒ®ï¼Œ`update( a[i], ksm(ksm(2, i + 1), mod - 2) )`  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#define ll long long
using namespace std;

const int N = 3e5 + 10;
const int mod = 998244353;
ll n, a[N];
vector<ll> nums;

inline ll ksm ( ll a, ll b ) {
	ll res = 1;
	while ( b ) {
		if ( b & 1 ) res = res * a % mod;
		a = a * a % mod;
		b >>= 1;
	}
	return res;
}

namespace TreeArray {
	ll tr[N];
	inline ll lowbit ( ll x ) {
		return x & -x;
	}
	inline void update ( ll id, ll val ) {
		while ( id < N ) tr[id] = (tr[id] + val) % mod, id += lowbit(id);
	}
	inline ll query ( ll id ) {
		ll res = 0;
		while ( id > 0 ) res = (res + tr[id]) % mod, id -= lowbit(id);
		return res;
	}
} using namespace TreeArray;

int main() {
#ifndef ONLINE_JUDGE
	freopen("in.in", "r", stdin);
	freopen("out.out", "w", stdout);
#endif
	cin >> n;
	ll res = 0;
	for ( int i = 1; i <= n; i ++ ) 
		cin >> a[i],
		nums.push_back(a[i]);
	sort ( nums.begin(), nums.end() );
	nums.erase(unique(nums.begin(), nums.end()), nums.end());
	for ( int i = 1; i <= n; i ++ ) a[i] = lower_bound(nums.begin(), nums.end(), a[i]) - nums.begin() + 1;
	for ( int i = 1; i <= n; i ++ ) {
		res = (res + query(a[i]) * ksm(2, i) % mod) % mod;
		update (a[i], ksm(ksm(2, i + 1), mod - 2));	
	}
	cout << res << endl;
	return 0;
}
```

<hr>

### CCPC2021å¨æµ·M_810975 

#### ğŸ”—
<a href="https://codeforces.com/gym/103428/problem/M">![20220831223041](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220831223041.png)</a>

#### ğŸ’¡
ä¸€ä¸ªçœ‹èµ·æ¥å°±å¾ˆå…¸çš„å®¹æ–¥é—®é¢˜ã€‚  
å¡åœ¨ $k$ ä¸Šå¤ªéš¾å¤„ç†ï¼Œäºæ˜¯ä»¤ $f(k)$ è¡¨ç¤ºæœ€å¤§è¿èƒœé•¿åº¦ä¸ä½äº $k$ ï¼Œç­”æ¡ˆå³ä¸º $f(k+1)-f(k)$  
å¯¹äº $f(k)$ å…ˆå®‰æ’ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„è¿èƒœæ®µï¼Œåˆ«çš„ä»»æ„åˆ†é…ï¼Œå‡è®¾è¿™ä¸ªæ®µåˆ†é…åˆ° $a$ ä½ç½®ï¼Œ$b$ ä½ç½®åˆæ”¾äº† $k$ ä¸ªèƒœåœºï¼Œè€Œåè¿‡æ¥åˆä¼šé‡æ–°è®¡æ•°ä¸€æ¬¡ï¼Œè¿™å°±æ˜¯å®¹æ–¥äº†ã€‚æ‰€ä»¥å…ˆè®¡ç®—æ’ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„è¿ç»­æ®µå‰©ä¸‹èƒœåœºéšä¾¿æ’çš„æ•°é‡ï¼Œå†å‡å»æ’ä¸¤ä¸ªé•¿åº¦ä¸º $k$ çš„è¿ç»­æ®µå‰©ä¸‹èƒœåœºéšä¾¿æ’çš„æ•°é‡ï¼Œå†åŠ ä¸Šæ’ä¸‰ä¸ªé•¿åº¦ä¸º $k$ çš„è¿ç»­æ®µå‰©ä¸‹åœºæ•°éšä¾¿æ’çš„æ•°é‡....  
å¯¹äºé€‰ $i$ ä¸ªè¿èƒœæ®µï¼Œå…ˆåœ¨å‰©ä¸‹çš„ $n-ik$ ä¸ªåœºé€‰ $n-m$ ä¸ªè´¥åœºï¼Œåœ¨è´¥åœºçš„ $n-m+1$ ä¸ªç©ºä¸­æ’ $i$ ä¸ªæ¿å­ï¼Œæœ‰æ•ˆé˜²æ­¢äº†å‡ºç° $\checkmark\underline{\checkmark\checkmark...\checkmark}$ å’Œ $\underline{\checkmark\checkmark...\checkmark}\checkmark$ çš„å†²çªã€‚æ•…è®¡æ•°ä¸º  
$f(k)=\sum\limits_{i=1}^{ik<=m}(-1)^{i+1}\binom{n-m+1}{i}\binom{n-ik}{n-m}$    
æœ€åæ±‚ä¸€ä¸‹ $f(k+1)-f(k)$  
æ³¨æ„ç‰¹åˆ¤ä¸€ä¸‹ $k=0$ ï¼Œä¸ç„¶ä¼š $RE$  
    
è€Œå¯¹äº $g(k)$ è¡¨ç¤ºæœ€å¤§è¿èƒœé•¿åº¦ä¸å¤šäº $k$  
æœ‰ä¸€ä¸ªç”Ÿæˆå‡½æ•°æ±‚ $g(k)$ çš„æ€è€ƒæ–¹å¼  
æœ‰ $n-m+1$ ä¸ªç©ºï¼Œæ¯ä¸ªç©ºæœ€å¤šæ”¾ $k$ ä¸ªï¼Œå…¶ç”Ÿæˆå‡½æ•°ä¸º $1+x+x^2+...+x^k$  
å¯¹äºæ‰€æœ‰çš„ç©ºåˆå¹¶èµ·æ¥å°±æ˜¯ $(1+x+x^2+...+x^k)^{n-m+1}$ ï¼Œè€Œæœ€åè¦æ±‚æœ‰ $m$ ä¸ªèƒœåœºï¼Œè¿”å›è¿™ä¸ªå¤šé¡¹å¼çš„å¹‚çš„ $m$ æ¬¡é¡¹ç³»æ•°å³å¯  
è¿™é‡Œå°±éœ€è¦æ”¯æŒé•¿å¤šé¡¹å¼çš„å¤šé¡¹å¼å¿«é€Ÿå¹‚äº†ï¼ˆä¸ä¼šå†™ï¼‰

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int mod = 998244353;
const int N = 1e5 + 10;
int f[N], ivf[N];
inline int ksm (int a, int b) {
    int res = 1;
    while (b) {
        if (b & 1) res = 1ll * res * a % mod;
        a = 1ll * a * a % mod;
        b >>= 1;
    }
    return res;
}
inline int inv (int x) {return ksm(x, mod - 2);}
inline int C(int n, int m) {
    return 1ll * f[n] * ivf[m] % mod * ivf[n - m] % mod;
}

int n, m, k;
inline int Calc (int x) {
    int ret = 0;
    for (int i = 1; i * x <= m; i ++) {
        if (i & 1) ret += 1ll * C(n - m + 1, i) * C(n - i * x, n - m) % mod;
        else ret -= 1ll * C(n - m + 1, i) * C(n - i * x, n - m) % mod;
        ret = (ret % mod + mod) % mod;
    }
    return ret;
}


inline void Solve () {
    cin >> n >> m >> k;
    if (k == 0) {
        cout << (m == 0) << endl;
    } else {
        cout << ((Calc(k) - Calc(k + 1)) % mod + mod) % mod << endl;
    }
}
```
<hr>


### CodeForces451E_DevuAndFlowers

#### ğŸ”—
<a href="https://www.luogu.com.cn/problem/CF451E"><img src="https://i.loli.net/2021/11/24/l2YRfXkU7Aq5bGQ.png"></a>

#### ğŸ’¡
è¿™ä¸ªæ•°æ®é‡...  
æ„Ÿè§‰æ¯å‡½æ•°è¿‡ä¸äº†ï¼Œçœ‹äº†çœ¼  <img src="https://latex.codecogs.com/svg.image?\inline&space;n" title="\inline n" />  æƒ³ä¸€ä¸‹å®¹æ–¥  
  
å’Œå¤šé‡èƒŒåŒ…è¶…é™ä¸€æ ·  
æˆ‘ä»¬è€ƒè™‘è¿™é‡Œé¢çš„æ€»æ–¹æ¡ˆå’Œä¸åˆæ³•æ–¹æ¡ˆ  
å¦‚æœç®±å­æ— é™æœµèŠ±ï¼Œé‚£ä¹ˆå°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{s+n-1}{n-1}" title="\inline \binom{s+n-1}{n-1}" />  ç§å–æ³•  
>å³é—®ï¼š  <img src="https://latex.codecogs.com/svg.image?\inline&space;\sum\limits_{i=1}^nx_i=s" title="\inline \sum\limits_{i=1}^nx_i=s" />   
>é‚£å°±æ˜¯ä½¿ç”¨  <img src="https://latex.codecogs.com/svg.image?\inline&space;n-1" title="\line n-1" />  ä¸ªéš”æ¿å°†  <img src="https://latex.codecogs.com/svg.image?\inline&space;s" title="\inline s" />  ä¸ªç‰©å“åˆ†å‰²æˆ  <img src="https://latex.codecogs.com/svg.image?\inline&space;n" title="\inline n" />  ä»½  
>é‚£å°±æ˜¯æœ‰äº†  <img src="https://latex.codecogs.com/svg.image?\inline&space;s+n-1" title="\inline s+n-1" />  ä¸ªä½ç½®å¯ä»¥ç”¨æ¥æ”¾è¿™  <img src="https://latex.codecogs.com/svg.image?\inline&space;n-1" title="\inline n-1" />  ä¸ªéš”æ¿  
>æ–¹æ¡ˆæ•°å°±æ˜¯  <img src="https://latex.codecogs.com/svg.image?\inline&space;\binom{s+n-1}{n-1}" title="\inline \binom{s+n-1}{n-1}" /> 

ä¸åˆæ³•æ–¹æ¡ˆå°±æ˜¯â€œä½ ç¬¬  <img src="https://latex.codecogs.com/svg.image?\inline&space;i" title="\inline i" />  ä¸ªç®±å­åªæœ‰  <img src="https://latex.codecogs.com/svg.image?\inline&space;x_i" title="\inline x_i" />  æœµèŠ±ï¼Œä½†æ˜¯ä½ å–äº†  <img src="https://latex.codecogs.com/svg.image?\inline&space;x_i+1" title="\inline x_i+1" />  æœµèŠ±  
  
é‚£ä¹ˆæˆ‘ä»¬å¦‚æœç›´æ¥å¼ºåˆ¶åœ¨<img src="https://latex.codecogs.com/svg.image?\inline&space;i" title="\inline i" />å·ç®±å­å–  <img src="https://latex.codecogs.com/svg.image?\inline&space;x_i+1" title="\inline x_i+1" />  æœµèŠ±ï¼Œé‚£ä¹ˆåˆ«çš„æ‰€æœ‰å–æ³•éƒ½ä¸åˆæ³•  
è¿™å°±æ˜¯å®¹æ–¥çš„é—®é¢˜äº†ï¼Œå› ä¸ºæšä¸¾ä¼šå‡ºç°é‡å¤  
æ‰€ä»¥å°±ï¼ˆå¥‡æ•°ä¸ªç®±å­ï¼‰-ï¼ˆå¶æ•°ä¸ªç®±å­ï¼‰  
  
ç”±äºä¸€å¼€å§‹ç»™å‡ºçš„ <img src="https://latex.codecogs.com/svg.image?\inline&space;s" title="\line s" /> å¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨ <img src="https://latex.codecogs.com/svg.image?\inline&space;Lucas" title="\line Lucas" /> å®šç†


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int N = 30;
const int mod = 1e9 + 7;

namespace PermutationAndCombination {
        inline ll ksm ( ll a, ll b ) {
                ll res = 1;
                while ( b ) {
                        if ( b & 1 ) res = res * a % mod;
                        a = a * a % mod;
                        b >>= 1;
                }
                return res;
        }
        inline ll inv ( ll x ) { return ksm(x, mod - 2); }

        ll iv[N];
        inline void Get () {
                for ( int i = 1; i < N; i ++ ) iv[i] = inv(i);
        }
        inline ll C ( ll n, ll m ) {
                if ( n < m )   return 0;
                if ( n < mod ) {
                        ll res = 1;
                        for ( ll i = 1; i <= m; i ++ ) {
                                ll a = (n + i - m) % mod;
                                ll b = i % mod;
                                res = res * a % mod * iv[b] % mod;
                        }
                        return res;
                }
                return C ( n / mod, m / mod ) * C ( n % mod, m % mod ) % mod;
        }
} using namespace PermutationAndCombination;

ll a[N], n, s, res;
int main () {
        ios::sync_with_stdio(false);
        Get(); cin >> n >> s;
        for ( int i = 0; i < n; i ++ ) cin >> a[i];
        for ( int i = 0; i < (1 << n); i ++ ) {
                ll np = 1, cur = s;
                for ( int j = 0; j < n; j ++ ) {
                        if ( i & (1 << j) ) {
                                np = -np;
                                cur -= a[j] + 1; 
                        }
                }
                if ( cur < 0 ) continue;
                ll upd = C(cur + n - 1, n - 1);
                res = (res + np * upd) % mod;
        }
        cout << (res + mod) % mod << endl;
}
```

<hr>

### CodeForces979C_KuroAndWalkingRoute

#### ğŸ”—
<a href="https://codeforces.com/problemset/problem/979/C"><img src="https://i.loli.net/2021/09/30/BFybalLjWnoRu4X.png"></a>

#### ğŸ’¡
ç›´æ¥å¤„ç†å¯ä»¥åˆ°è¾¾çš„ç‚¹å¯¹å¾ˆéº»çƒ¦ï¼Œè¦è€ƒè™‘å¾ˆå¤šç§æƒ…å†µ  
é‚£ä¹ˆå¯ä»¥å®¹æ–¥åœ°å‡ä¸€ä¸‹ä¸èƒ½åˆ°è¾¾çš„ç‚¹  
å³é€šè¿‡yå†åˆ°è¾¾xå³ä¹‹åçš„ç‚¹  
  
æ—¢ç„¶æ˜¯ä¸€æ£µæ ‘  
é‚£ä¹ˆå°±ç›´æ¥ç”¨"xçš„å­æ ‘å¤§å°"ä¹˜"yçš„å­æ ‘ä¸­ä¸åŒ…å«xçš„å­æ ‘çš„å¤§å°æ€»å’Œ"å°±æ˜¯æˆ‘ä»¬è¦å‡çš„å€¼  
å³`res = n * (n - 1) - son[x] * elsSon`  
  
å¯ä»¥å†å†™ä¸€ä¸ªåˆ¤æ–­åˆ¤æ–­å­æ ‘ä¸­æœ‰æ²¡æœ‰xçš„å‡½æ•°  
å¤„ç†å¥½son[]åï¼Œå¯¹yçš„å­èŠ‚ç‚¹ä¸€ä¸ªä¸ªåˆ¤æ–­å¹¶ä¹˜ä¸€ä¸‹å°±è¡Œäº†  


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const ll N = 3e5 + 10, M = N * 2;
ll n, X, Y;
ll res;
struct Edge { ll nxt, to; } edge [M]; ll head[M], cnt;

inline void add_Edge ( ll from, ll to ) {
        edge[ ++ cnt ] = { head[from], to };
        head[from] = cnt;
}
ll son[N], sonels;
inline void get_Sz ( ll x, ll fath ) {
        for ( ll i = head[x]; ~i; i = edge[i].nxt ) {
                ll to = edge[i].to;
                if ( to == fath ) continue;
                get_Sz ( to, x );
                son[x] += son[to];
        }
}
inline bool check ( ll x, ll fath ) {
        ll res = 1;
        if ( x == X ) res = 0;
        for ( ll i = head[x]; ~i; i = edge[i].nxt ) {
                ll to = edge[i].to;
                if ( to == fath ) continue;
                res *= check(to, x);
        }
        return res;
}

int main () {
#ifndef ONLINE_JUDGE
        freopen("in.in", "r", stdin);
        freopen("out.out", "w", stdout);
#endif 
        memset ( head, -1, sizeof head );
        for ( ll i = 0; i < N; i ++ ) son[i] = 1;
        scanf("%lld%lld%lld", &n, &X, &Y);
        res = n * (n - 1);
        for ( ll i = 1; i < n; i ++ ) {
                ll a, b; cin >> a >> b;
                add_Edge ( a, b );
                add_Edge ( b, a );
        }
        get_Sz ( Y, -1 );
        for ( ll i = head[Y]; ~i; i = edge[i].nxt ) {
                sonels += check(edge[i].to, Y) * son[edge[i].to];
        }
        sonels ++;
        res -= son[X] * sonels;
        printf("%lld\n", res);
}
```

<hr>

### CodeForces1569C_JuryMeeting

#### ğŸ”—
<a href="https://codeforces.com/contest/1569/problem/C"><img src="https://i.loli.net/2021/09/09/feoEr5vRHgldT9p.png"></a>

#### ğŸ’¡
è§‚å¯Ÿé¢˜ç›®è½¬æ¢ä¸€ä¸‹é¢˜ç›®é—®é¢˜  
å³æœ€å¤§å€¼çš„åé¢è‡³å°‘æœ‰ä¸€ä¸ªå¯ä»¥è®©æœ€å¤§å€¼æœ€åä¸€æ­¥å’Œå€’æ•°ç¬¬äºŒæ­¥ä¸åœ¨ä¸€èµ·çš„æ•°  
é‚£ä¹ˆå¦‚æœæœ€å¤§å€¼æœ‰ä¸¤ä¸ªï¼Œæ€ä¹ˆæéƒ½å¯ä»¥  
å¦‚æœæœ€å¤§å€¼å’Œæ¬¡å¤§å€¼çš„å·®å€¼å¤§äº1åˆ™æ€ä¹ˆæéƒ½ä¸è¡Œ  
ç„¶åå°±æ˜¯æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼å·®å€¼ä¸º1çš„æƒ…å†µ  
  
è·å–ä¸€ä¸‹æ‰€æœ‰çš„æ’åˆ—æ–¹å¼å³<img src="https://latex.codecogs.com/svg.image?n!" title="n!" />  
ç„¶åæœ€å¤§å€¼åœ¨æœ€åæ˜¯ä¸å¯ä»¥çš„ï¼Œæ‰€ä»¥è¦å‡å»<img src="https://latex.codecogs.com/svg.image?(n-1)!" title="(n-1)!" />  
ç„¶åè®¡ç®—æ‰€æœ‰æ¬¡å¤§å€¼éƒ½åœ¨æœ€å¤§å€¼å‰é¢çš„æƒ…å†µ  
  
æˆ‘ä»¬è®¾ç½®<img src="https://latex.codecogs.com/svg.image?a_0" title="a_0" />æ˜¯æœ€å¤§å€¼ï¼Œ<img src="https://latex.codecogs.com/svg.image?a_1" title="a_1" />æ˜¯æ¬¡å¤§å€¼ï¼Œ<img src="https://latex.codecogs.com/svg.image?num_i" title="num_i" />æ˜¯<img src="https://latex.codecogs.com/svg.image?i" title="i" />å‡ºç°çš„ä¸ªæ•°  
æœ€å¤§å€¼å‰é¢è‡³å°‘è¦ç•™ä¸‹<img src="https://latex.codecogs.com/svg.image?num_{a_1" title="num_{a_1" />ï¼Œæœ€å¤šå°±æ˜¯<img src="https://latex.codecogs.com/svg.image?n-2" title="n-2" />ä¸ª  
é‚£ä¹ˆæˆ‘ä»¬ä»¥<img src="https://latex.codecogs.com/svg.image?i" title="i" />éå†  
å°†<img src="https://latex.codecogs.com/svg.image?num_{a_1" title="num_{a_1" />ä¸ªæ•°ä¸è®°é¡ºåºåœ°æ”¾å…¥<img src="https://latex.codecogs.com/svg.image?i" title="i" />ä¸ªç©ºä¸­  
å³<img src="https://latex.codecogs.com/svg.image?C_i^{num_{a_1}}" title="C_i^{num_{a_1}}" />  
ç„¶åå¯¹è¿™<img src="https://latex.codecogs.com/svg.image?num_{a_1" title="num_{a_1" />ä¸ªæ•°è€ƒè™‘é¡ºåºï¼Œå¯¹å…¶ä½™çš„<img src="https://latex.codecogs.com/svg.image?n-num_{a_1}-1" title="n-num_{a_1}-1" />ä¸ªæ•°è€ƒè™‘é¡ºåº  
å³éƒ½æ˜¯é˜¶ä¹˜  
é‚£ä¹ˆå°±æœ‰å…¬å¼ï¼š  
<img src="https://latex.codecogs.com/svg.image?n!-(n-1)!-\sum\limits_{i=num_{a_1}}^{n-2}\{C_i^{num_{a_1}}\times&space;num_{a_1}!\times&space;(n-1-num_{a_1})!\}" title="n!-(n-1)!-\sum\limits_{i=num_{a_1}}^{n-2}\{C_i^{num_{a_1}}\times num_{a_1}!\times (n-1-num_{a_1})!\}" />  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
#include <iostream>
#include <algorithm>
#include <map>
#include <cmath>
#include <vector>
#include <cstring>
#include <list>
using namespace std;
#define ll long long
const int N = 200005;
const ll mod = 998244353;

ll a[N];
ll f[N];
ll n;
map<ll, ll> num;
inline void get_F () {
        f[0] = 1;
        for ( int i = 1; i < N; i ++ ) {
                f[i] = f[i - 1] * i % mod;
        }
}
inline ll ksm ( ll a, ll b ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % mod;
                a = a * a % mod;
                b >>= 1;
        }
        return res;
}
inline ll C ( ll a, ll b ) { 
        return f[a] * ksm(f[b], mod - 2) % mod * ksm(f[a - b], mod - 2) % mod;
}
inline void solve () {
        num.clear();
        cin >> n;
        for ( int i = 0; i < n; i ++ ) 
                cin >> a[i],
                num[a[i]] ++;
        sort ( a, a + n, [] ( ll a, ll b ) { return a > b; } );
        
        if ( a[0] - a[1] > 1 ) { // æœ€åä¸€ä¸ªè¦è‡ªå·±ä¸€ä¸ªè¿ç»­å‡å¥½å¤šæ¬¡
                cout << 0 << endl;
        } else if ( num[a[0]] > 1 ) { // è‡ªå·±å’Œè‡ªå·±é¡¶ï¼Œå¯ä»¥éšä¾¿æ
                cout << f[n] << endl;
        } else {
                ll res = f[n]; // åˆå§‹åŒ–ä¸ºæ‰€æœ‰çš„æƒ…å†µ
                ll del = f[n - 1]; // è¦åˆ å»çš„ä¸ç¬¦åˆçš„æƒ…å†µ
                for ( int i = num[a[1]]; i <= n - 2; i ++ ) {
                        del = ( del + C(i, num[a[1]]) * f[num[a[1]]] % mod * f[n - 1 - num[a[1]]] % mod ) % mod;
                }
                cout << ( ( res - del ) % mod + mod) % mod << endl;
        }
}

int main () {
#ifndef ONLINE_JUDGE
        freopen("in.in", "r", stdin);
        freopen("out.out", "w", stdout);
#endif
        get_F();
        ll cass; cin >> cass; while ( cass -- ) {
                solve();
        }
}
```

<hr>

### HDU2021å¤šæ ¡(10)4_PtyHatesPrimeNumbers

#### ğŸ”—
<a href="https://acm.dingbacode.com/showproblem.php?pid=7080"><img src="https://i.loli.net/2021/10/20/eH9yNx3BRCOqoMV.png"></a>

#### ğŸ’¡
é—®é¢˜å¯ä»¥è½¬åŒ–ä¸€ä¸‹ï¼Œç”±äºè‡ªå·±ä¹Ÿæ˜¯è‡ªå·±çš„å› æ•°ï¼Œæ‰€ä»¥å°±æ˜¯é—®[1, n]å†…æœ‰å¤šå°‘ä¸ªæ•°ä¸æ˜¯å‰kä¸ªç´ æ•°çš„å€æ•°  
è¿™ç±»è®¡æ•°é—®é¢˜å¾ˆå¿«è”æƒ³åˆ°å®¹æ–¥  
  
16ä¸ªæ•°ï¼Œä½†æ˜¯æœ‰1e5ç»„æ•°æ®  
é‚£ä¹ˆ2^16 * 1e5å°±å¾ˆéš¾åŠäº†  
ä½†æ˜¯2^8è¿˜æ˜¯å¾ˆå¥½è¿‡çš„ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹è´¨æ•°çš„ç»„åˆä¹˜ç§¯æƒ…å†µæ‰“è¡¨vec  
å¯¹äºå‰kä¸ªè´¨æ•°ï¼Œk<=8ï¼Œæˆ‘ä»¬æ‰“1~8çš„å®¹æ–¥è¡¨  
å¯¹äºk>8ï¼Œæˆ‘ä»¬æ‰“9~16çš„å®¹æ–¥è¡¨  
(ç”±äºå®¹æ–¥è¡¨ä¸­å«1ï¼Œå³éƒ½ä¸é€‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨n-vec[i]æ¥è®¡ç®—ä¸æ˜¯å‰kç´ æ•°å€æ•°çš„ä¸ªæ•°ï¼‰   
  
**k<=8**  
æˆ‘ä»¬ç›´æ¥å°±å®¹æ–¥åœ°`res +-= n / vec[i]`å°±è¡Œäº†  
**k>8**  
æˆ‘ä»¬è¿˜è¦åšä¸€äº›å¤„ç†  
å‰å…«ä¸ªç´ æ•°çš„ä¹˜ç§¯æ˜¯9699690  
æœ‰ä¸ªæ˜¾ç„¶çš„æ€§è´¨å°±æ˜¯ï¼šå¦‚æœä¸€ä¸ªæ•°xä¸æ˜¯å‰å…«ä¸ªç´ æ•°çš„å€æ•°ï¼Œx%9699690ä¹Ÿä¸ä¼šæ˜¯å‰å…«ä¸ªç´ æ•°çš„å€æ•°ï¼ˆåŒä½™  
è€Œ9699690ä¹Ÿä¸æ˜¯éå¸¸å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»§ç»­é¢„å¤„ç†ä¸€ä¸‹9699690ä»¥å†…ä¸æ˜¯å‰å…«ä¸ªæ•°çš„å€æ•°çš„ä¸ªæ•°ï¼ˆå‰ç¼€åœ°å¤„ç†  
ç„¶åæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æˆ‘ä»¬å¤„ç†å‡ºæ¥çš„ä¿¡æ¯ï¼Œå®¹æ–¥x=â€œåœ¨nä»¥å†…ä¸æ˜¯vec[i]çš„å€æ•°çš„æ•°ä¸­ï¼Œä¹Ÿä¸æ˜¯å‰8ä¸ªæ•°çš„å€æ•°çš„æƒ…å†µâ€  
  
è¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æšä¸¾å€æ•°çš„æ–¹å¼  
n / vec[i]è¡¨ç¤ºçš„æ˜¯nä»¥å†…ä»1å¼€å§‹çš„vec[i]çš„å€æ•°  
å¯¹è¿™äº›å€æ•°ï¼Œ[1, ..]ç›¸å½“äºæ‹†è§£å®Œvec[i]è¿™ä¸ªè´¨å› æ•°ä¹‹åæ®‹ä½™çš„æ•°ï¼Œä¸”ä»1å¼€å§‹è¿ç»­  
è¿™äº›æ•°ä¸­æˆ‘ä»¬å¯ä»¥æ±‚ä¸€ä¸‹Nçš„å‘¨æœŸä¸ªæ•°ï¼Œæ¯ä¸ªå‘¨æœŸæœ‰sum[N]ä¸ªæ»¡è¶³æ¡ä»¶çš„æ•°    
ç„¶åå‰©ä½™n / vec[i] % Nï¼Œè¿™é‡Œé¢æœ‰sum[n / vec[i] % N]ä¸ªæ»¡è¶³æ¡ä»¶çš„æ•°  
  
å®¹æ–¥è¿™äº›æ•°å°±è¡Œäº†  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
const int N = 9699690;
int prime[] = {0, 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53}; // å‰16ä¸ªè´¨æ•°
vector<ll> a[20], b[20]; // 01æšä¸¾åï¼Œå¥‡æ•°ä¸ªæ•°çš„ä¹˜ç§¯æƒ…å†µå’Œå¶æ•°å“¥çš„ä¹˜ç§¯æƒ…å†µ
int sum[N + 10]; // sum[i] = [1, i]ä¸­ä¸èƒ½è¢«å‰å…«ä¸ªè´¨æ•°æ•´é™¤çš„ä¸ªæ•°

inline void DFS ( int id, ll res, int cnt, int k ) { // æ„é€ å®¹æ–¥æ•°ç»„ï¼ˆå¡å…¥1ï¼Œä¸ç”¨å–åæ•°äº†
        if ( id > k ) {
                if ( cnt & 1 ) a[k].emplace_back(res);
                else           b[k].emplace_back(res);
                return; 
        }
        DFS ( id + 1, res * prime[id], cnt + 1, k );
        DFS ( id + 1, res,             cnt,     k );
}
inline void Pre () { // é¢„å¤„ç†sumä¸å®¹æ–¥æ•°ç»„
        for ( int k = 1; k <= 16; k ++ ) {
                if ( k <= 8 ) DFS ( 1, 1, 0, k );
                else          DFS ( 9, 1, 0, k );
        }
        for ( int i = 1; i <= 8; i ++ ) for ( int j = prime[i]; j <= N; j += prime[i] ) sum[j] = 1; // åŸƒæ°ç­›
        for ( int i = 1; i <= N; i ++ ) sum[i] = sum[i - 1] + (sum[i] == 0);
}
int main () {
        ios::sync_with_stdio(false); Pre();
        int cass; cin >> cass; while ( cass -- ) {
                ll n, k, res = 0;
                cin >> n >> k;
                if ( k <= 8 ) {
                        for ( auto i : a[k] ) res -= n / i; // æ™®é€šçš„å®¹æ–¥åŸç†
                        for ( auto i : b[k] ) res += n / i;
                } else {
                        for ( auto i : a[k] ) res -= n / i / N * sum[N] + sum[n / i % N]; // ç›¸å½“äºæšä¸¾å€æ•°ï¼Œå€æ•°æœ‰ n / i ä¸ªï¼Œåœ¨[1, n / i]ä¸­æ‰¾Nçš„å‘¨æœŸä¸æ¨¡Nä¹‹åå‰©ä½™çš„ä¸ªæ•°
                        for ( auto i : b[k] ) res += n / i / N * sum[N] + sum[n / i % N];
                }
                cout << res << endl;
        }
}
```

<hr>

### HDUOJ5776_sum

#### ğŸ”—
http://acm.hdu.edu.cn/showproblem.php?pid=5776

#### ğŸ’¡


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  

```cpp
#pragma region
#pragma GCC optimize(3,"Ofast","inline")
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define PI acos(-1.0)
#define ll long long
#define INF 0x7FFFFFFF
#define Regal exit(0)
#define Chivas int main()
#define pb(x) push_back(x)
#define SP system("pause")
#define Max(a,b) ((a)>(b)?(a):(b))
#define Min(a,b) ((a)<(b)?(a):(b))
#define IOS ios::sync_with_stdio(false)
#define mm(a, b) memset(a, b, sizeof(a))
#define each(cass) for (cin>>cass; cass; cass--)
#define test(a) cout << "---------" << a << "---------" << '\n'
 
using namespace std;
#pragma endregion

//å…¨å±€å˜é‡
#pragma region
string fro[100005];
string enn[100005];
int n, m;
vector<int> a;
map<int, int> vis;
int sum;
int cass;
#pragma endregion

inline void solve(){
    a.clear();
    vis.clear();
    sum = 0;
    cin >> n >> m;
    for(int i = 0, x; i < n; i ++){
        cin >> x;
        a.push_back(x);
    }
    for(int i = 0; i < n; i ++){
        sum = (sum + a[i]) % m;
        if(sum == 0){
            cout << "YES" << endl;
            return;
        }
        if(vis[sum]){
            cout << "YES" << endl;
            return;
        }
        vis[sum] = 1;
    }
    cout << "NO" << endl;
}

Chivas{
    each(cass){
        solve();
    }
    Regal;
}
```

<hr>

### HRBUST2414_æ ¼å­æŸ“è‰²è®¡æ•°

#### ğŸ”—
http://acm.hrbust.edu.cn/index.php?m=ProblemSet&a=showProblem&problem_id=2414

#### ğŸ’¡
è®¾ç¬¬a[i]ç§é¢œè‰²ä¸èƒ½ç”¨  
é‚£ä¹ˆæˆ‘ä»¬åœ¨é€‰kä¸ªæ•°ä¸­ï¼Œè¦æ±‚å¾—çš„æ˜¯  
<img src="https://latex.codecogs.com/svg.image?1-P(a[1]\cup&space;a[2]\cup&space;a[3]\cup&space;...\cup&space;a[k]&space;)" title="1-P(a[1]\cup a[2]\cup a[3]\cup ...\cup a[k] )" />  
è½¬åŒ–æˆå®¹æ–¥åŸç†å›¾å¾—åˆ°çš„ä¹Ÿå°±æ˜¯  
<img src="https://latex.codecogs.com/svg.image?\begin{align}&space;&space;1&-(P(a[1])&plus;P(a[2])&plus;...&plus;P(a[k]))\\&space;&&plus;&space;(P(a[1]\cap&space;a[2])&plus;P(a[1]\cap&space;a[3])&plus;...&plus;P(a[k-1]\cap&space;a[k]))&space;\\&-(P(a[1]\cap&space;a[2]\cap&space;a[3])&plus;P(a[1]\cap&space;a[2]\cap&space;a[4])&plus;...&plus;P(a[k-2]\cap&space;a[k-1]\cap&space;a[k]))\\&...\end{align}" title="\begin{align} 1&-(P(a[1])+P(a[2])+...+P(a[k]))\\ &+ (P(a[1]\cap a[2])+P(a[1]\cap a[3])+...+P(a[k-1]\cap a[k])) \\&-(P(a[1]\cap a[2]\cap a[3])+P(a[1]\cap a[2]\cap a[4])+...+P(a[k-2]\cap a[k-1]\cap a[k]))\\&...\end{align}" />    
è½¬åŒ–æˆå…¬å¼å°±æ˜¯  
<img src="https://latex.codecogs.com/svg.image?C_m^k(\sum_{i=1}^{k}(-1)^{k-i}C_k^ii(i-1)^{n-1})" title="C_m^k(\sum_{i=1}^{k}(-1)^{k-i}C_k^ii(i-1)^{n-1})" />  
é‚£ä¹ˆå°±å¼€å¢å¡æ–¯å®šç†æ±‚è§£å³å¯  


#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >

```cpp
#include <iostream>
#define ll long long
using namespace std;

const int mod = 1e9 + 7;

ll inv[1000010]; // é¢„å¤„ç†å¾ˆé‡è¦

inline ll ksm ( ll a, ll b, ll p ) {
        ll res = 1;
        while ( b ) {
                if ( b & 1 ) res = res * a % p;
                a = a * a % p;
                b >>= 1;
        }
        return res;
}

inline void Init () {
        for ( ll i = 1; i < 1000010; i ++ ) inv[i] = ksm(i, mod - 2, mod);
}

inline ll C ( ll n, ll m, ll p ) {
        if ( m > n ) return 0;
        ll res = 1;
        for ( ll i = 1; i <= m; i ++ ) {
                ll a = (n + i - m) % p;
                ll b = i % p;
                res = res * (a * ksm(b, mod - 2, mod) % p) % p;
        }
        return res;
}

inline ll lucas ( ll n, ll m, ll p ) {
        if ( m == 0 ) return 1;
        return C( n % p, m % p, p ) * lucas ( n / p, m / p, p ) % p;
}

int main () {
        Init();
        int cass;
        for ( scanf("%d", &cass); cass; cass -- ) {
                ll n, m, k; scanf("%lld%lld%lld", &n, &m, &k);
                ll tmp = 1;
                ll res =  0;
                for ( int i = 1; i <= k; i ++ ) {
                        int flag = (k - i) % 2 == 0 ? 1 : -1; // è¿™ä¸€ä½è¯¥åŠ è¯¥å‡
                        tmp = ((tmp * (k - i + 1)) % mod * inv[i]) % mod; // ä¸ç”¨æ¯ééƒ½lucasï¼Œæ¨ç€ç”¨ç€å³å¯
                        res = (res + flag * (i * ksm(i - 1, n - 1, mod) % mod) * tmp % mod + mod) % mod;
                }
                printf("%lld\n", res * lucas(m, k, mod) % mod);
        }
        return 0;
}
```

<hr>


## é¸½ç¬¼åŸç†

### CodeForces577B_ModuloSum

#### ğŸ”—
<a href="https://codeforces.com/contest/577/problem/B">![20220303092428](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220303092428.png)</a>

#### ğŸ’¡
é¦–å…ˆæ ¹æ®é¸½ç¬¼åŸç†  
è‹¥ $m<=n$  
å¯¹äºå‰ $m$ ä¸ªæ•°æœ‰ $m$ ä¸ªå‰ç¼€å’Œ  
- å­˜åœ¨ $0$ ï¼Œæ˜¾ç„¶å¯ä»¥
- ä¸å­˜åœ¨ $0$ï¼Œ$m$ ä¸ªæ•°ç”¨ $sz\{1,2,\dots,m-1\}=m-1$ ä¸ªä½™æ•°ï¼Œå¿…ç„¶æœ‰ä¸¤é‡å¤ï¼Œé‡å¤çš„å‰ç¼€å’Œæ„æˆçš„åŒºé—´å’Œä¸º $0$ ï¼Œä¹Ÿå¯ä»¥  

è‹¥ $m>n$  
é‚£ä¹ˆ $n<m\le 1000$ ï¼Œåˆ™æš´åŠ›è·‘ä¸€é $01$ èƒŒåŒ…å³å¯  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
int n, m;
bool dp[2][1000];

int main () {
	ios::sync_with_stdio(false);
	cin >> n >> m;
	if ( m <= n ) {
		cout << "YES" << endl;
		return 0;
	}
	for ( int i = 1; i <= n; i ++ ) {
		int x; cin >> x; x %= m;
		memset(dp[i & 1], false, sizeof dp[i & 1]);
		dp[i & 1][x] = true;
		for ( int j = 0; j < m; j ++ ) {
			dp[i & 1][j]           |= dp[i - 1 & 1][j];
			dp[i & 1][(j + x) % m] |= dp[i - 1 & 1][j];
		} 
		if ( dp[i & 1][0] ) { cout << "YES"; return 0; }
	}
	cout << "NO";
}
```
<hr>


### NamomoCamp2022æ˜¥å­£æ¯æ—¥ä¸€é¢˜_é€‰æ•°

#### ğŸ”—
<a href="http://oj.daimayuan.top/problem/456">![20220302115716](https://raw.githubusercontent.com/Tequila-Avage/PicGoBeds/master/20220302115716.png)</a>

#### ğŸ’¡
$n$ ä¸ªæ•°ï¼ŒèŒƒå›´å¾ˆæ˜æ˜¾äº†ï¼Œè¿™é‡Œæœ€å¤šæœ‰ $n$ ä¸ªä¸åŒçš„æ¨¡æ•°  
è€ƒè™‘å‰ç¼€å’Œï¼Œä¸€å…±æœ‰ $n$ ä¸ªå‰ç¼€å’Œï¼Œå¦‚æœå‡ºç° $0$ é‚£ä¹ˆå°±ç›´æ¥è¾“å‡ºè¿™ä¸ªå‰ç¼€å³å¯  
æœ‰å¯èƒ½æ²¡æœ‰ $0$ ï¼Œé‚£ä¹ˆ $n$ ä¸ªå‰ç¼€å’Œè¦ç”¨ $n-1$ ä¸ªæ•°å°±å¿…ç„¶å­˜åœ¨ä¸¤ä¸ªå‰ç¼€å’Œç›¸åŒ  
ç›¸åŒçš„ä¸¤ä¸ªå‰ç¼€å’Œå‡å‡ºæ¥çš„åŒºé—´å’Œä¸º $0$ ï¼Œä¹Ÿèƒ½æ»¡è¶³  
  
æ‰€ä»¥æ¯æ¬¡ç®—å‰ç¼€å’Œï¼Œå¦‚æœä¸º $0$ ç›´æ¥è¾“å‡ºï¼Œå¦åˆ™æŸ¥çœ‹æ˜¯å¦ä¹‹å‰å­˜åœ¨è¿‡è¿™ä¸ªå‰ç¼€å’Œï¼Œå¦‚æœå­˜åœ¨è¿‡ï¼Œå°±ä»ä¸Šä¸€ä¸ªè¯¥å‰ç¼€å’Œä¸‹æ ‡ $+1$ ä¸€ç›´åˆ°å½“å‰ä½ç½®  

#### <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
const int N = 1e5 + 10;
int n, a[N];
int id[N], sum;

int main () {
	ios::sync_with_stdio(false);
    
	cin >> n;
	for ( int i = 1; i <= n; i ++ ) {
		cin >> a[i];
		sum = (sum + a[i]) % n;
		if ( sum == 0 ) {
			cout << i << endl;
			for ( int j = 1; j <= i; j ++ ) cout << j << " ";
			cout << endl;
			return 0;
		}
		if ( id[sum] ) {
			cout << i - id[sum] << endl;
			for ( int j = id[sum] + 1; j <= i; j ++ ) cout << j << " ";
			return 0;
		}
		id[sum] = i;
	}
}
```
<hr>
