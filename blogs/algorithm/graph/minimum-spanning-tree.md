---
key: 2021-02-22-æœ€å°ç”Ÿæˆæ ‘
layout: article
title: æœ€å°ç”Ÿæˆæ ‘
subtitle: æ•´ä½“å¸ƒå±€å‡ºæ•´ä½“æœ€çŸ­è·¯ï¼ŸğŸ¤”
categories: å›¾è®º
tags: [å›¾è®º]
aside:
  toc: true
sidebar:
  nav: docs-en
---

## æ¦‚å¿µ

ç”Ÿæˆæ ‘ï¼šä¸€ä¸ªæœ‰ $n$ ä¸ªç»“ç‚¹çš„è¿é€šå›¾çš„ç”Ÿæˆæ ‘æ˜¯åŸå›¾çš„è¿é€šå­å›¾ï¼Œä¸”åŒ…å«åŸå›¾ä¸­çš„æ‰€æœ‰ $n$ ä¸ªç»“ç‚¹ã€‚  
æœ€å°ç”Ÿæˆæ ‘ï¼šä¸€ä¸ªæœ‰ $n$ ä¸ªç»“ç‚¹çš„è¿é€šå›¾çš„ç”Ÿæˆæ ‘æ˜¯åŸå›¾çš„æå°è¿é€šå­å›¾ï¼Œä¸”åŒ…å«åŸå›¾ä¸­çš„æ‰€æœ‰ $n$ ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”æœ‰ä¿æŒå›¾è¿é€šçš„æœ€å°‘çš„è¾¹ã€‚ä¸€ä¸ªè¿é€šå›¾è‡³å°‘å­˜åœ¨ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘åŒ…å«æƒæœ€å°çš„ä¸€è¾¹  

::: tip
å‰ç½®çŸ¥è¯†ï¼š[å¹¶æŸ¥é›†](../data-structure/unionset.md)
::: 

## å›¾è§£
  
å›¾ï¼š  

```mermaid
graph LR;
A---|1|B
A---|3|C
B---|2|D
C---|8|D
B---|4|C
A---|5|D
```

::: warning  

ä¸‹é¢çš„æ ‘ä¸­è™šçº¿è¡¨ç¤ºä¸è¿é€šï¼Œå®çº¿è¡¨ç¤ºè¿é€š  

:::

ç”Ÿæˆæ ‘ $1$ï¼šè¾¹æƒå’Œ $17$  

```mermaid
graph LR;
A-.-|1|B
A-.-|3|C
B-.-|2|D
C---|8|D
B---|4|C
A---|5|D
```
ç”Ÿæˆæ ‘ $2$ï¼šè¾¹æƒå’Œ $15$  

```mermaid
graph LR;
A-.-|1|B
A---|3|C
B-.-|2|D
C---|8|D
B---|4|C
A-.-|5|D
```
...  
æœ€å°ç”Ÿæˆæ ‘ï¼šè¾¹æƒå’Œ $6$  

```mermaid
graph LR;
A---|1|B
A---|3|C
B---|2|D
C-.-|8|D
B-.-|4|C
A-.-|5|D
```

## kruskalç®—æ³•è¿‡ç¨‹ 

ä¸€ä¸ªè´ªå¿ƒçš„æ€æƒ³  
æˆ‘ä»¬æ¯æ¬¡è¦æ¡è¾¹æƒå°½å¯èƒ½å°çš„è¾¹  
æˆ‘ä»¬å¯¹è¾¹æŒ‰è¾¹æƒæ’åºä¹‹å  
ä»å°åˆ°å¤§éå†è¿™äº›è¾¹
::: warning
å¦‚æœä¸€ä¸ªè¾¹çš„ä¸¤ç«¯æœ¬èº«å°±æ˜¯åœ¨åŒä¸€ä¸ªè¿é€šå—  
é‚£ä¹ˆè¿™æ¡è¾¹å°±æ²¡åŠæ³•æ’å…¥äº†
:::
è€ƒè™‘æ ‘çš„æ€§è´¨ï¼Œ $n$ ä¸ªèŠ‚ç‚¹çš„æ ‘æœ‰ $n-1$ æ¡è¾¹  
æ‰€ä»¥æˆ‘ä»¬æ’å…¥ $n-1$ æ¡è¾¹ä¹‹åï¼Œå°±æ²¡æœ‰åŠæ³•å†æ’å…¥äº†ï¼Œæ­¤æ—¶å°±å¯ä»¥ç›´æ¥è·³å‡ºå¾ªç¯äº†  

```cpp
namespace UnionSet { // å¹¶æŸ¥é›†åˆ¤è¿é€š
    int nod[N];
    inline void Find ( int x ) { ... }
    inline void Merge ( int x, int y ) { ... }
    inline void Check ( int x, int y ) { ... } // 1:è¿é€š 0:ä¸è¿é€š
}

int n, m;       // ç‚¹æ•°ï¼Œè¾¹æ•°
cin >> n >> m;
struct Edge { int u, v, w; } edge[m]; // è¾¹
for ( int i = 0; i < m; i ++ ) cin >> edge[i].u >> edge[i].v >> edge[i].w;

sort ( edge, edge + m, [&]( Edge a, Edge b ) { return a.w < b.w; }) // æŒ‰è¾¹æƒæ’åº

int cnt = 0; // å·²æ’å…¥è¾¹æ•°
int res = 0; // æœ€å°ç”Ÿæˆæ ‘æƒå€¼
for ( int i = 0; i < m; i ++ ) {
    if ( !UnionSet::Check(edge[i].u, edge[i].v) ) 
        UnionSet::Merge(edge[i].u, edge[i].v),
        cnt ++,
        res += edge[i].w;
    if ( cnt == n - 1 ) break;
}
if ( cnt < n - 1 ) cout << "æ— æ³•ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘" << endl;
else               cout << res << endl;
```

